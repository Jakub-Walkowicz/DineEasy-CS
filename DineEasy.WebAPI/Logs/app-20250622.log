2025-06-22 00:00:10.546 +02:00 [INF] Application is shutting down...
2025-06-22 00:00:45.354 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-22 00:00:45.384 +02:00 [INF] User profile is available. Using '/Users/jakubwalkowicz/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-06-22 00:00:45.408 +02:00 [INF] Now listening on: http://localhost:5049
2025-06-22 00:00:45.409 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-22 00:00:45.409 +02:00 [INF] Hosting environment: Development
2025-06-22 00:00:45.409 +02:00 [INF] Content root path: /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.WebAPI
2025-06-22 00:00:45.505 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5049/swagger/index.html - null null
2025-06-22 00:00:45.603 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5049/swagger/index.html - 200 null text/html;charset=utf-8 98.5689ms
2025-06-22 00:00:45.700 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5049/swagger/v1/swagger.json - null null
2025-06-22 00:00:45.801 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5049/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 100.7691ms
2025-06-22 00:00:50.735 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5049/api/auth/login - application/json; charset=utf-8 null
2025-06-22 00:00:50.741 +02:00 [WRN] Failed to determine the https port for redirect.
2025-06-22 00:00:50.762 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI)'
2025-06-22 00:00:50.774 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[DineEasy.SharedKernel.Models.Auth.AuthResponseDto]] Login(DineEasy.SharedKernel.Models.Auth.LoginDto) on controller DineEasy.WebAPI.Controllers.AuthController (DineEasy.WebAPI).
2025-06-22 00:00:50.803 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:00:50.804 +02:00 [INF] Login attempt for email: admin@dineeasy.com
2025-06-22 00:00:50.804 +02:00 [INF] Login attempt for email: admin@dineeasy.com
2025-06-22 00:00:50.978 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__email_0='?' (Size = 18)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."Email", "u"."PasswordHash", "u"."Role", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."Email" = @__email_0
LIMIT 1
2025-06-22 00:00:51.153 +02:00 [WRN] Failed login attempt for email: admin@dineeasy.com
2025-06-22 00:00:51.153 +02:00 [WRN] Failed login attempt for email: admin@dineeasy.com
2025-06-22 00:00:51.156 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.UnauthorizedObjectResult in 350.459ms.
2025-06-22 00:00:51.159 +02:00 [INF] Executing UnauthorizedObjectResult, writing value of type 'System.String'.
2025-06-22 00:00:51.160 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI) in 384.9424ms
2025-06-22 00:00:51.160 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI)'
2025-06-22 00:00:51.161 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5049/api/auth/login - 401 null text/plain; charset=utf-8 425.7023ms
2025-06-22 00:00:53.274 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5049/api/auth/login - application/json; charset=utf-8 null
2025-06-22 00:00:53.281 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI)'
2025-06-22 00:00:53.282 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[DineEasy.SharedKernel.Models.Auth.AuthResponseDto]] Login(DineEasy.SharedKernel.Models.Auth.LoginDto) on controller DineEasy.WebAPI.Controllers.AuthController (DineEasy.WebAPI).
2025-06-22 00:00:53.285 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:00:53.286 +02:00 [INF] Login attempt for email: admin@dineeasy.com
2025-06-22 00:00:53.286 +02:00 [INF] Login attempt for email: admin@dineeasy.com
2025-06-22 00:00:53.341 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__email_0='?' (Size = 18)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."Email", "u"."PasswordHash", "u"."Role", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."Email" = @__email_0
LIMIT 1
2025-06-22 00:00:53.489 +02:00 [WRN] Failed login attempt for email: admin@dineeasy.com
2025-06-22 00:00:53.489 +02:00 [WRN] Failed login attempt for email: admin@dineeasy.com
2025-06-22 00:00:53.489 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.UnauthorizedObjectResult in 203.4812ms.
2025-06-22 00:00:53.489 +02:00 [INF] Executing UnauthorizedObjectResult, writing value of type 'System.String'.
2025-06-22 00:00:53.489 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI) in 207.4513ms
2025-06-22 00:00:53.489 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI)'
2025-06-22 00:00:53.490 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5049/api/auth/login - 401 null text/plain; charset=utf-8 215.4462ms
2025-06-22 00:00:56.398 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5049/api/auth/login - application/json; charset=utf-8 null
2025-06-22 00:00:56.399 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI)'
2025-06-22 00:00:56.399 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[DineEasy.SharedKernel.Models.Auth.AuthResponseDto]] Login(DineEasy.SharedKernel.Models.Auth.LoginDto) on controller DineEasy.WebAPI.Controllers.AuthController (DineEasy.WebAPI).
2025-06-22 00:00:56.401 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:00:56.401 +02:00 [INF] Login attempt for email: admin@dineeasy.com
2025-06-22 00:00:56.401 +02:00 [INF] Login attempt for email: admin@dineeasy.com
2025-06-22 00:00:56.402 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__email_0='?' (Size = 18)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."Email", "u"."PasswordHash", "u"."Role", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."Email" = @__email_0
LIMIT 1
2025-06-22 00:00:56.560 +02:00 [INF] Successful login for user: admin123123
2025-06-22 00:00:56.560 +02:00 [INF] Successful login for user: admin123123
2025-06-22 00:00:56.560 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 159.3755ms.
2025-06-22 00:00:56.560 +02:00 [INF] Executing OkObjectResult, writing value of type 'DineEasy.SharedKernel.Models.Auth.AuthResponseDto'.
2025-06-22 00:00:56.566 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI) in 166.7954ms
2025-06-22 00:00:56.566 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI)'
2025-06-22 00:00:56.566 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5049/api/auth/login - 200 null application/json; charset=utf-8 168.5113ms
2025-06-22 00:01:01.961 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5049/api/auth/login - application/json; charset=utf-8 null
2025-06-22 00:01:01.961 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI)'
2025-06-22 00:01:01.962 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[DineEasy.SharedKernel.Models.Auth.AuthResponseDto]] Login(DineEasy.SharedKernel.Models.Auth.LoginDto) on controller DineEasy.WebAPI.Controllers.AuthController (DineEasy.WebAPI).
2025-06-22 00:01:01.962 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:01:01.963 +02:00 [INF] Login attempt for email: admin@dineeasy.com
2025-06-22 00:01:01.963 +02:00 [INF] Login attempt for email: admin@dineeasy.com
2025-06-22 00:01:01.964 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__email_0='?' (Size = 18)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."Email", "u"."PasswordHash", "u"."Role", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."Email" = @__email_0
LIMIT 1
2025-06-22 00:01:02.129 +02:00 [INF] Successful login for user: admin123123
2025-06-22 00:01:02.129 +02:00 [INF] Successful login for user: admin123123
2025-06-22 00:01:02.129 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 166.4943ms.
2025-06-22 00:01:02.129 +02:00 [INF] Executing OkObjectResult, writing value of type 'DineEasy.SharedKernel.Models.Auth.AuthResponseDto'.
2025-06-22 00:01:02.129 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI) in 167.6617ms
2025-06-22 00:01:02.129 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI)'
2025-06-22 00:01:02.129 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5049/api/auth/login - 200 null application/json; charset=utf-8 168.3004ms
2025-06-22 00:04:16.109 +02:00 [INF] Application is shutting down...
2025-06-22 00:04:18.734 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-22 00:04:18.782 +02:00 [INF] User profile is available. Using '/Users/jakubwalkowicz/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-06-22 00:04:18.813 +02:00 [INF] Now listening on: http://localhost:5049
2025-06-22 00:04:18.815 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-22 00:04:18.815 +02:00 [INF] Hosting environment: Development
2025-06-22 00:04:18.815 +02:00 [INF] Content root path: /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.WebAPI
2025-06-22 00:04:18.992 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5049/swagger/index.html - null null
2025-06-22 00:04:19.088 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5049/swagger/index.html - 200 null text/html;charset=utf-8 97.3703ms
2025-06-22 00:04:19.136 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5049/swagger/v1/swagger.json - null null
2025-06-22 00:04:19.226 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5049/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 90.3621ms
2025-06-22 00:04:48.381 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5049/api/auth/login - application/json; charset=utf-8 null
2025-06-22 00:04:48.386 +02:00 [WRN] Failed to determine the https port for redirect.
2025-06-22 00:04:48.407 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI)'
2025-06-22 00:04:48.418 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[DineEasy.SharedKernel.Models.Auth.AuthResponseDto]] Login(DineEasy.SharedKernel.Models.Auth.LoginDto) on controller DineEasy.WebAPI.Controllers.AuthController (DineEasy.WebAPI).
2025-06-22 00:04:48.447 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:04:48.448 +02:00 [INF] Login attempt for email: admin@dineeasy.com
2025-06-22 00:04:48.448 +02:00 [INF] Login attempt for email: admin@dineeasy.com
2025-06-22 00:04:48.621 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__email_0='?' (Size = 18)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."Email", "u"."PasswordHash", "u"."Role", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."Email" = @__email_0
LIMIT 1
2025-06-22 00:04:48.794 +02:00 [WRN] Failed login attempt for email: admin@dineeasy.com
2025-06-22 00:04:48.794 +02:00 [WRN] Failed login attempt for email: admin@dineeasy.com
2025-06-22 00:04:48.796 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.UnauthorizedObjectResult in 347.7465ms.
2025-06-22 00:04:48.800 +02:00 [INF] Executing UnauthorizedObjectResult, writing value of type 'System.String'.
2025-06-22 00:04:48.801 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI) in 381.2342ms
2025-06-22 00:04:48.801 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI)'
2025-06-22 00:04:48.802 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5049/api/auth/login - 401 null text/plain; charset=utf-8 421.1048ms
2025-06-22 00:04:51.786 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5049/api/auth/login - application/json; charset=utf-8 null
2025-06-22 00:04:51.790 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI)'
2025-06-22 00:04:51.790 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[DineEasy.SharedKernel.Models.Auth.AuthResponseDto]] Login(DineEasy.SharedKernel.Models.Auth.LoginDto) on controller DineEasy.WebAPI.Controllers.AuthController (DineEasy.WebAPI).
2025-06-22 00:04:51.793 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:04:51.794 +02:00 [INF] Login attempt for email: admin@dineeasy.com
2025-06-22 00:04:51.794 +02:00 [INF] Login attempt for email: admin@dineeasy.com
2025-06-22 00:04:51.840 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__email_0='?' (Size = 18)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."Email", "u"."PasswordHash", "u"."Role", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."Email" = @__email_0
LIMIT 1
2025-06-22 00:04:51.997 +02:00 [INF] Successful login for user: admin123123
2025-06-22 00:04:51.997 +02:00 [INF] Successful login for user: admin123123
2025-06-22 00:04:51.997 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 203.689ms.
2025-06-22 00:04:51.997 +02:00 [INF] Executing OkObjectResult, writing value of type 'DineEasy.SharedKernel.Models.Auth.AuthResponseDto'.
2025-06-22 00:04:52.004 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI) in 213.3618ms
2025-06-22 00:04:52.004 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI)'
2025-06-22 00:04:52.004 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5049/api/auth/login - 200 null application/json; charset=utf-8 218.0445ms
2025-06-22 00:05:05.866 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5049/api/auth/login - application/json; charset=utf-8 null
2025-06-22 00:05:05.869 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI)'
2025-06-22 00:05:05.869 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[DineEasy.SharedKernel.Models.Auth.AuthResponseDto]] Login(DineEasy.SharedKernel.Models.Auth.LoginDto) on controller DineEasy.WebAPI.Controllers.AuthController (DineEasy.WebAPI).
2025-06-22 00:05:05.872 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:05:05.872 +02:00 [INF] Login attempt for email: admin@dineeasy.com
2025-06-22 00:05:05.872 +02:00 [INF] Login attempt for email: admin@dineeasy.com
2025-06-22 00:05:05.874 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__email_0='?' (Size = 18)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."Email", "u"."PasswordHash", "u"."Role", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."Email" = @__email_0
LIMIT 1
2025-06-22 00:05:06.027 +02:00 [INF] Successful login for user: admin123123
2025-06-22 00:05:06.027 +02:00 [INF] Successful login for user: admin123123
2025-06-22 00:05:06.027 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 155.1367ms.
2025-06-22 00:05:06.027 +02:00 [INF] Executing OkObjectResult, writing value of type 'DineEasy.SharedKernel.Models.Auth.AuthResponseDto'.
2025-06-22 00:05:06.027 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI) in 158.4368ms
2025-06-22 00:05:06.027 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI)'
2025-06-22 00:05:06.027 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5049/api/auth/login - 200 null application/json; charset=utf-8 161.2184ms
2025-06-22 00:05:35.131 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5049/api/auth/login - application/json; charset=utf-8 null
2025-06-22 00:05:35.131 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI)'
2025-06-22 00:05:35.131 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[DineEasy.SharedKernel.Models.Auth.AuthResponseDto]] Login(DineEasy.SharedKernel.Models.Auth.LoginDto) on controller DineEasy.WebAPI.Controllers.AuthController (DineEasy.WebAPI).
2025-06-22 00:05:35.132 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:05:35.132 +02:00 [INF] Login attempt for email: admin@dineeasy.com
2025-06-22 00:05:35.132 +02:00 [INF] Login attempt for email: admin@dineeasy.com
2025-06-22 00:05:35.133 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__email_0='?' (Size = 18)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."Email", "u"."PasswordHash", "u"."Role", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."Email" = @__email_0
LIMIT 1
2025-06-22 00:05:35.287 +02:00 [INF] Successful login for user: admin123123
2025-06-22 00:05:35.287 +02:00 [INF] Successful login for user: admin123123
2025-06-22 00:05:35.287 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 155.3966ms.
2025-06-22 00:05:35.287 +02:00 [INF] Executing OkObjectResult, writing value of type 'DineEasy.SharedKernel.Models.Auth.AuthResponseDto'.
2025-06-22 00:05:35.287 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI) in 156.3465ms
2025-06-22 00:05:35.287 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI)'
2025-06-22 00:05:35.287 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5049/api/auth/login - 200 null application/json; charset=utf-8 156.8594ms
2025-06-22 00:05:49.028 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5049/api/auth/login - application/json; charset=utf-8 null
2025-06-22 00:05:49.029 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI)'
2025-06-22 00:05:49.029 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[DineEasy.SharedKernel.Models.Auth.AuthResponseDto]] Login(DineEasy.SharedKernel.Models.Auth.LoginDto) on controller DineEasy.WebAPI.Controllers.AuthController (DineEasy.WebAPI).
2025-06-22 00:05:49.030 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:05:49.030 +02:00 [INF] Login attempt for email: admin@dineeasy.com
2025-06-22 00:05:49.030 +02:00 [INF] Login attempt for email: admin@dineeasy.com
2025-06-22 00:05:49.032 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__email_0='?' (Size = 18)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."Email", "u"."PasswordHash", "u"."Role", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."Email" = @__email_0
LIMIT 1
2025-06-22 00:05:49.198 +02:00 [INF] Successful login for user: admin123123
2025-06-22 00:05:49.198 +02:00 [INF] Successful login for user: admin123123
2025-06-22 00:05:49.198 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 167.9512ms.
2025-06-22 00:05:49.198 +02:00 [INF] Executing OkObjectResult, writing value of type 'DineEasy.SharedKernel.Models.Auth.AuthResponseDto'.
2025-06-22 00:05:49.199 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI) in 169.3344ms
2025-06-22 00:05:49.199 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI)'
2025-06-22 00:05:49.199 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5049/api/auth/login - 200 null application/json; charset=utf-8 170.3076ms
2025-06-22 00:07:19.554 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5049/api/auth/login - application/json; charset=utf-8 null
2025-06-22 00:07:19.554 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI)'
2025-06-22 00:07:19.554 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[DineEasy.SharedKernel.Models.Auth.AuthResponseDto]] Login(DineEasy.SharedKernel.Models.Auth.LoginDto) on controller DineEasy.WebAPI.Controllers.AuthController (DineEasy.WebAPI).
2025-06-22 00:07:19.555 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:07:19.555 +02:00 [INF] Login attempt for email: admin@dineeasy.com
2025-06-22 00:07:19.555 +02:00 [INF] Login attempt for email: admin@dineeasy.com
2025-06-22 00:07:19.556 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__email_0='?' (Size = 18)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."Email", "u"."PasswordHash", "u"."Role", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."Email" = @__email_0
LIMIT 1
2025-06-22 00:07:19.708 +02:00 [WRN] Failed login attempt for email: admin@dineeasy.com
2025-06-22 00:07:19.708 +02:00 [WRN] Failed login attempt for email: admin@dineeasy.com
2025-06-22 00:07:19.708 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.UnauthorizedObjectResult in 153.5011ms.
2025-06-22 00:07:19.708 +02:00 [INF] Executing UnauthorizedObjectResult, writing value of type 'System.String'.
2025-06-22 00:07:19.709 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI) in 154.3917ms
2025-06-22 00:07:19.709 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI)'
2025-06-22 00:07:19.709 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5049/api/auth/login - 401 null text/plain; charset=utf-8 154.8922ms
2025-06-22 00:07:22.825 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5049/api/auth/login - application/json; charset=utf-8 null
2025-06-22 00:07:22.825 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI)'
2025-06-22 00:07:22.825 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[DineEasy.SharedKernel.Models.Auth.AuthResponseDto]] Login(DineEasy.SharedKernel.Models.Auth.LoginDto) on controller DineEasy.WebAPI.Controllers.AuthController (DineEasy.WebAPI).
2025-06-22 00:07:22.827 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:07:22.827 +02:00 [INF] Login attempt for email: admin@dineeasy.com
2025-06-22 00:07:22.827 +02:00 [INF] Login attempt for email: admin@dineeasy.com
2025-06-22 00:07:22.830 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__email_0='?' (Size = 18)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."Email", "u"."PasswordHash", "u"."Role", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."Email" = @__email_0
LIMIT 1
2025-06-22 00:07:23.011 +02:00 [INF] Successful login for user: admin123123
2025-06-22 00:07:23.011 +02:00 [INF] Successful login for user: admin123123
2025-06-22 00:07:23.011 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 183.5917ms.
2025-06-22 00:07:23.011 +02:00 [INF] Executing OkObjectResult, writing value of type 'DineEasy.SharedKernel.Models.Auth.AuthResponseDto'.
2025-06-22 00:07:23.011 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI) in 185.4819ms
2025-06-22 00:07:23.011 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI)'
2025-06-22 00:07:23.011 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5049/api/auth/login - 200 null application/json; charset=utf-8 186.1757ms
2025-06-22 00:08:16.321 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5049/api/auth/login - application/json; charset=utf-8 null
2025-06-22 00:08:16.321 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI)'
2025-06-22 00:08:16.321 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[DineEasy.SharedKernel.Models.Auth.AuthResponseDto]] Login(DineEasy.SharedKernel.Models.Auth.LoginDto) on controller DineEasy.WebAPI.Controllers.AuthController (DineEasy.WebAPI).
2025-06-22 00:08:16.322 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:08:16.322 +02:00 [INF] Login attempt for email: admin@dineeasy.com
2025-06-22 00:08:16.322 +02:00 [INF] Login attempt for email: admin@dineeasy.com
2025-06-22 00:08:16.323 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__email_0='?' (Size = 18)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."Email", "u"."PasswordHash", "u"."Role", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."Email" = @__email_0
LIMIT 1
2025-06-22 00:08:16.474 +02:00 [INF] Successful login for user: admin123123
2025-06-22 00:08:16.474 +02:00 [INF] Successful login for user: admin123123
2025-06-22 00:08:16.474 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 151.8664ms.
2025-06-22 00:08:16.474 +02:00 [INF] Executing OkObjectResult, writing value of type 'DineEasy.SharedKernel.Models.Auth.AuthResponseDto'.
2025-06-22 00:08:16.474 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI) in 153.1357ms
2025-06-22 00:08:16.474 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI)'
2025-06-22 00:08:16.475 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5049/api/auth/login - 200 null application/json; charset=utf-8 154.0191ms
2025-06-22 00:09:44.156 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5049/api/auth/login - application/json; charset=utf-8 null
2025-06-22 00:09:44.157 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI)'
2025-06-22 00:09:44.157 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[DineEasy.SharedKernel.Models.Auth.AuthResponseDto]] Login(DineEasy.SharedKernel.Models.Auth.LoginDto) on controller DineEasy.WebAPI.Controllers.AuthController (DineEasy.WebAPI).
2025-06-22 00:09:44.158 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:09:44.158 +02:00 [INF] Login attempt for email: admin@dineeasy.com
2025-06-22 00:09:44.158 +02:00 [INF] Login attempt for email: admin@dineeasy.com
2025-06-22 00:09:44.159 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__email_0='?' (Size = 18)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."Email", "u"."PasswordHash", "u"."Role", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."Email" = @__email_0
LIMIT 1
2025-06-22 00:09:44.310 +02:00 [INF] Successful login for user: admin123123
2025-06-22 00:09:44.310 +02:00 [INF] Successful login for user: admin123123
2025-06-22 00:09:44.310 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 151.8494ms.
2025-06-22 00:09:44.310 +02:00 [INF] Executing OkObjectResult, writing value of type 'DineEasy.SharedKernel.Models.Auth.AuthResponseDto'.
2025-06-22 00:09:44.310 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI) in 152.5804ms
2025-06-22 00:09:44.310 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI)'
2025-06-22 00:09:44.310 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5049/api/auth/login - 200 null application/json; charset=utf-8 153.7203ms
2025-06-22 00:10:32.591 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5049/api/auth/login - application/json; charset=utf-8 null
2025-06-22 00:10:32.591 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI)'
2025-06-22 00:10:32.591 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[DineEasy.SharedKernel.Models.Auth.AuthResponseDto]] Login(DineEasy.SharedKernel.Models.Auth.LoginDto) on controller DineEasy.WebAPI.Controllers.AuthController (DineEasy.WebAPI).
2025-06-22 00:10:32.592 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:10:32.592 +02:00 [INF] Login attempt for email: admin@dineeasy.com
2025-06-22 00:10:32.592 +02:00 [INF] Login attempt for email: admin@dineeasy.com
2025-06-22 00:10:32.594 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__email_0='?' (Size = 18)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."Email", "u"."PasswordHash", "u"."Role", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."Email" = @__email_0
LIMIT 1
2025-06-22 00:10:32.750 +02:00 [WRN] Failed login attempt for email: admin@dineeasy.com
2025-06-22 00:10:32.750 +02:00 [WRN] Failed login attempt for email: admin@dineeasy.com
2025-06-22 00:10:32.751 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.UnauthorizedObjectResult in 158.4761ms.
2025-06-22 00:10:32.751 +02:00 [INF] Executing UnauthorizedObjectResult, writing value of type 'System.String'.
2025-06-22 00:10:32.751 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI) in 159.5046ms
2025-06-22 00:10:32.751 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI)'
2025-06-22 00:10:32.751 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5049/api/auth/login - 401 null text/plain; charset=utf-8 160.2116ms
2025-06-22 00:10:35.528 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5049/api/auth/login - application/json; charset=utf-8 null
2025-06-22 00:10:35.528 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI)'
2025-06-22 00:10:35.528 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[DineEasy.SharedKernel.Models.Auth.AuthResponseDto]] Login(DineEasy.SharedKernel.Models.Auth.LoginDto) on controller DineEasy.WebAPI.Controllers.AuthController (DineEasy.WebAPI).
2025-06-22 00:10:35.529 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:10:35.530 +02:00 [INF] Login attempt for email: admin@dineeasy.com
2025-06-22 00:10:35.530 +02:00 [INF] Login attempt for email: admin@dineeasy.com
2025-06-22 00:10:35.531 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__email_0='?' (Size = 18)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."Email", "u"."PasswordHash", "u"."Role", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."Email" = @__email_0
LIMIT 1
2025-06-22 00:10:35.713 +02:00 [INF] Successful login for user: admin123123
2025-06-22 00:10:35.714 +02:00 [INF] Successful login for user: admin123123
2025-06-22 00:10:35.714 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 183.9859ms.
2025-06-22 00:10:35.714 +02:00 [INF] Executing OkObjectResult, writing value of type 'DineEasy.SharedKernel.Models.Auth.AuthResponseDto'.
2025-06-22 00:10:35.714 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI) in 185.5302ms
2025-06-22 00:10:35.714 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI)'
2025-06-22 00:10:35.714 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5049/api/auth/login - 200 null application/json; charset=utf-8 186.2692ms
2025-06-22 00:12:13.140 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5049/api/auth/login - application/json; charset=utf-8 null
2025-06-22 00:12:13.140 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI)'
2025-06-22 00:12:13.140 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[DineEasy.SharedKernel.Models.Auth.AuthResponseDto]] Login(DineEasy.SharedKernel.Models.Auth.LoginDto) on controller DineEasy.WebAPI.Controllers.AuthController (DineEasy.WebAPI).
2025-06-22 00:12:13.140 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:12:13.140 +02:00 [INF] Login attempt for email: admin@dineeasy.com
2025-06-22 00:12:13.140 +02:00 [INF] Login attempt for email: admin@dineeasy.com
2025-06-22 00:12:13.141 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__email_0='?' (Size = 18)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."Email", "u"."PasswordHash", "u"."Role", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."Email" = @__email_0
LIMIT 1
2025-06-22 00:12:13.282 +02:00 [INF] Successful login for user: admin123123
2025-06-22 00:12:13.282 +02:00 [INF] Successful login for user: admin123123
2025-06-22 00:12:13.282 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 141.9982ms.
2025-06-22 00:12:13.282 +02:00 [INF] Executing OkObjectResult, writing value of type 'DineEasy.SharedKernel.Models.Auth.AuthResponseDto'.
2025-06-22 00:12:13.282 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI) in 142.5717ms
2025-06-22 00:12:13.282 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI)'
2025-06-22 00:12:13.282 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5049/api/auth/login - 200 null application/json; charset=utf-8 142.8684ms
2025-06-22 00:14:14.115 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5049/api/auth/login - application/json; charset=utf-8 null
2025-06-22 00:14:14.116 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI)'
2025-06-22 00:14:14.116 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[DineEasy.SharedKernel.Models.Auth.AuthResponseDto]] Login(DineEasy.SharedKernel.Models.Auth.LoginDto) on controller DineEasy.WebAPI.Controllers.AuthController (DineEasy.WebAPI).
2025-06-22 00:14:14.117 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:14:14.117 +02:00 [INF] Login attempt for email: admin@dineeasy.com
2025-06-22 00:14:14.117 +02:00 [INF] Login attempt for email: admin@dineeasy.com
2025-06-22 00:14:14.118 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__email_0='?' (Size = 18)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."Email", "u"."PasswordHash", "u"."Role", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."Email" = @__email_0
LIMIT 1
2025-06-22 00:14:14.270 +02:00 [INF] Successful login for user: admin123123
2025-06-22 00:14:14.270 +02:00 [INF] Successful login for user: admin123123
2025-06-22 00:14:14.270 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 153.2427ms.
2025-06-22 00:14:14.270 +02:00 [INF] Executing OkObjectResult, writing value of type 'DineEasy.SharedKernel.Models.Auth.AuthResponseDto'.
2025-06-22 00:14:14.271 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI) in 154.2997ms
2025-06-22 00:14:14.271 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI)'
2025-06-22 00:14:14.271 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5049/api/auth/login - 200 null application/json; charset=utf-8 155.3013ms
2025-06-22 00:14:41.155 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5049/api/auth/login - application/json; charset=utf-8 null
2025-06-22 00:14:41.155 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI)'
2025-06-22 00:14:41.156 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[DineEasy.SharedKernel.Models.Auth.AuthResponseDto]] Login(DineEasy.SharedKernel.Models.Auth.LoginDto) on controller DineEasy.WebAPI.Controllers.AuthController (DineEasy.WebAPI).
2025-06-22 00:14:41.156 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:14:41.156 +02:00 [INF] Login attempt for email: admin@dineeasy.com
2025-06-22 00:14:41.156 +02:00 [INF] Login attempt for email: admin@dineeasy.com
2025-06-22 00:14:41.157 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__email_0='?' (Size = 18)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."Email", "u"."PasswordHash", "u"."Role", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."Email" = @__email_0
LIMIT 1
2025-06-22 00:14:41.306 +02:00 [INF] Successful login for user: admin123123
2025-06-22 00:14:41.306 +02:00 [INF] Successful login for user: admin123123
2025-06-22 00:14:41.306 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 150.0157ms.
2025-06-22 00:14:41.306 +02:00 [INF] Executing OkObjectResult, writing value of type 'DineEasy.SharedKernel.Models.Auth.AuthResponseDto'.
2025-06-22 00:14:41.306 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI) in 150.7025ms
2025-06-22 00:14:41.306 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI)'
2025-06-22 00:14:41.306 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5049/api/auth/login - 200 null application/json; charset=utf-8 151.8226ms
2025-06-22 00:15:28.820 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5049/api/auth/login - application/json; charset=utf-8 null
2025-06-22 00:15:28.820 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI)'
2025-06-22 00:15:28.820 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[DineEasy.SharedKernel.Models.Auth.AuthResponseDto]] Login(DineEasy.SharedKernel.Models.Auth.LoginDto) on controller DineEasy.WebAPI.Controllers.AuthController (DineEasy.WebAPI).
2025-06-22 00:15:28.821 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:15:28.821 +02:00 [INF] Login attempt for email: admin@dineeasy.com
2025-06-22 00:15:28.821 +02:00 [INF] Login attempt for email: admin@dineeasy.com
2025-06-22 00:15:28.821 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__email_0='?' (Size = 18)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."Email", "u"."PasswordHash", "u"."Role", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."Email" = @__email_0
LIMIT 1
2025-06-22 00:15:28.965 +02:00 [INF] Successful login for user: admin123123
2025-06-22 00:15:28.965 +02:00 [INF] Successful login for user: admin123123
2025-06-22 00:15:28.966 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 144.948ms.
2025-06-22 00:15:28.966 +02:00 [INF] Executing OkObjectResult, writing value of type 'DineEasy.SharedKernel.Models.Auth.AuthResponseDto'.
2025-06-22 00:15:28.966 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI) in 145.6821ms
2025-06-22 00:15:28.966 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI)'
2025-06-22 00:15:28.966 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5049/api/auth/login - 200 null application/json; charset=utf-8 146.2293ms
2025-06-22 00:15:29.969 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5049/api/reservations - null null
2025-06-22 00:15:30.006 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI)'
2025-06-22 00:15:30.008 +02:00 [INF] Route matched with {action = "GetAll", controller = "Reservations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[DineEasy.SharedKernel.Models.Reservation.ReservationDto]]] GetAll() on controller DineEasy.WebAPI.Controllers.ReservationsController (DineEasy.WebAPI).
2025-06-22 00:15:30.009 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:15:30.011 +02:00 [INF] Getting reservations for user: admin123123
2025-06-22 00:15:30.011 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 1
2025-06-22 00:15:30.011 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin123123
2025-06-22 00:15:30.011 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = admin@dineeasy.com
2025-06-22 00:15:30.011 +02:00 [INF] Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = Admin
2025-06-22 00:15:30.011 +02:00 [INF] Claim: exp = 1750630528
2025-06-22 00:15:30.011 +02:00 [INF] Claim: iss = DineEasy
2025-06-22 00:15:30.011 +02:00 [INF] Claim: aud = DineEasy-Users
2025-06-22 00:15:30.011 +02:00 [INF] User is Admin - returning all reservations
2025-06-22 00:15:30.011 +02:00 [INF] Retrieving all reservations
2025-06-22 00:15:30.017 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Id", "r"."CreatedAt", "r"."Duration", "r"."PartySize", "r"."ReservationDateTime", "r"."SpecialRequests", "r"."Status", "r"."TableId", "r"."UserId"
FROM "Reservations" AS "r"
2025-06-22 00:15:30.018 +02:00 [INF] Successfully retrieved 0 reservations
2025-06-22 00:15:30.018 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 8.5997ms.
2025-06-22 00:15:30.018 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DineEasy.SharedKernel.Models.Reservation.ReservationDto, DineEasy.SharedKernel, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-22 00:15:30.024 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI) in 16.0928ms
2025-06-22 00:15:30.024 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI)'
2025-06-22 00:15:30.025 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5049/api/reservations - 200 null application/json; charset=utf-8 55.4898ms
2025-06-22 00:15:35.634 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5049/api/reservations - application/json; charset=utf-8 116
2025-06-22 00:15:35.639 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI)'
2025-06-22 00:15:35.645 +02:00 [INF] Route matched with {action = "Create", controller = "Reservations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[DineEasy.SharedKernel.Models.Reservation.ReservationDto]] Create(DineEasy.SharedKernel.Models.Reservation.CreateReservationDto) on controller DineEasy.WebAPI.Controllers.ReservationsController (DineEasy.WebAPI).
2025-06-22 00:15:35.663 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:15:35.665 +02:00 [INF] Creating new reservation for UserId: 0, TableId: 0
2025-06-22 00:15:35.669 +02:00 [INF] Creating new reservation - UserId: 0, TableId: 0, DateTime: "0001-01-01T00:00:00.0000000", Duration: 2, PartySize: 1
2025-06-22 00:15:35.716 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."Email", "u"."PasswordHash", "u"."Role", "u"."Username", "u0"."Id", "u0"."CreatedAt", "u0"."DateOfBirth", "u0"."FirstName", "u0"."LastName", "u0"."PhoneNumber", "u0"."UserId"
FROM "Users" AS "u"
LEFT JOIN "UserProfiles" AS "u0" ON "u"."Id" = "u0"."UserId"
WHERE "u"."Id" = @__id_0
LIMIT 1
2025-06-22 00:15:35.717 +02:00 [WRN] Reservation creation failed - User with ID 0 not found
2025-06-22 00:15:35.717 +02:00 [ERR] Unexpected error creating reservation for UserId: 0
System.Exception: User not found!
   at DineEasy.Application.Services.ReservationService.CreateAsync(CreateReservationDto dto) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 39
   at DineEasy.WebAPI.Controllers.ReservationsController.Create(CreateReservationDto dto) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.WebAPI/Controllers/ReservationsController.cs:line 123
2025-06-22 00:15:35.731 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 67.4981ms.
2025-06-22 00:15:35.731 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-06-22 00:15:35.731 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI) in 86.1979ms
2025-06-22 00:15:35.731 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI)'
2025-06-22 00:15:35.731 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5049/api/reservations - 500 null text/plain; charset=utf-8 97.3596ms
2025-06-22 00:15:37.106 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5049/api/reservations - application/json; charset=utf-8 116
2025-06-22 00:15:37.109 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI)'
2025-06-22 00:15:37.109 +02:00 [INF] Route matched with {action = "Create", controller = "Reservations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[DineEasy.SharedKernel.Models.Reservation.ReservationDto]] Create(DineEasy.SharedKernel.Models.Reservation.CreateReservationDto) on controller DineEasy.WebAPI.Controllers.ReservationsController (DineEasy.WebAPI).
2025-06-22 00:15:37.111 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:15:37.112 +02:00 [INF] Creating new reservation for UserId: 0, TableId: 0
2025-06-22 00:15:37.112 +02:00 [INF] Creating new reservation - UserId: 0, TableId: 0, DateTime: "0001-01-01T00:00:00.0000000", Duration: 2, PartySize: 1
2025-06-22 00:15:37.114 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."Email", "u"."PasswordHash", "u"."Role", "u"."Username", "u0"."Id", "u0"."CreatedAt", "u0"."DateOfBirth", "u0"."FirstName", "u0"."LastName", "u0"."PhoneNumber", "u0"."UserId"
FROM "Users" AS "u"
LEFT JOIN "UserProfiles" AS "u0" ON "u"."Id" = "u0"."UserId"
WHERE "u"."Id" = @__id_0
LIMIT 1
2025-06-22 00:15:37.115 +02:00 [WRN] Reservation creation failed - User with ID 0 not found
2025-06-22 00:15:37.115 +02:00 [ERR] Unexpected error creating reservation for UserId: 0
System.Exception: User not found!
   at DineEasy.Application.Services.ReservationService.CreateAsync(CreateReservationDto dto) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 39
   at DineEasy.WebAPI.Controllers.ReservationsController.Create(CreateReservationDto dto) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.WebAPI/Controllers/ReservationsController.cs:line 123
2025-06-22 00:15:37.116 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 4.7702ms.
2025-06-22 00:15:37.116 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-06-22 00:15:37.116 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI) in 6.9759ms
2025-06-22 00:15:37.116 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI)'
2025-06-22 00:15:37.116 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5049/api/reservations - 500 null text/plain; charset=utf-8 10.091ms
2025-06-22 00:15:48.119 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5049/api/reservations - application/json; charset=utf-8 116
2025-06-22 00:15:48.119 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI)'
2025-06-22 00:15:48.119 +02:00 [INF] Route matched with {action = "Create", controller = "Reservations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[DineEasy.SharedKernel.Models.Reservation.ReservationDto]] Create(DineEasy.SharedKernel.Models.Reservation.CreateReservationDto) on controller DineEasy.WebAPI.Controllers.ReservationsController (DineEasy.WebAPI).
2025-06-22 00:15:48.120 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:15:48.120 +02:00 [INF] Creating new reservation for UserId: 0, TableId: 0
2025-06-22 00:15:48.120 +02:00 [INF] Creating new reservation - UserId: 0, TableId: 0, DateTime: "0001-01-01T00:00:00.0000000", Duration: 2, PartySize: 1
2025-06-22 00:15:48.121 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."Email", "u"."PasswordHash", "u"."Role", "u"."Username", "u0"."Id", "u0"."CreatedAt", "u0"."DateOfBirth", "u0"."FirstName", "u0"."LastName", "u0"."PhoneNumber", "u0"."UserId"
FROM "Users" AS "u"
LEFT JOIN "UserProfiles" AS "u0" ON "u"."Id" = "u0"."UserId"
WHERE "u"."Id" = @__id_0
LIMIT 1
2025-06-22 00:15:48.121 +02:00 [WRN] Reservation creation failed - User with ID 0 not found
2025-06-22 00:15:48.121 +02:00 [ERR] Unexpected error creating reservation for UserId: 0
System.Exception: User not found!
   at DineEasy.Application.Services.ReservationService.CreateAsync(CreateReservationDto dto) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 39
   at DineEasy.WebAPI.Controllers.ReservationsController.Create(CreateReservationDto dto) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.WebAPI/Controllers/ReservationsController.cs:line 123
2025-06-22 00:15:48.121 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 1.2426ms.
2025-06-22 00:15:48.121 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-06-22 00:15:48.121 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI) in 1.9081ms
2025-06-22 00:15:48.121 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI)'
2025-06-22 00:15:48.121 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5049/api/reservations - 500 null text/plain; charset=utf-8 2.8071ms
2025-06-22 00:15:48.522 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5049/api/reservations - application/json; charset=utf-8 116
2025-06-22 00:15:48.522 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI)'
2025-06-22 00:15:48.523 +02:00 [INF] Route matched with {action = "Create", controller = "Reservations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[DineEasy.SharedKernel.Models.Reservation.ReservationDto]] Create(DineEasy.SharedKernel.Models.Reservation.CreateReservationDto) on controller DineEasy.WebAPI.Controllers.ReservationsController (DineEasy.WebAPI).
2025-06-22 00:15:48.524 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:15:48.524 +02:00 [INF] Creating new reservation for UserId: 0, TableId: 0
2025-06-22 00:15:48.524 +02:00 [INF] Creating new reservation - UserId: 0, TableId: 0, DateTime: "0001-01-01T00:00:00.0000000", Duration: 2, PartySize: 1
2025-06-22 00:15:48.525 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."Email", "u"."PasswordHash", "u"."Role", "u"."Username", "u0"."Id", "u0"."CreatedAt", "u0"."DateOfBirth", "u0"."FirstName", "u0"."LastName", "u0"."PhoneNumber", "u0"."UserId"
FROM "Users" AS "u"
LEFT JOIN "UserProfiles" AS "u0" ON "u"."Id" = "u0"."UserId"
WHERE "u"."Id" = @__id_0
LIMIT 1
2025-06-22 00:15:48.525 +02:00 [WRN] Reservation creation failed - User with ID 0 not found
2025-06-22 00:15:48.526 +02:00 [ERR] Unexpected error creating reservation for UserId: 0
System.Exception: User not found!
   at DineEasy.Application.Services.ReservationService.CreateAsync(CreateReservationDto dto) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 39
   at DineEasy.WebAPI.Controllers.ReservationsController.Create(CreateReservationDto dto) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.WebAPI/Controllers/ReservationsController.cs:line 123
2025-06-22 00:15:48.526 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 2.4182ms.
2025-06-22 00:15:48.526 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-06-22 00:15:48.526 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI) in 3.8715ms
2025-06-22 00:15:48.526 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI)'
2025-06-22 00:15:48.527 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5049/api/reservations - 500 null text/plain; charset=utf-8 5.0768ms
2025-06-22 00:15:48.654 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5049/api/reservations - application/json; charset=utf-8 116
2025-06-22 00:15:48.655 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI)'
2025-06-22 00:15:48.655 +02:00 [INF] Route matched with {action = "Create", controller = "Reservations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[DineEasy.SharedKernel.Models.Reservation.ReservationDto]] Create(DineEasy.SharedKernel.Models.Reservation.CreateReservationDto) on controller DineEasy.WebAPI.Controllers.ReservationsController (DineEasy.WebAPI).
2025-06-22 00:15:48.656 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:15:48.656 +02:00 [INF] Creating new reservation for UserId: 0, TableId: 0
2025-06-22 00:15:48.656 +02:00 [INF] Creating new reservation - UserId: 0, TableId: 0, DateTime: "0001-01-01T00:00:00.0000000", Duration: 2, PartySize: 1
2025-06-22 00:15:48.658 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."Email", "u"."PasswordHash", "u"."Role", "u"."Username", "u0"."Id", "u0"."CreatedAt", "u0"."DateOfBirth", "u0"."FirstName", "u0"."LastName", "u0"."PhoneNumber", "u0"."UserId"
FROM "Users" AS "u"
LEFT JOIN "UserProfiles" AS "u0" ON "u"."Id" = "u0"."UserId"
WHERE "u"."Id" = @__id_0
LIMIT 1
2025-06-22 00:15:48.658 +02:00 [WRN] Reservation creation failed - User with ID 0 not found
2025-06-22 00:15:48.658 +02:00 [ERR] Unexpected error creating reservation for UserId: 0
System.Exception: User not found!
   at DineEasy.Application.Services.ReservationService.CreateAsync(CreateReservationDto dto) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 39
   at DineEasy.WebAPI.Controllers.ReservationsController.Create(CreateReservationDto dto) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.WebAPI/Controllers/ReservationsController.cs:line 123
2025-06-22 00:15:48.659 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 2.2792ms.
2025-06-22 00:15:48.659 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-06-22 00:15:48.659 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI) in 3.5294ms
2025-06-22 00:15:48.659 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI)'
2025-06-22 00:15:48.659 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5049/api/reservations - 500 null text/plain; charset=utf-8 5.114ms
2025-06-22 00:15:51.054 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5049/api/reservations - application/json; charset=utf-8 116
2025-06-22 00:15:51.055 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI)'
2025-06-22 00:15:51.055 +02:00 [INF] Route matched with {action = "Create", controller = "Reservations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[DineEasy.SharedKernel.Models.Reservation.ReservationDto]] Create(DineEasy.SharedKernel.Models.Reservation.CreateReservationDto) on controller DineEasy.WebAPI.Controllers.ReservationsController (DineEasy.WebAPI).
2025-06-22 00:15:51.056 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:15:51.056 +02:00 [INF] Creating new reservation for UserId: 0, TableId: 0
2025-06-22 00:15:51.056 +02:00 [INF] Creating new reservation - UserId: 0, TableId: 0, DateTime: "0001-01-01T00:00:00.0000000", Duration: 2, PartySize: 2
2025-06-22 00:15:51.057 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."Email", "u"."PasswordHash", "u"."Role", "u"."Username", "u0"."Id", "u0"."CreatedAt", "u0"."DateOfBirth", "u0"."FirstName", "u0"."LastName", "u0"."PhoneNumber", "u0"."UserId"
FROM "Users" AS "u"
LEFT JOIN "UserProfiles" AS "u0" ON "u"."Id" = "u0"."UserId"
WHERE "u"."Id" = @__id_0
LIMIT 1
2025-06-22 00:15:51.058 +02:00 [WRN] Reservation creation failed - User with ID 0 not found
2025-06-22 00:15:51.058 +02:00 [ERR] Unexpected error creating reservation for UserId: 0
System.Exception: User not found!
   at DineEasy.Application.Services.ReservationService.CreateAsync(CreateReservationDto dto) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 39
   at DineEasy.WebAPI.Controllers.ReservationsController.Create(CreateReservationDto dto) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.WebAPI/Controllers/ReservationsController.cs:line 123
2025-06-22 00:15:51.059 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 2.456ms.
2025-06-22 00:15:51.059 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-06-22 00:15:51.059 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI) in 3.9122ms
2025-06-22 00:15:51.059 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI)'
2025-06-22 00:15:51.059 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5049/api/reservations - 500 null text/plain; charset=utf-8 5.2625ms
2025-06-22 00:15:51.554 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5049/api/reservations - application/json; charset=utf-8 116
2025-06-22 00:15:51.555 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI)'
2025-06-22 00:15:51.555 +02:00 [INF] Route matched with {action = "Create", controller = "Reservations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[DineEasy.SharedKernel.Models.Reservation.ReservationDto]] Create(DineEasy.SharedKernel.Models.Reservation.CreateReservationDto) on controller DineEasy.WebAPI.Controllers.ReservationsController (DineEasy.WebAPI).
2025-06-22 00:15:51.556 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:15:51.556 +02:00 [INF] Creating new reservation for UserId: 0, TableId: 0
2025-06-22 00:15:51.556 +02:00 [INF] Creating new reservation - UserId: 0, TableId: 0, DateTime: "0001-01-01T00:00:00.0000000", Duration: 2, PartySize: 2
2025-06-22 00:15:51.557 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."Email", "u"."PasswordHash", "u"."Role", "u"."Username", "u0"."Id", "u0"."CreatedAt", "u0"."DateOfBirth", "u0"."FirstName", "u0"."LastName", "u0"."PhoneNumber", "u0"."UserId"
FROM "Users" AS "u"
LEFT JOIN "UserProfiles" AS "u0" ON "u"."Id" = "u0"."UserId"
WHERE "u"."Id" = @__id_0
LIMIT 1
2025-06-22 00:15:51.558 +02:00 [WRN] Reservation creation failed - User with ID 0 not found
2025-06-22 00:15:51.558 +02:00 [ERR] Unexpected error creating reservation for UserId: 0
System.Exception: User not found!
   at DineEasy.Application.Services.ReservationService.CreateAsync(CreateReservationDto dto) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 39
   at DineEasy.WebAPI.Controllers.ReservationsController.Create(CreateReservationDto dto) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.WebAPI/Controllers/ReservationsController.cs:line 123
2025-06-22 00:15:51.558 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 2.4555ms.
2025-06-22 00:15:51.558 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-06-22 00:15:51.559 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI) in 3.7062ms
2025-06-22 00:15:51.559 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI)'
2025-06-22 00:15:51.559 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5049/api/reservations - 500 null text/plain; charset=utf-8 4.8182ms
2025-06-22 00:15:52.936 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5049/api/reservations - application/json; charset=utf-8 116
2025-06-22 00:15:52.937 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI)'
2025-06-22 00:15:52.937 +02:00 [INF] Route matched with {action = "Create", controller = "Reservations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[DineEasy.SharedKernel.Models.Reservation.ReservationDto]] Create(DineEasy.SharedKernel.Models.Reservation.CreateReservationDto) on controller DineEasy.WebAPI.Controllers.ReservationsController (DineEasy.WebAPI).
2025-06-22 00:15:52.938 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:15:52.938 +02:00 [INF] Creating new reservation for UserId: 0, TableId: 0
2025-06-22 00:15:52.938 +02:00 [INF] Creating new reservation - UserId: 0, TableId: 0, DateTime: "0001-01-01T00:00:00.0000000", Duration: 2, PartySize: 3
2025-06-22 00:15:52.941 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."Email", "u"."PasswordHash", "u"."Role", "u"."Username", "u0"."Id", "u0"."CreatedAt", "u0"."DateOfBirth", "u0"."FirstName", "u0"."LastName", "u0"."PhoneNumber", "u0"."UserId"
FROM "Users" AS "u"
LEFT JOIN "UserProfiles" AS "u0" ON "u"."Id" = "u0"."UserId"
WHERE "u"."Id" = @__id_0
LIMIT 1
2025-06-22 00:15:52.941 +02:00 [WRN] Reservation creation failed - User with ID 0 not found
2025-06-22 00:15:52.942 +02:00 [ERR] Unexpected error creating reservation for UserId: 0
System.Exception: User not found!
   at DineEasy.Application.Services.ReservationService.CreateAsync(CreateReservationDto dto) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 39
   at DineEasy.WebAPI.Controllers.ReservationsController.Create(CreateReservationDto dto) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.WebAPI/Controllers/ReservationsController.cs:line 123
2025-06-22 00:15:52.942 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 3.8201ms.
2025-06-22 00:15:52.942 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-06-22 00:15:52.942 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI) in 5.0447ms
2025-06-22 00:15:52.942 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI)'
2025-06-22 00:15:52.942 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5049/api/reservations - 500 null text/plain; charset=utf-8 6.1405ms
2025-06-22 00:15:58.078 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5049/api/auth/login - application/json; charset=utf-8 null
2025-06-22 00:15:58.078 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI)'
2025-06-22 00:15:58.079 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[DineEasy.SharedKernel.Models.Auth.AuthResponseDto]] Login(DineEasy.SharedKernel.Models.Auth.LoginDto) on controller DineEasy.WebAPI.Controllers.AuthController (DineEasy.WebAPI).
2025-06-22 00:15:58.080 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:15:58.080 +02:00 [INF] Login attempt for email: admin@dineeasy.com
2025-06-22 00:15:58.080 +02:00 [INF] Login attempt for email: admin@dineeasy.com
2025-06-22 00:15:58.081 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__email_0='?' (Size = 18)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."Email", "u"."PasswordHash", "u"."Role", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."Email" = @__email_0
LIMIT 1
2025-06-22 00:15:58.263 +02:00 [INF] Successful login for user: admin123123
2025-06-22 00:15:58.263 +02:00 [INF] Successful login for user: admin123123
2025-06-22 00:15:58.263 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 183.6299ms.
2025-06-22 00:15:58.264 +02:00 [INF] Executing OkObjectResult, writing value of type 'DineEasy.SharedKernel.Models.Auth.AuthResponseDto'.
2025-06-22 00:15:58.264 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI) in 185.1539ms
2025-06-22 00:15:58.264 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI)'
2025-06-22 00:15:58.264 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5049/api/auth/login - 200 null application/json; charset=utf-8 185.7821ms
2025-06-22 00:16:00.434 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5049/api/reservations - null null
2025-06-22 00:16:00.435 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI)'
2025-06-22 00:16:00.435 +02:00 [INF] Route matched with {action = "GetAll", controller = "Reservations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[DineEasy.SharedKernel.Models.Reservation.ReservationDto]]] GetAll() on controller DineEasy.WebAPI.Controllers.ReservationsController (DineEasy.WebAPI).
2025-06-22 00:16:00.436 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:16:00.436 +02:00 [INF] Getting reservations for user: admin123123
2025-06-22 00:16:00.436 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 1
2025-06-22 00:16:00.436 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin123123
2025-06-22 00:16:00.436 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = admin@dineeasy.com
2025-06-22 00:16:00.436 +02:00 [INF] Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = Admin
2025-06-22 00:16:00.436 +02:00 [INF] Claim: exp = 1750630558
2025-06-22 00:16:00.436 +02:00 [INF] Claim: iss = DineEasy
2025-06-22 00:16:00.436 +02:00 [INF] Claim: aud = DineEasy-Users
2025-06-22 00:16:00.436 +02:00 [INF] User is Admin - returning all reservations
2025-06-22 00:16:00.436 +02:00 [INF] Retrieving all reservations
2025-06-22 00:16:00.438 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Id", "r"."CreatedAt", "r"."Duration", "r"."PartySize", "r"."ReservationDateTime", "r"."SpecialRequests", "r"."Status", "r"."TableId", "r"."UserId"
FROM "Reservations" AS "r"
2025-06-22 00:16:00.438 +02:00 [INF] Successfully retrieved 0 reservations
2025-06-22 00:16:00.438 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 2.22ms.
2025-06-22 00:16:00.438 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DineEasy.SharedKernel.Models.Reservation.ReservationDto, DineEasy.SharedKernel, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-22 00:16:00.439 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI) in 3.2019ms
2025-06-22 00:16:00.439 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI)'
2025-06-22 00:16:00.439 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5049/api/reservations - 200 null application/json; charset=utf-8 4.3085ms
2025-06-22 00:16:04.722 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5049/api/reservations - application/json; charset=utf-8 117
2025-06-22 00:16:04.723 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI)'
2025-06-22 00:16:04.723 +02:00 [INF] Route matched with {action = "Create", controller = "Reservations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[DineEasy.SharedKernel.Models.Reservation.ReservationDto]] Create(DineEasy.SharedKernel.Models.Reservation.CreateReservationDto) on controller DineEasy.WebAPI.Controllers.ReservationsController (DineEasy.WebAPI).
2025-06-22 00:16:04.724 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:16:04.724 +02:00 [INF] Creating new reservation for UserId: 0, TableId: 0
2025-06-22 00:16:04.724 +02:00 [INF] Creating new reservation - UserId: 0, TableId: 0, DateTime: "0001-01-01T00:00:00.0000000", Duration: 2, PartySize: 13
2025-06-22 00:16:04.725 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."Email", "u"."PasswordHash", "u"."Role", "u"."Username", "u0"."Id", "u0"."CreatedAt", "u0"."DateOfBirth", "u0"."FirstName", "u0"."LastName", "u0"."PhoneNumber", "u0"."UserId"
FROM "Users" AS "u"
LEFT JOIN "UserProfiles" AS "u0" ON "u"."Id" = "u0"."UserId"
WHERE "u"."Id" = @__id_0
LIMIT 1
2025-06-22 00:16:04.726 +02:00 [WRN] Reservation creation failed - User with ID 0 not found
2025-06-22 00:16:04.726 +02:00 [ERR] Unexpected error creating reservation for UserId: 0
System.Exception: User not found!
   at DineEasy.Application.Services.ReservationService.CreateAsync(CreateReservationDto dto) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 39
   at DineEasy.WebAPI.Controllers.ReservationsController.Create(CreateReservationDto dto) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.WebAPI/Controllers/ReservationsController.cs:line 123
2025-06-22 00:16:04.727 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 2.361ms.
2025-06-22 00:16:04.727 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-06-22 00:16:04.727 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI) in 3.5156ms
2025-06-22 00:16:04.727 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI)'
2025-06-22 00:16:04.727 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5049/api/reservations - 500 null text/plain; charset=utf-8 4.9909ms
2025-06-22 00:16:10.240 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5049/api/reservations - application/json; charset=utf-8 117
2025-06-22 00:16:10.241 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI)'
2025-06-22 00:16:10.241 +02:00 [INF] Route matched with {action = "Create", controller = "Reservations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[DineEasy.SharedKernel.Models.Reservation.ReservationDto]] Create(DineEasy.SharedKernel.Models.Reservation.CreateReservationDto) on controller DineEasy.WebAPI.Controllers.ReservationsController (DineEasy.WebAPI).
2025-06-22 00:16:10.242 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:16:10.242 +02:00 [INF] Creating new reservation for UserId: 0, TableId: 0
2025-06-22 00:16:10.242 +02:00 [INF] Creating new reservation - UserId: 0, TableId: 0, DateTime: "0001-01-01T00:00:00.0000000", Duration: 2, PartySize: 13
2025-06-22 00:16:10.243 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."Email", "u"."PasswordHash", "u"."Role", "u"."Username", "u0"."Id", "u0"."CreatedAt", "u0"."DateOfBirth", "u0"."FirstName", "u0"."LastName", "u0"."PhoneNumber", "u0"."UserId"
FROM "Users" AS "u"
LEFT JOIN "UserProfiles" AS "u0" ON "u"."Id" = "u0"."UserId"
WHERE "u"."Id" = @__id_0
LIMIT 1
2025-06-22 00:16:10.243 +02:00 [WRN] Reservation creation failed - User with ID 0 not found
2025-06-22 00:16:10.244 +02:00 [ERR] Unexpected error creating reservation for UserId: 0
System.Exception: User not found!
   at DineEasy.Application.Services.ReservationService.CreateAsync(CreateReservationDto dto) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 39
   at DineEasy.WebAPI.Controllers.ReservationsController.Create(CreateReservationDto dto) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.WebAPI/Controllers/ReservationsController.cs:line 123
2025-06-22 00:16:10.244 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 2.0562ms.
2025-06-22 00:16:10.244 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-06-22 00:16:10.244 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI) in 3.2511ms
2025-06-22 00:16:10.244 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI)'
2025-06-22 00:16:10.244 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5049/api/reservations - 500 null text/plain; charset=utf-8 4.3435ms
2025-06-22 00:16:10.637 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5049/api/reservations - application/json; charset=utf-8 117
2025-06-22 00:16:10.638 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI)'
2025-06-22 00:16:10.638 +02:00 [INF] Route matched with {action = "Create", controller = "Reservations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[DineEasy.SharedKernel.Models.Reservation.ReservationDto]] Create(DineEasy.SharedKernel.Models.Reservation.CreateReservationDto) on controller DineEasy.WebAPI.Controllers.ReservationsController (DineEasy.WebAPI).
2025-06-22 00:16:10.639 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:16:10.639 +02:00 [INF] Creating new reservation for UserId: 0, TableId: 0
2025-06-22 00:16:10.639 +02:00 [INF] Creating new reservation - UserId: 0, TableId: 0, DateTime: "0001-01-01T00:00:00.0000000", Duration: 2, PartySize: 13
2025-06-22 00:16:10.641 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."Email", "u"."PasswordHash", "u"."Role", "u"."Username", "u0"."Id", "u0"."CreatedAt", "u0"."DateOfBirth", "u0"."FirstName", "u0"."LastName", "u0"."PhoneNumber", "u0"."UserId"
FROM "Users" AS "u"
LEFT JOIN "UserProfiles" AS "u0" ON "u"."Id" = "u0"."UserId"
WHERE "u"."Id" = @__id_0
LIMIT 1
2025-06-22 00:16:10.642 +02:00 [WRN] Reservation creation failed - User with ID 0 not found
2025-06-22 00:16:10.642 +02:00 [ERR] Unexpected error creating reservation for UserId: 0
System.Exception: User not found!
   at DineEasy.Application.Services.ReservationService.CreateAsync(CreateReservationDto dto) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 39
   at DineEasy.WebAPI.Controllers.ReservationsController.Create(CreateReservationDto dto) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.WebAPI/Controllers/ReservationsController.cs:line 123
2025-06-22 00:16:10.642 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 2.9715ms.
2025-06-22 00:16:10.642 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-06-22 00:16:10.642 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI) in 4.3167ms
2025-06-22 00:16:10.643 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI)'
2025-06-22 00:16:10.643 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5049/api/reservations - 500 null text/plain; charset=utf-8 5.5159ms
2025-06-22 00:16:11.489 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5049/api/reservations - application/json; charset=utf-8 117
2025-06-22 00:16:11.490 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI)'
2025-06-22 00:16:11.490 +02:00 [INF] Route matched with {action = "Create", controller = "Reservations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[DineEasy.SharedKernel.Models.Reservation.ReservationDto]] Create(DineEasy.SharedKernel.Models.Reservation.CreateReservationDto) on controller DineEasy.WebAPI.Controllers.ReservationsController (DineEasy.WebAPI).
2025-06-22 00:16:11.491 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:16:11.491 +02:00 [INF] Creating new reservation for UserId: 0, TableId: 0
2025-06-22 00:16:11.491 +02:00 [INF] Creating new reservation - UserId: 0, TableId: 0, DateTime: "0001-01-01T00:00:00.0000000", Duration: 2, PartySize: 13
2025-06-22 00:16:11.493 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."Email", "u"."PasswordHash", "u"."Role", "u"."Username", "u0"."Id", "u0"."CreatedAt", "u0"."DateOfBirth", "u0"."FirstName", "u0"."LastName", "u0"."PhoneNumber", "u0"."UserId"
FROM "Users" AS "u"
LEFT JOIN "UserProfiles" AS "u0" ON "u"."Id" = "u0"."UserId"
WHERE "u"."Id" = @__id_0
LIMIT 1
2025-06-22 00:16:11.493 +02:00 [WRN] Reservation creation failed - User with ID 0 not found
2025-06-22 00:16:11.494 +02:00 [ERR] Unexpected error creating reservation for UserId: 0
System.Exception: User not found!
   at DineEasy.Application.Services.ReservationService.CreateAsync(CreateReservationDto dto) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 39
   at DineEasy.WebAPI.Controllers.ReservationsController.Create(CreateReservationDto dto) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.WebAPI/Controllers/ReservationsController.cs:line 123
2025-06-22 00:16:11.496 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 4.6362ms.
2025-06-22 00:16:11.496 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-06-22 00:16:11.497 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI) in 6.0857ms
2025-06-22 00:16:11.497 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI)'
2025-06-22 00:16:11.497 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5049/api/reservations - 500 null text/plain; charset=utf-8 7.8197ms
2025-06-22 00:16:11.601 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5049/api/reservations - application/json; charset=utf-8 117
2025-06-22 00:16:11.602 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI)'
2025-06-22 00:16:11.602 +02:00 [INF] Route matched with {action = "Create", controller = "Reservations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[DineEasy.SharedKernel.Models.Reservation.ReservationDto]] Create(DineEasy.SharedKernel.Models.Reservation.CreateReservationDto) on controller DineEasy.WebAPI.Controllers.ReservationsController (DineEasy.WebAPI).
2025-06-22 00:16:11.603 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:16:11.603 +02:00 [INF] Creating new reservation for UserId: 0, TableId: 0
2025-06-22 00:16:11.603 +02:00 [INF] Creating new reservation - UserId: 0, TableId: 0, DateTime: "0001-01-01T00:00:00.0000000", Duration: 2, PartySize: 13
2025-06-22 00:16:11.603 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."Email", "u"."PasswordHash", "u"."Role", "u"."Username", "u0"."Id", "u0"."CreatedAt", "u0"."DateOfBirth", "u0"."FirstName", "u0"."LastName", "u0"."PhoneNumber", "u0"."UserId"
FROM "Users" AS "u"
LEFT JOIN "UserProfiles" AS "u0" ON "u"."Id" = "u0"."UserId"
WHERE "u"."Id" = @__id_0
LIMIT 1
2025-06-22 00:16:11.604 +02:00 [WRN] Reservation creation failed - User with ID 0 not found
2025-06-22 00:16:11.604 +02:00 [ERR] Unexpected error creating reservation for UserId: 0
System.Exception: User not found!
   at DineEasy.Application.Services.ReservationService.CreateAsync(CreateReservationDto dto) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 39
   at DineEasy.WebAPI.Controllers.ReservationsController.Create(CreateReservationDto dto) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.WebAPI/Controllers/ReservationsController.cs:line 123
2025-06-22 00:16:11.604 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 1.1918ms.
2025-06-22 00:16:11.604 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-06-22 00:16:11.604 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI) in 2.0295ms
2025-06-22 00:16:11.604 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI)'
2025-06-22 00:16:11.604 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5049/api/reservations - 500 null text/plain; charset=utf-8 2.9265ms
2025-06-22 00:16:32.506 +02:00 [INF] Application is shutting down...
2025-06-22 00:18:16.619 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-22 00:18:16.652 +02:00 [INF] User profile is available. Using '/Users/jakubwalkowicz/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-06-22 00:18:16.676 +02:00 [INF] Now listening on: http://localhost:5049
2025-06-22 00:18:16.677 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-22 00:18:16.678 +02:00 [INF] Hosting environment: Development
2025-06-22 00:18:16.678 +02:00 [INF] Content root path: /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.WebAPI
2025-06-22 00:18:17.147 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5049/swagger/index.html - null null
2025-06-22 00:18:17.248 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5049/swagger/index.html - 200 null text/html;charset=utf-8 101.5256ms
2025-06-22 00:18:17.298 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5049/swagger/v1/swagger.json - null null
2025-06-22 00:18:17.399 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5049/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 101.6001ms
2025-06-22 00:18:34.315 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5049/api/auth/login - application/json; charset=utf-8 null
2025-06-22 00:18:34.321 +02:00 [WRN] Failed to determine the https port for redirect.
2025-06-22 00:18:34.345 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI)'
2025-06-22 00:18:34.356 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[DineEasy.SharedKernel.Models.Auth.AuthResponseDto]] Login(DineEasy.SharedKernel.Models.Auth.LoginDto) on controller DineEasy.WebAPI.Controllers.AuthController (DineEasy.WebAPI).
2025-06-22 00:18:34.384 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:18:34.385 +02:00 [INF] Login attempt for email: admin@dineeasy.com
2025-06-22 00:18:34.385 +02:00 [INF] Login attempt for email: admin@dineeasy.com
2025-06-22 00:18:34.555 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__email_0='?' (Size = 18)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."Email", "u"."PasswordHash", "u"."Role", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."Email" = @__email_0
LIMIT 1
2025-06-22 00:18:34.742 +02:00 [INF] Successful login for user: admin123123
2025-06-22 00:18:34.742 +02:00 [INF] Successful login for user: admin123123
2025-06-22 00:18:34.744 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 358.3685ms.
2025-06-22 00:18:34.747 +02:00 [INF] Executing OkObjectResult, writing value of type 'DineEasy.SharedKernel.Models.Auth.AuthResponseDto'.
2025-06-22 00:18:34.755 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI) in 397.4704ms
2025-06-22 00:18:34.755 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI)'
2025-06-22 00:18:34.756 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5049/api/auth/login - 200 null application/json; charset=utf-8 440.8791ms
2025-06-22 00:18:36.385 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5049/api/reservations - null null
2025-06-22 00:18:36.445 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI)'
2025-06-22 00:18:36.447 +02:00 [INF] Route matched with {action = "GetAll", controller = "Reservations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[DineEasy.SharedKernel.Models.Reservation.ReservationDto]]] GetAll() on controller DineEasy.WebAPI.Controllers.ReservationsController (DineEasy.WebAPI).
2025-06-22 00:18:36.447 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:18:36.449 +02:00 [INF] Getting reservations for user: admin123123
2025-06-22 00:18:36.449 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 1
2025-06-22 00:18:36.449 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin123123
2025-06-22 00:18:36.449 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = admin@dineeasy.com
2025-06-22 00:18:36.449 +02:00 [INF] Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = Admin
2025-06-22 00:18:36.449 +02:00 [INF] Claim: exp = 1750630714
2025-06-22 00:18:36.449 +02:00 [INF] Claim: iss = DineEasy
2025-06-22 00:18:36.449 +02:00 [INF] Claim: aud = DineEasy-Users
2025-06-22 00:18:36.449 +02:00 [INF] User is Admin - returning all reservations
2025-06-22 00:18:36.450 +02:00 [INF] Retrieving all reservations
2025-06-22 00:18:36.478 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Id", "r"."CreatedAt", "r"."Duration", "r"."PartySize", "r"."ReservationDateTime", "r"."SpecialRequests", "r"."Status", "r"."TableId", "r"."UserId"
FROM "Reservations" AS "r"
2025-06-22 00:18:36.479 +02:00 [INF] Successfully retrieved 0 reservations
2025-06-22 00:18:36.479 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 31.6224ms.
2025-06-22 00:18:36.479 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DineEasy.SharedKernel.Models.Reservation.ReservationDto, DineEasy.SharedKernel, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-22 00:18:36.485 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI) in 38.4235ms
2025-06-22 00:18:36.485 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI)'
2025-06-22 00:18:36.485 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5049/api/reservations - 200 null application/json; charset=utf-8 100.7039ms
2025-06-22 00:18:38.656 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5049/api/reservations - application/json; charset=utf-8 117
2025-06-22 00:18:38.660 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI)'
2025-06-22 00:18:38.662 +02:00 [INF] Route matched with {action = "Create", controller = "Reservations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[DineEasy.SharedKernel.Models.Reservation.ReservationDto]] Create(DineEasy.SharedKernel.Models.Reservation.CreateReservationDto) on controller DineEasy.WebAPI.Controllers.ReservationsController (DineEasy.WebAPI).
2025-06-22 00:18:38.671 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:18:38.672 +02:00 [INF] Creating new reservation for UserId: 1, TableId: 0
2025-06-22 00:18:38.674 +02:00 [INF] Creating new reservation - UserId: 1, TableId: 0, DateTime: "0001-01-01T00:00:00.0000000", Duration: 2, PartySize: 12
2025-06-22 00:18:38.709 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."Email", "u"."PasswordHash", "u"."Role", "u"."Username", "u0"."Id", "u0"."CreatedAt", "u0"."DateOfBirth", "u0"."FirstName", "u0"."LastName", "u0"."PhoneNumber", "u0"."UserId"
FROM "Users" AS "u"
LEFT JOIN "UserProfiles" AS "u0" ON "u"."Id" = "u0"."UserId"
WHERE "u"."Id" = @__id_0
LIMIT 1
2025-06-22 00:18:38.732 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Capacity", "t"."IsActive", "t"."TableNumber"
FROM "Tables" AS "t"
WHERE "t"."Id" = @__p_0
LIMIT 1
2025-06-22 00:18:38.732 +02:00 [WRN] Reservation creation failed - Table with ID 0 not found
2025-06-22 00:18:38.734 +02:00 [ERR] Unexpected error creating reservation for UserId: 1
System.Exception: Table with ID 0 not found
   at DineEasy.Application.Services.ReservationService.CreateAsync(CreateReservationDto dto) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 48
   at DineEasy.WebAPI.Controllers.ReservationsController.Create(CreateReservationDto dto) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.WebAPI/Controllers/ReservationsController.cs:line 132
2025-06-22 00:18:38.746 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 74.7727ms.
2025-06-22 00:18:38.746 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-06-22 00:18:38.746 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI) in 84.0887ms
2025-06-22 00:18:38.747 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI)'
2025-06-22 00:18:38.747 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5049/api/reservations - 500 null text/plain; charset=utf-8 90.4059ms
2025-06-22 00:18:43.358 +02:00 [INF] Application is shutting down...
2025-06-22 00:19:20.922 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-22 00:19:20.953 +02:00 [INF] User profile is available. Using '/Users/jakubwalkowicz/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-06-22 00:19:20.977 +02:00 [INF] Now listening on: http://localhost:5049
2025-06-22 00:19:20.978 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-22 00:19:20.978 +02:00 [INF] Hosting environment: Development
2025-06-22 00:19:20.978 +02:00 [INF] Content root path: /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.WebAPI
2025-06-22 00:19:21.395 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5049/swagger/index.html - null null
2025-06-22 00:19:21.484 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5049/swagger/index.html - 200 null text/html;charset=utf-8 90.2486ms
2025-06-22 00:19:21.528 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5049/swagger/v1/swagger.json - null null
2025-06-22 00:19:21.619 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5049/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 90.9736ms
2025-06-22 00:19:25.759 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5049/api/reservations - application/json; charset=utf-8 117
2025-06-22 00:19:25.768 +02:00 [WRN] Failed to determine the https port for redirect.
2025-06-22 00:19:25.853 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI)'
2025-06-22 00:19:25.864 +02:00 [INF] Route matched with {action = "Create", controller = "Reservations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[DineEasy.SharedKernel.Models.Reservation.ReservationDto]] Create(DineEasy.SharedKernel.Models.Reservation.CreateReservationDto) on controller DineEasy.WebAPI.Controllers.ReservationsController (DineEasy.WebAPI).
2025-06-22 00:19:25.896 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:19:25.897 +02:00 [INF] Creating new reservation for UserId: 1, TableId: 1
2025-06-22 00:19:25.899 +02:00 [INF] Creating new reservation - UserId: 1, TableId: 1, DateTime: "0001-01-01T00:00:00.0000000", Duration: 2, PartySize: 12
2025-06-22 00:19:26.093 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."Email", "u"."PasswordHash", "u"."Role", "u"."Username", "u0"."Id", "u0"."CreatedAt", "u0"."DateOfBirth", "u0"."FirstName", "u0"."LastName", "u0"."PhoneNumber", "u0"."UserId"
FROM "Users" AS "u"
LEFT JOIN "UserProfiles" AS "u0" ON "u"."Id" = "u0"."UserId"
WHERE "u"."Id" = @__id_0
LIMIT 1
2025-06-22 00:19:26.148 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Capacity", "t"."IsActive", "t"."TableNumber"
FROM "Tables" AS "t"
WHERE "t"."Id" = @__p_0
LIMIT 1
2025-06-22 00:19:26.158 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__dayOfWeek_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."DayOfWeek", "t"."EndTime", "t"."StartTime"
FROM "TimeSlots" AS "t"
WHERE "t"."DayOfWeek" = @__dayOfWeek_0
LIMIT 1
2025-06-22 00:19:26.163 +02:00 [WRN] Reservation creation failed - Requested time "00:00:00.0000000"-"02:00:00.0000000" falls outside available slot "18:00:00.0000000"-"19:00:00.0000000" on "Monday"
2025-06-22 00:19:26.164 +02:00 [ERR] Unexpected error creating reservation for UserId: 1
DineEasy.Application.Exceptions.ReservationHoursOutOfBoundException: Reservation falls out of available time slot!
   at DineEasy.Application.Services.ReservationService.CreateAsync(CreateReservationDto dto) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 83
   at DineEasy.WebAPI.Controllers.ReservationsController.Create(CreateReservationDto dto) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.WebAPI/Controllers/ReservationsController.cs:line 132
2025-06-22 00:19:26.176 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 277.573ms.
2025-06-22 00:19:26.179 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-06-22 00:19:26.181 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI) in 315.3255ms
2025-06-22 00:19:26.181 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI)'
2025-06-22 00:19:26.182 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5049/api/reservations - 500 null text/plain; charset=utf-8 422.4045ms
2025-06-22 00:19:33.266 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5049/api/reservations - null null
2025-06-22 00:19:33.269 +02:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin|User)
2025-06-22 00:19:33.276 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-06-22 00:19:33.277 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5049/api/reservations - 401 0 null 10.4298ms
2025-06-22 00:19:34.442 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5049/api/reservations - null null
2025-06-22 00:19:34.445 +02:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin|User)
2025-06-22 00:19:34.445 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-06-22 00:19:34.446 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5049/api/reservations - 401 0 null 4.1979ms
2025-06-22 00:19:45.925 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5049/api/auth/login - application/json; charset=utf-8 null
2025-06-22 00:19:45.926 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI)'
2025-06-22 00:19:45.929 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[DineEasy.SharedKernel.Models.Auth.AuthResponseDto]] Login(DineEasy.SharedKernel.Models.Auth.LoginDto) on controller DineEasy.WebAPI.Controllers.AuthController (DineEasy.WebAPI).
2025-06-22 00:19:45.938 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:19:45.939 +02:00 [INF] Login attempt for email: admin@dineeasy.com
2025-06-22 00:19:45.939 +02:00 [INF] Login attempt for email: admin@dineeasy.com
2025-06-22 00:19:45.965 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__email_0='?' (Size = 18)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."Email", "u"."PasswordHash", "u"."Role", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."Email" = @__email_0
LIMIT 1
2025-06-22 00:19:46.107 +02:00 [WRN] Failed login attempt for email: admin@dineeasy.com
2025-06-22 00:19:46.107 +02:00 [WRN] Failed login attempt for email: admin@dineeasy.com
2025-06-22 00:19:46.107 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.UnauthorizedObjectResult in 169.5857ms.
2025-06-22 00:19:46.108 +02:00 [INF] Executing UnauthorizedObjectResult, writing value of type 'System.String'.
2025-06-22 00:19:46.108 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI) in 179.1102ms
2025-06-22 00:19:46.108 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI)'
2025-06-22 00:19:46.108 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5049/api/auth/login - 401 null text/plain; charset=utf-8 182.6521ms
2025-06-22 00:19:47.931 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5049/api/auth/login - application/json; charset=utf-8 null
2025-06-22 00:19:47.932 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI)'
2025-06-22 00:19:47.932 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[DineEasy.SharedKernel.Models.Auth.AuthResponseDto]] Login(DineEasy.SharedKernel.Models.Auth.LoginDto) on controller DineEasy.WebAPI.Controllers.AuthController (DineEasy.WebAPI).
2025-06-22 00:19:47.934 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:19:47.934 +02:00 [INF] Login attempt for email: admin@dineeasy.com
2025-06-22 00:19:47.934 +02:00 [INF] Login attempt for email: admin@dineeasy.com
2025-06-22 00:19:47.941 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__email_0='?' (Size = 18)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."Email", "u"."PasswordHash", "u"."Role", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."Email" = @__email_0
LIMIT 1
2025-06-22 00:19:48.113 +02:00 [INF] Successful login for user: admin123123
2025-06-22 00:19:48.113 +02:00 [INF] Successful login for user: admin123123
2025-06-22 00:19:48.113 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 179.341ms.
2025-06-22 00:19:48.113 +02:00 [INF] Executing OkObjectResult, writing value of type 'DineEasy.SharedKernel.Models.Auth.AuthResponseDto'.
2025-06-22 00:19:48.118 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI) in 186.0185ms
2025-06-22 00:19:48.118 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI)'
2025-06-22 00:19:48.118 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5049/api/auth/login - 200 null application/json; charset=utf-8 187.775ms
2025-06-22 00:19:49.408 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5049/api/reservations - null null
2025-06-22 00:19:49.409 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI)'
2025-06-22 00:19:49.411 +02:00 [INF] Route matched with {action = "GetAll", controller = "Reservations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[DineEasy.SharedKernel.Models.Reservation.ReservationDto]]] GetAll() on controller DineEasy.WebAPI.Controllers.ReservationsController (DineEasy.WebAPI).
2025-06-22 00:19:49.411 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:19:49.413 +02:00 [INF] Getting reservations for user: admin123123
2025-06-22 00:19:49.413 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 1
2025-06-22 00:19:49.413 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin123123
2025-06-22 00:19:49.413 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = admin@dineeasy.com
2025-06-22 00:19:49.413 +02:00 [INF] Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = Admin
2025-06-22 00:19:49.413 +02:00 [INF] Claim: exp = 1750630788
2025-06-22 00:19:49.413 +02:00 [INF] Claim: iss = DineEasy
2025-06-22 00:19:49.413 +02:00 [INF] Claim: aud = DineEasy-Users
2025-06-22 00:19:49.413 +02:00 [INF] User is Admin - returning all reservations
2025-06-22 00:19:49.414 +02:00 [INF] Retrieving all reservations
2025-06-22 00:19:49.419 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Id", "r"."CreatedAt", "r"."Duration", "r"."PartySize", "r"."ReservationDateTime", "r"."SpecialRequests", "r"."Status", "r"."TableId", "r"."UserId"
FROM "Reservations" AS "r"
2025-06-22 00:19:49.420 +02:00 [INF] Successfully retrieved 0 reservations
2025-06-22 00:19:49.420 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 8.4767ms.
2025-06-22 00:19:49.420 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DineEasy.SharedKernel.Models.Reservation.ReservationDto, DineEasy.SharedKernel, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-22 00:19:49.425 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI) in 14.2641ms
2025-06-22 00:19:49.425 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI)'
2025-06-22 00:19:49.425 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5049/api/reservations - 200 null application/json; charset=utf-8 17.0939ms
2025-06-22 00:19:53.074 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5049/api/reservations - application/json; charset=utf-8 116
2025-06-22 00:19:53.075 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI)'
2025-06-22 00:19:53.076 +02:00 [INF] Route matched with {action = "Create", controller = "Reservations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[DineEasy.SharedKernel.Models.Reservation.ReservationDto]] Create(DineEasy.SharedKernel.Models.Reservation.CreateReservationDto) on controller DineEasy.WebAPI.Controllers.ReservationsController (DineEasy.WebAPI).
2025-06-22 00:19:53.082 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:19:53.082 +02:00 [INF] Creating new reservation for UserId: 1, TableId: 1
2025-06-22 00:19:53.082 +02:00 [INF] Creating new reservation - UserId: 1, TableId: 1, DateTime: "0001-01-01T00:00:00.0000000", Duration: 2, PartySize: 1
2025-06-22 00:19:53.084 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."Email", "u"."PasswordHash", "u"."Role", "u"."Username", "u0"."Id", "u0"."CreatedAt", "u0"."DateOfBirth", "u0"."FirstName", "u0"."LastName", "u0"."PhoneNumber", "u0"."UserId"
FROM "Users" AS "u"
LEFT JOIN "UserProfiles" AS "u0" ON "u"."Id" = "u0"."UserId"
WHERE "u"."Id" = @__id_0
LIMIT 1
2025-06-22 00:19:53.088 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Capacity", "t"."IsActive", "t"."TableNumber"
FROM "Tables" AS "t"
WHERE "t"."Id" = @__p_0
LIMIT 1
2025-06-22 00:19:53.089 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__dayOfWeek_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."DayOfWeek", "t"."EndTime", "t"."StartTime"
FROM "TimeSlots" AS "t"
WHERE "t"."DayOfWeek" = @__dayOfWeek_0
LIMIT 1
2025-06-22 00:19:53.089 +02:00 [WRN] Reservation creation failed - Requested time "00:00:00.0000000"-"02:00:00.0000000" falls outside available slot "18:00:00.0000000"-"19:00:00.0000000" on "Monday"
2025-06-22 00:19:53.090 +02:00 [ERR] Unexpected error creating reservation for UserId: 1
DineEasy.Application.Exceptions.ReservationHoursOutOfBoundException: Reservation falls out of available time slot!
   at DineEasy.Application.Services.ReservationService.CreateAsync(CreateReservationDto dto) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 83
   at DineEasy.WebAPI.Controllers.ReservationsController.Create(CreateReservationDto dto) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.WebAPI/Controllers/ReservationsController.cs:line 132
2025-06-22 00:19:53.091 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 8.6076ms.
2025-06-22 00:19:53.091 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-06-22 00:19:53.091 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI) in 15.4936ms
2025-06-22 00:19:53.091 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI)'
2025-06-22 00:19:53.091 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5049/api/reservations - 500 null text/plain; charset=utf-8 16.8852ms
2025-06-22 00:20:22.614 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5049/api/reservations - application/json; charset=utf-8 116
2025-06-22 00:20:22.615 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI)'
2025-06-22 00:20:22.615 +02:00 [INF] Route matched with {action = "Create", controller = "Reservations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[DineEasy.SharedKernel.Models.Reservation.ReservationDto]] Create(DineEasy.SharedKernel.Models.Reservation.CreateReservationDto) on controller DineEasy.WebAPI.Controllers.ReservationsController (DineEasy.WebAPI).
2025-06-22 00:20:22.616 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:20:22.616 +02:00 [INF] Creating new reservation for UserId: 1, TableId: 1
2025-06-22 00:20:22.616 +02:00 [INF] Creating new reservation - UserId: 1, TableId: 1, DateTime: "2025-06-23T12:00:00.0000000", Duration: 2, PartySize: 1
2025-06-22 00:20:22.618 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."Email", "u"."PasswordHash", "u"."Role", "u"."Username", "u0"."Id", "u0"."CreatedAt", "u0"."DateOfBirth", "u0"."FirstName", "u0"."LastName", "u0"."PhoneNumber", "u0"."UserId"
FROM "Users" AS "u"
LEFT JOIN "UserProfiles" AS "u0" ON "u"."Id" = "u0"."UserId"
WHERE "u"."Id" = @__id_0
LIMIT 1
2025-06-22 00:20:22.619 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Capacity", "t"."IsActive", "t"."TableNumber"
FROM "Tables" AS "t"
WHERE "t"."Id" = @__p_0
LIMIT 1
2025-06-22 00:20:22.621 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__dayOfWeek_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."DayOfWeek", "t"."EndTime", "t"."StartTime"
FROM "TimeSlots" AS "t"
WHERE "t"."DayOfWeek" = @__dayOfWeek_0
LIMIT 1
2025-06-22 00:20:22.621 +02:00 [WRN] Reservation creation failed - Requested time "12:00:00.0000000"-"14:00:00.0000000" falls outside available slot "18:00:00.0000000"-"19:00:00.0000000" on "Monday"
2025-06-22 00:20:22.622 +02:00 [ERR] Unexpected error creating reservation for UserId: 1
DineEasy.Application.Exceptions.ReservationHoursOutOfBoundException: Reservation falls out of available time slot!
   at DineEasy.Application.Services.ReservationService.CreateAsync(CreateReservationDto dto) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 83
   at DineEasy.WebAPI.Controllers.ReservationsController.Create(CreateReservationDto dto) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.WebAPI/Controllers/ReservationsController.cs:line 132
2025-06-22 00:20:22.623 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 6.563ms.
2025-06-22 00:20:22.623 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-06-22 00:20:22.623 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI) in 8.1576ms
2025-06-22 00:20:22.623 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI)'
2025-06-22 00:20:22.624 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5049/api/reservations - 500 null text/plain; charset=utf-8 9.3753ms
2025-06-22 00:21:07.378 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5049/api/reservations - application/json; charset=utf-8 116
2025-06-22 00:21:07.379 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI)'
2025-06-22 00:21:07.379 +02:00 [INF] Route matched with {action = "Create", controller = "Reservations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[DineEasy.SharedKernel.Models.Reservation.ReservationDto]] Create(DineEasy.SharedKernel.Models.Reservation.CreateReservationDto) on controller DineEasy.WebAPI.Controllers.ReservationsController (DineEasy.WebAPI).
2025-06-22 00:21:07.380 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:21:07.380 +02:00 [INF] Creating new reservation for UserId: 1, TableId: 1
2025-06-22 00:21:07.380 +02:00 [INF] Creating new reservation - UserId: 1, TableId: 1, DateTime: "2025-06-23T18:00:00.0000000", Duration: 1, PartySize: 1
2025-06-22 00:21:07.381 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."Email", "u"."PasswordHash", "u"."Role", "u"."Username", "u0"."Id", "u0"."CreatedAt", "u0"."DateOfBirth", "u0"."FirstName", "u0"."LastName", "u0"."PhoneNumber", "u0"."UserId"
FROM "Users" AS "u"
LEFT JOIN "UserProfiles" AS "u0" ON "u"."Id" = "u0"."UserId"
WHERE "u"."Id" = @__id_0
LIMIT 1
2025-06-22 00:21:07.382 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Capacity", "t"."IsActive", "t"."TableNumber"
FROM "Tables" AS "t"
WHERE "t"."Id" = @__p_0
LIMIT 1
2025-06-22 00:21:07.383 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__dayOfWeek_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."DayOfWeek", "t"."EndTime", "t"."StartTime"
FROM "TimeSlots" AS "t"
WHERE "t"."DayOfWeek" = @__dayOfWeek_0
LIMIT 1
2025-06-22 00:21:07.434 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__tabelId_0='?' (DbType = Int32), @__dateTime_1='?' (DbType = DateTime), @__newReservationEnd_2='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Reservations" AS "r"
    WHERE "r"."TableId" = @__tabelId_0 AND "r"."Status" NOT IN ('Cancelled', 'Completed') AND @__dateTime_1 < rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', "r"."ReservationDateTime", CAST(CAST("r"."Duration" AS REAL) AS TEXT) || ' hours'), '0'), '.') AND @__newReservationEnd_2 > "r"."ReservationDateTime")
2025-06-22 00:21:07.531 +02:00 [ERR] Failed executing DbCommand (2ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Reservations" ("CreatedAt", "Duration", "PartySize", "ReservationDateTime", "SpecialRequests", "Status", "TableId", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7)
RETURNING "Id";
2025-06-22 00:21:07.537 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'DineEasy.Infrastructure.Data.DineEasyDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'FOREIGN KEY constraint failed'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'FOREIGN KEY constraint failed'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-06-22 00:21:07.538 +02:00 [ERR] Unexpected error creating reservation for UserId: 1
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'FOREIGN KEY constraint failed'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at DineEasy.Infrastructure.Repositories.UnitOfWork.SaveChangesAsync() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Infrastructure/Repositories/UnitOfWork.cs:line 30
   at DineEasy.Application.Services.ReservationService.CreateAsync(CreateReservationDto dto) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 105
   at DineEasy.WebAPI.Controllers.ReservationsController.Create(CreateReservationDto dto) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.WebAPI/Controllers/ReservationsController.cs:line 132
2025-06-22 00:21:07.539 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 159.369ms.
2025-06-22 00:21:07.539 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-06-22 00:21:07.539 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI) in 160.5135ms
2025-06-22 00:21:07.539 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI)'
2025-06-22 00:21:07.539 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5049/api/reservations - 500 null text/plain; charset=utf-8 161.5166ms
2025-06-22 00:21:08.344 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5049/api/reservations - application/json; charset=utf-8 116
2025-06-22 00:21:08.344 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI)'
2025-06-22 00:21:08.345 +02:00 [INF] Route matched with {action = "Create", controller = "Reservations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[DineEasy.SharedKernel.Models.Reservation.ReservationDto]] Create(DineEasy.SharedKernel.Models.Reservation.CreateReservationDto) on controller DineEasy.WebAPI.Controllers.ReservationsController (DineEasy.WebAPI).
2025-06-22 00:21:08.345 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:21:08.345 +02:00 [INF] Creating new reservation for UserId: 1, TableId: 1
2025-06-22 00:21:08.345 +02:00 [INF] Creating new reservation - UserId: 1, TableId: 1, DateTime: "2025-06-23T18:00:00.0000000", Duration: 1, PartySize: 1
2025-06-22 00:21:08.346 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."Email", "u"."PasswordHash", "u"."Role", "u"."Username", "u0"."Id", "u0"."CreatedAt", "u0"."DateOfBirth", "u0"."FirstName", "u0"."LastName", "u0"."PhoneNumber", "u0"."UserId"
FROM "Users" AS "u"
LEFT JOIN "UserProfiles" AS "u0" ON "u"."Id" = "u0"."UserId"
WHERE "u"."Id" = @__id_0
LIMIT 1
2025-06-22 00:21:08.346 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Capacity", "t"."IsActive", "t"."TableNumber"
FROM "Tables" AS "t"
WHERE "t"."Id" = @__p_0
LIMIT 1
2025-06-22 00:21:08.347 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__dayOfWeek_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."DayOfWeek", "t"."EndTime", "t"."StartTime"
FROM "TimeSlots" AS "t"
WHERE "t"."DayOfWeek" = @__dayOfWeek_0
LIMIT 1
2025-06-22 00:21:08.347 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__tabelId_0='?' (DbType = Int32), @__dateTime_1='?' (DbType = DateTime), @__newReservationEnd_2='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Reservations" AS "r"
    WHERE "r"."TableId" = @__tabelId_0 AND "r"."Status" NOT IN ('Cancelled', 'Completed') AND @__dateTime_1 < rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', "r"."ReservationDateTime", CAST(CAST("r"."Duration" AS REAL) AS TEXT) || ' hours'), '0'), '.') AND @__newReservationEnd_2 > "r"."ReservationDateTime")
2025-06-22 00:21:08.350 +02:00 [ERR] Failed executing DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Reservations" ("CreatedAt", "Duration", "PartySize", "ReservationDateTime", "SpecialRequests", "Status", "TableId", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7)
RETURNING "Id";
2025-06-22 00:21:08.350 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'DineEasy.Infrastructure.Data.DineEasyDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'FOREIGN KEY constraint failed'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'FOREIGN KEY constraint failed'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-06-22 00:21:08.351 +02:00 [ERR] Unexpected error creating reservation for UserId: 1
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'FOREIGN KEY constraint failed'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at DineEasy.Infrastructure.Repositories.UnitOfWork.SaveChangesAsync() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Infrastructure/Repositories/UnitOfWork.cs:line 30
   at DineEasy.Application.Services.ReservationService.CreateAsync(CreateReservationDto dto) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 105
   at DineEasy.WebAPI.Controllers.ReservationsController.Create(CreateReservationDto dto) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.WebAPI/Controllers/ReservationsController.cs:line 132
2025-06-22 00:21:08.352 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 6.8827ms.
2025-06-22 00:21:08.352 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-06-22 00:21:08.352 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI) in 7.4707ms
2025-06-22 00:21:08.352 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI)'
2025-06-22 00:21:08.352 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5049/api/reservations - 500 null text/plain; charset=utf-8 8.2513ms
2025-06-22 00:22:26.868 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5049/api/auth/login - application/json; charset=utf-8 null
2025-06-22 00:22:26.868 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI)'
2025-06-22 00:22:26.869 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[DineEasy.SharedKernel.Models.Auth.AuthResponseDto]] Login(DineEasy.SharedKernel.Models.Auth.LoginDto) on controller DineEasy.WebAPI.Controllers.AuthController (DineEasy.WebAPI).
2025-06-22 00:22:26.870 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:22:26.870 +02:00 [INF] Login attempt for email: admin@dineeasy.com
2025-06-22 00:22:26.870 +02:00 [INF] Login attempt for email: admin@dineeasy.com
2025-06-22 00:22:26.871 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__email_0='?' (Size = 18)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."Email", "u"."PasswordHash", "u"."Role", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."Email" = @__email_0
LIMIT 1
2025-06-22 00:22:27.019 +02:00 [INF] Successful login for user: admin123123
2025-06-22 00:22:27.019 +02:00 [INF] Successful login for user: admin123123
2025-06-22 00:22:27.019 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 149.1047ms.
2025-06-22 00:22:27.019 +02:00 [INF] Executing OkObjectResult, writing value of type 'DineEasy.SharedKernel.Models.Auth.AuthResponseDto'.
2025-06-22 00:22:27.019 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI) in 150.635ms
2025-06-22 00:22:27.019 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI)'
2025-06-22 00:22:27.019 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5049/api/auth/login - 200 null application/json; charset=utf-8 151.4405ms
2025-06-22 00:25:00.412 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5049/api/auth/login - application/json; charset=utf-8 null
2025-06-22 00:25:00.413 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI)'
2025-06-22 00:25:00.413 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[DineEasy.SharedKernel.Models.Auth.AuthResponseDto]] Login(DineEasy.SharedKernel.Models.Auth.LoginDto) on controller DineEasy.WebAPI.Controllers.AuthController (DineEasy.WebAPI).
2025-06-22 00:25:00.414 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:25:00.414 +02:00 [INF] Login attempt for email: admin@dineeasy.com
2025-06-22 00:25:00.414 +02:00 [INF] Login attempt for email: admin@dineeasy.com
2025-06-22 00:25:00.415 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__email_0='?' (Size = 18)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."Email", "u"."PasswordHash", "u"."Role", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."Email" = @__email_0
LIMIT 1
2025-06-22 00:25:00.564 +02:00 [INF] Successful login for user: admin123123
2025-06-22 00:25:00.564 +02:00 [INF] Successful login for user: admin123123
2025-06-22 00:25:00.564 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 150.5095ms.
2025-06-22 00:25:00.564 +02:00 [INF] Executing OkObjectResult, writing value of type 'DineEasy.SharedKernel.Models.Auth.AuthResponseDto'.
2025-06-22 00:25:00.564 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI) in 151.2484ms
2025-06-22 00:25:00.564 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI)'
2025-06-22 00:25:00.565 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5049/api/auth/login - 200 null application/json; charset=utf-8 152.3747ms
2025-06-22 00:25:04.184 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5049/api/reservations - null null
2025-06-22 00:25:04.185 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI)'
2025-06-22 00:25:04.185 +02:00 [INF] Route matched with {action = "GetAll", controller = "Reservations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[DineEasy.SharedKernel.Models.Reservation.ReservationDto]]] GetAll() on controller DineEasy.WebAPI.Controllers.ReservationsController (DineEasy.WebAPI).
2025-06-22 00:25:04.185 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:25:04.185 +02:00 [INF] Getting reservations for user: admin123123
2025-06-22 00:25:04.186 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 1
2025-06-22 00:25:04.186 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin123123
2025-06-22 00:25:04.186 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = admin@dineeasy.com
2025-06-22 00:25:04.186 +02:00 [INF] Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = Admin
2025-06-22 00:25:04.186 +02:00 [INF] Claim: exp = 1750631100
2025-06-22 00:25:04.186 +02:00 [INF] Claim: iss = DineEasy
2025-06-22 00:25:04.186 +02:00 [INF] Claim: aud = DineEasy-Users
2025-06-22 00:25:04.186 +02:00 [INF] User is Admin - returning all reservations
2025-06-22 00:25:04.186 +02:00 [INF] Retrieving all reservations
2025-06-22 00:25:04.186 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Id", "r"."CreatedAt", "r"."Duration", "r"."PartySize", "r"."ReservationDateTime", "r"."SpecialRequests", "r"."Status", "r"."TableId", "r"."UserId"
FROM "Reservations" AS "r"
2025-06-22 00:25:04.187 +02:00 [INF] Successfully retrieved 0 reservations
2025-06-22 00:25:04.187 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1.3251ms.
2025-06-22 00:25:04.187 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DineEasy.SharedKernel.Models.Reservation.ReservationDto, DineEasy.SharedKernel, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-22 00:25:04.187 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI) in 1.9352ms
2025-06-22 00:25:04.187 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI)'
2025-06-22 00:25:04.187 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5049/api/reservations - 200 null application/json; charset=utf-8 3.2367ms
2025-06-22 00:25:17.104 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5049/api/reservations - application/json; charset=utf-8 116
2025-06-22 00:25:17.104 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI)'
2025-06-22 00:25:17.104 +02:00 [INF] Route matched with {action = "Create", controller = "Reservations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[DineEasy.SharedKernel.Models.Reservation.ReservationDto]] Create(DineEasy.SharedKernel.Models.Reservation.CreateReservationDto) on controller DineEasy.WebAPI.Controllers.ReservationsController (DineEasy.WebAPI).
2025-06-22 00:25:17.105 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:25:17.105 +02:00 [INF] Creating new reservation for UserId: 1, TableId: 1
2025-06-22 00:25:17.105 +02:00 [INF] Creating new reservation - UserId: 1, TableId: 1, DateTime: "2025-01-24T18:00:00.0000000", Duration: 1, PartySize: 1
2025-06-22 00:25:17.105 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."Email", "u"."PasswordHash", "u"."Role", "u"."Username", "u0"."Id", "u0"."CreatedAt", "u0"."DateOfBirth", "u0"."FirstName", "u0"."LastName", "u0"."PhoneNumber", "u0"."UserId"
FROM "Users" AS "u"
LEFT JOIN "UserProfiles" AS "u0" ON "u"."Id" = "u0"."UserId"
WHERE "u"."Id" = @__id_0
LIMIT 1
2025-06-22 00:25:17.106 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Capacity", "t"."IsActive", "t"."TableNumber"
FROM "Tables" AS "t"
WHERE "t"."Id" = @__p_0
LIMIT 1
2025-06-22 00:25:17.106 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__dayOfWeek_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."DayOfWeek", "t"."EndTime", "t"."StartTime"
FROM "TimeSlots" AS "t"
WHERE "t"."DayOfWeek" = @__dayOfWeek_0
LIMIT 1
2025-06-22 00:25:17.106 +02:00 [WRN] Reservation creation failed - No time slot available for "Friday"
2025-06-22 00:25:17.107 +02:00 [ERR] Unexpected error creating reservation for UserId: 1
System.Exception: Timeslot for given week day doesn't exist!
   at DineEasy.Application.Services.ReservationService.CreateAsync(CreateReservationDto dto) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 62
   at DineEasy.WebAPI.Controllers.ReservationsController.Create(CreateReservationDto dto) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.WebAPI/Controllers/ReservationsController.cs:line 132
2025-06-22 00:25:17.107 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 2.1495ms.
2025-06-22 00:25:17.107 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-06-22 00:25:17.107 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI) in 2.7801ms
2025-06-22 00:25:17.107 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI)'
2025-06-22 00:25:17.107 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5049/api/reservations - 500 null text/plain; charset=utf-8 3.3437ms
2025-06-22 00:25:45.931 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5049/api/reservations - application/json; charset=utf-8 116
2025-06-22 00:25:45.932 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI)'
2025-06-22 00:25:45.932 +02:00 [INF] Route matched with {action = "Create", controller = "Reservations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[DineEasy.SharedKernel.Models.Reservation.ReservationDto]] Create(DineEasy.SharedKernel.Models.Reservation.CreateReservationDto) on controller DineEasy.WebAPI.Controllers.ReservationsController (DineEasy.WebAPI).
2025-06-22 00:25:45.933 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:25:45.933 +02:00 [INF] Creating new reservation for UserId: 1, TableId: 1
2025-06-22 00:25:45.933 +02:00 [INF] Creating new reservation - UserId: 1, TableId: 1, DateTime: "2025-01-24T18:00:00.0000000", Duration: 1, PartySize: 1
2025-06-22 00:25:45.934 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."Email", "u"."PasswordHash", "u"."Role", "u"."Username", "u0"."Id", "u0"."CreatedAt", "u0"."DateOfBirth", "u0"."FirstName", "u0"."LastName", "u0"."PhoneNumber", "u0"."UserId"
FROM "Users" AS "u"
LEFT JOIN "UserProfiles" AS "u0" ON "u"."Id" = "u0"."UserId"
WHERE "u"."Id" = @__id_0
LIMIT 1
2025-06-22 00:25:45.936 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Capacity", "t"."IsActive", "t"."TableNumber"
FROM "Tables" AS "t"
WHERE "t"."Id" = @__p_0
LIMIT 1
2025-06-22 00:25:45.936 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__dayOfWeek_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."DayOfWeek", "t"."EndTime", "t"."StartTime"
FROM "TimeSlots" AS "t"
WHERE "t"."DayOfWeek" = @__dayOfWeek_0
LIMIT 1
2025-06-22 00:25:45.937 +02:00 [WRN] Reservation creation failed - No time slot available for "Friday"
2025-06-22 00:25:45.937 +02:00 [ERR] Unexpected error creating reservation for UserId: 1
System.Exception: Timeslot for given week day doesn't exist!
   at DineEasy.Application.Services.ReservationService.CreateAsync(CreateReservationDto dto) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 62
   at DineEasy.WebAPI.Controllers.ReservationsController.Create(CreateReservationDto dto) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.WebAPI/Controllers/ReservationsController.cs:line 132
2025-06-22 00:25:45.937 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 3.854ms.
2025-06-22 00:25:45.937 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-06-22 00:25:45.937 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI) in 4.8557ms
2025-06-22 00:25:45.937 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI)'
2025-06-22 00:25:45.937 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5049/api/reservations - 500 null text/plain; charset=utf-8 6.3633ms
2025-06-22 00:25:46.348 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5049/api/reservations - application/json; charset=utf-8 116
2025-06-22 00:25:46.349 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI)'
2025-06-22 00:25:46.349 +02:00 [INF] Route matched with {action = "Create", controller = "Reservations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[DineEasy.SharedKernel.Models.Reservation.ReservationDto]] Create(DineEasy.SharedKernel.Models.Reservation.CreateReservationDto) on controller DineEasy.WebAPI.Controllers.ReservationsController (DineEasy.WebAPI).
2025-06-22 00:25:46.350 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:25:46.350 +02:00 [INF] Creating new reservation for UserId: 1, TableId: 1
2025-06-22 00:25:46.350 +02:00 [INF] Creating new reservation - UserId: 1, TableId: 1, DateTime: "2025-01-24T18:00:00.0000000", Duration: 1, PartySize: 1
2025-06-22 00:25:46.352 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."Email", "u"."PasswordHash", "u"."Role", "u"."Username", "u0"."Id", "u0"."CreatedAt", "u0"."DateOfBirth", "u0"."FirstName", "u0"."LastName", "u0"."PhoneNumber", "u0"."UserId"
FROM "Users" AS "u"
LEFT JOIN "UserProfiles" AS "u0" ON "u"."Id" = "u0"."UserId"
WHERE "u"."Id" = @__id_0
LIMIT 1
2025-06-22 00:25:46.354 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Capacity", "t"."IsActive", "t"."TableNumber"
FROM "Tables" AS "t"
WHERE "t"."Id" = @__p_0
LIMIT 1
2025-06-22 00:25:46.354 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__dayOfWeek_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."DayOfWeek", "t"."EndTime", "t"."StartTime"
FROM "TimeSlots" AS "t"
WHERE "t"."DayOfWeek" = @__dayOfWeek_0
LIMIT 1
2025-06-22 00:25:46.355 +02:00 [WRN] Reservation creation failed - No time slot available for "Friday"
2025-06-22 00:25:46.355 +02:00 [ERR] Unexpected error creating reservation for UserId: 1
System.Exception: Timeslot for given week day doesn't exist!
   at DineEasy.Application.Services.ReservationService.CreateAsync(CreateReservationDto dto) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 62
   at DineEasy.WebAPI.Controllers.ReservationsController.Create(CreateReservationDto dto) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.WebAPI/Controllers/ReservationsController.cs:line 132
2025-06-22 00:25:46.356 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 5.2853ms.
2025-06-22 00:25:46.356 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-06-22 00:25:46.356 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI) in 6.5272ms
2025-06-22 00:25:46.356 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI)'
2025-06-22 00:25:46.356 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5049/api/reservations - 500 null text/plain; charset=utf-8 7.8659ms
2025-06-22 00:25:46.464 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5049/api/reservations - application/json; charset=utf-8 116
2025-06-22 00:25:46.465 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI)'
2025-06-22 00:25:46.465 +02:00 [INF] Route matched with {action = "Create", controller = "Reservations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[DineEasy.SharedKernel.Models.Reservation.ReservationDto]] Create(DineEasy.SharedKernel.Models.Reservation.CreateReservationDto) on controller DineEasy.WebAPI.Controllers.ReservationsController (DineEasy.WebAPI).
2025-06-22 00:25:46.466 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:25:46.466 +02:00 [INF] Creating new reservation for UserId: 1, TableId: 1
2025-06-22 00:25:46.466 +02:00 [INF] Creating new reservation - UserId: 1, TableId: 1, DateTime: "2025-01-24T18:00:00.0000000", Duration: 1, PartySize: 1
2025-06-22 00:25:46.468 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."Email", "u"."PasswordHash", "u"."Role", "u"."Username", "u0"."Id", "u0"."CreatedAt", "u0"."DateOfBirth", "u0"."FirstName", "u0"."LastName", "u0"."PhoneNumber", "u0"."UserId"
FROM "Users" AS "u"
LEFT JOIN "UserProfiles" AS "u0" ON "u"."Id" = "u0"."UserId"
WHERE "u"."Id" = @__id_0
LIMIT 1
2025-06-22 00:25:46.469 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Capacity", "t"."IsActive", "t"."TableNumber"
FROM "Tables" AS "t"
WHERE "t"."Id" = @__p_0
LIMIT 1
2025-06-22 00:25:46.471 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__dayOfWeek_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."DayOfWeek", "t"."EndTime", "t"."StartTime"
FROM "TimeSlots" AS "t"
WHERE "t"."DayOfWeek" = @__dayOfWeek_0
LIMIT 1
2025-06-22 00:25:46.471 +02:00 [WRN] Reservation creation failed - No time slot available for "Friday"
2025-06-22 00:25:46.471 +02:00 [ERR] Unexpected error creating reservation for UserId: 1
System.Exception: Timeslot for given week day doesn't exist!
   at DineEasy.Application.Services.ReservationService.CreateAsync(CreateReservationDto dto) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 62
   at DineEasy.WebAPI.Controllers.ReservationsController.Create(CreateReservationDto dto) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.WebAPI/Controllers/ReservationsController.cs:line 132
2025-06-22 00:25:46.472 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 5.3761ms.
2025-06-22 00:25:46.472 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-06-22 00:25:46.472 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI) in 6.6738ms
2025-06-22 00:25:46.472 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI)'
2025-06-22 00:25:46.472 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5049/api/reservations - 500 null text/plain; charset=utf-8 8.1331ms
2025-06-22 00:25:59.729 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5049/api/reservations - application/json; charset=utf-8 116
2025-06-22 00:25:59.730 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI)'
2025-06-22 00:25:59.730 +02:00 [INF] Route matched with {action = "Create", controller = "Reservations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[DineEasy.SharedKernel.Models.Reservation.ReservationDto]] Create(DineEasy.SharedKernel.Models.Reservation.CreateReservationDto) on controller DineEasy.WebAPI.Controllers.ReservationsController (DineEasy.WebAPI).
2025-06-22 00:25:59.731 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:25:59.731 +02:00 [INF] Creating new reservation for UserId: 1, TableId: 1
2025-06-22 00:25:59.732 +02:00 [INF] Creating new reservation - UserId: 1, TableId: 1, DateTime: "2025-06-23T18:00:00.0000000", Duration: 1, PartySize: 1
2025-06-22 00:25:59.733 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."Email", "u"."PasswordHash", "u"."Role", "u"."Username", "u0"."Id", "u0"."CreatedAt", "u0"."DateOfBirth", "u0"."FirstName", "u0"."LastName", "u0"."PhoneNumber", "u0"."UserId"
FROM "Users" AS "u"
LEFT JOIN "UserProfiles" AS "u0" ON "u"."Id" = "u0"."UserId"
WHERE "u"."Id" = @__id_0
LIMIT 1
2025-06-22 00:25:59.735 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Capacity", "t"."IsActive", "t"."TableNumber"
FROM "Tables" AS "t"
WHERE "t"."Id" = @__p_0
LIMIT 1
2025-06-22 00:25:59.736 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__dayOfWeek_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."DayOfWeek", "t"."EndTime", "t"."StartTime"
FROM "TimeSlots" AS "t"
WHERE "t"."DayOfWeek" = @__dayOfWeek_0
LIMIT 1
2025-06-22 00:25:59.737 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__tabelId_0='?' (DbType = Int32), @__dateTime_1='?' (DbType = DateTime), @__newReservationEnd_2='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Reservations" AS "r"
    WHERE "r"."TableId" = @__tabelId_0 AND "r"."Status" NOT IN ('Cancelled', 'Completed') AND @__dateTime_1 < rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', "r"."ReservationDateTime", CAST(CAST("r"."Duration" AS REAL) AS TEXT) || ' hours'), '0'), '.') AND @__newReservationEnd_2 > "r"."ReservationDateTime")
2025-06-22 00:25:59.739 +02:00 [ERR] Failed executing DbCommand (1ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Reservations" ("CreatedAt", "Duration", "PartySize", "ReservationDateTime", "SpecialRequests", "Status", "TableId", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7)
RETURNING "Id";
2025-06-22 00:25:59.741 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'DineEasy.Infrastructure.Data.DineEasyDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'FOREIGN KEY constraint failed'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'FOREIGN KEY constraint failed'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-06-22 00:25:59.743 +02:00 [ERR] Unexpected error creating reservation for UserId: 1
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'FOREIGN KEY constraint failed'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at DineEasy.Infrastructure.Repositories.UnitOfWork.SaveChangesAsync() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Infrastructure/Repositories/UnitOfWork.cs:line 30
   at DineEasy.Application.Services.ReservationService.CreateAsync(CreateReservationDto dto) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 105
   at DineEasy.WebAPI.Controllers.ReservationsController.Create(CreateReservationDto dto) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.WebAPI/Controllers/ReservationsController.cs:line 132
2025-06-22 00:25:59.744 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 13.2921ms.
2025-06-22 00:25:59.745 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-06-22 00:25:59.745 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI) in 14.3271ms
2025-06-22 00:25:59.745 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI)'
2025-06-22 00:25:59.745 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5049/api/reservations - 500 null text/plain; charset=utf-8 15.9808ms
2025-06-22 00:26:42.052 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5049/api/reservations - application/json; charset=utf-8 116
2025-06-22 00:26:42.054 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI)'
2025-06-22 00:26:42.054 +02:00 [INF] Route matched with {action = "Create", controller = "Reservations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[DineEasy.SharedKernel.Models.Reservation.ReservationDto]] Create(DineEasy.SharedKernel.Models.Reservation.CreateReservationDto) on controller DineEasy.WebAPI.Controllers.ReservationsController (DineEasy.WebAPI).
2025-06-22 00:26:42.055 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:26:42.055 +02:00 [INF] Creating new reservation for UserId: 1, TableId: 1
2025-06-22 00:26:42.056 +02:00 [INF] Creating new reservation - UserId: 1, TableId: 1, DateTime: "2025-06-23T18:00:00.0000000", Duration: 1, PartySize: 1
2025-06-22 00:26:42.057 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."Email", "u"."PasswordHash", "u"."Role", "u"."Username", "u0"."Id", "u0"."CreatedAt", "u0"."DateOfBirth", "u0"."FirstName", "u0"."LastName", "u0"."PhoneNumber", "u0"."UserId"
FROM "Users" AS "u"
LEFT JOIN "UserProfiles" AS "u0" ON "u"."Id" = "u0"."UserId"
WHERE "u"."Id" = @__id_0
LIMIT 1
2025-06-22 00:26:42.059 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Capacity", "t"."IsActive", "t"."TableNumber"
FROM "Tables" AS "t"
WHERE "t"."Id" = @__p_0
LIMIT 1
2025-06-22 00:26:42.061 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__dayOfWeek_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."DayOfWeek", "t"."EndTime", "t"."StartTime"
FROM "TimeSlots" AS "t"
WHERE "t"."DayOfWeek" = @__dayOfWeek_0
LIMIT 1
2025-06-22 00:26:42.062 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__tabelId_0='?' (DbType = Int32), @__dateTime_1='?' (DbType = DateTime), @__newReservationEnd_2='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Reservations" AS "r"
    WHERE "r"."TableId" = @__tabelId_0 AND "r"."Status" NOT IN ('Cancelled', 'Completed') AND @__dateTime_1 < rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', "r"."ReservationDateTime", CAST(CAST("r"."Duration" AS REAL) AS TEXT) || ' hours'), '0'), '.') AND @__newReservationEnd_2 > "r"."ReservationDateTime")
2025-06-22 00:26:42.064 +02:00 [ERR] Failed executing DbCommand (1ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Reservations" ("CreatedAt", "Duration", "PartySize", "ReservationDateTime", "SpecialRequests", "Status", "TableId", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7)
RETURNING "Id";
2025-06-22 00:26:42.067 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'DineEasy.Infrastructure.Data.DineEasyDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'FOREIGN KEY constraint failed'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'FOREIGN KEY constraint failed'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-06-22 00:26:42.069 +02:00 [ERR] Unexpected error creating reservation for UserId: 1
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'FOREIGN KEY constraint failed'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at DineEasy.Infrastructure.Repositories.UnitOfWork.SaveChangesAsync() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Infrastructure/Repositories/UnitOfWork.cs:line 30
   at DineEasy.Application.Services.ReservationService.CreateAsync(CreateReservationDto dto) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 105
   at DineEasy.WebAPI.Controllers.ReservationsController.Create(CreateReservationDto dto) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.WebAPI/Controllers/ReservationsController.cs:line 132
2025-06-22 00:26:42.072 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 17.0442ms.
2025-06-22 00:26:42.073 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-06-22 00:26:42.073 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI) in 18.6902ms
2025-06-22 00:26:42.073 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI)'
2025-06-22 00:26:42.073 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5049/api/reservations - 500 null text/plain; charset=utf-8 20.7172ms
2025-06-22 00:26:54.068 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5049/api/auth/login - application/json; charset=utf-8 null
2025-06-22 00:26:54.069 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI)'
2025-06-22 00:26:54.069 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[DineEasy.SharedKernel.Models.Auth.AuthResponseDto]] Login(DineEasy.SharedKernel.Models.Auth.LoginDto) on controller DineEasy.WebAPI.Controllers.AuthController (DineEasy.WebAPI).
2025-06-22 00:26:54.069 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:26:54.069 +02:00 [INF] Login attempt for email: admin@dineeasy.com
2025-06-22 00:26:54.069 +02:00 [INF] Login attempt for email: admin@dineeasy.com
2025-06-22 00:26:54.070 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__email_0='?' (Size = 18)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."Email", "u"."PasswordHash", "u"."Role", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."Email" = @__email_0
LIMIT 1
2025-06-22 00:26:54.225 +02:00 [WRN] Failed login attempt for email: admin@dineeasy.com
2025-06-22 00:26:54.225 +02:00 [WRN] Failed login attempt for email: admin@dineeasy.com
2025-06-22 00:26:54.225 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.UnauthorizedObjectResult in 156.0891ms.
2025-06-22 00:26:54.225 +02:00 [INF] Executing UnauthorizedObjectResult, writing value of type 'System.String'.
2025-06-22 00:26:54.226 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI) in 156.7765ms
2025-06-22 00:26:54.226 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI)'
2025-06-22 00:26:54.226 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5049/api/auth/login - 401 null text/plain; charset=utf-8 157.3159ms
2025-06-22 00:26:55.217 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5049/api/auth/login - application/json; charset=utf-8 null
2025-06-22 00:26:55.218 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI)'
2025-06-22 00:26:55.218 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[DineEasy.SharedKernel.Models.Auth.AuthResponseDto]] Login(DineEasy.SharedKernel.Models.Auth.LoginDto) on controller DineEasy.WebAPI.Controllers.AuthController (DineEasy.WebAPI).
2025-06-22 00:26:55.219 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:26:55.219 +02:00 [INF] Login attempt for email: admin@dineeasy.com
2025-06-22 00:26:55.219 +02:00 [INF] Login attempt for email: admin@dineeasy.com
2025-06-22 00:26:55.220 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__email_0='?' (Size = 18)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."Email", "u"."PasswordHash", "u"."Role", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."Email" = @__email_0
LIMIT 1
2025-06-22 00:26:55.391 +02:00 [WRN] Failed login attempt for email: admin@dineeasy.com
2025-06-22 00:26:55.391 +02:00 [WRN] Failed login attempt for email: admin@dineeasy.com
2025-06-22 00:26:55.392 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.UnauthorizedObjectResult in 172.8923ms.
2025-06-22 00:26:55.392 +02:00 [INF] Executing UnauthorizedObjectResult, writing value of type 'System.String'.
2025-06-22 00:26:55.392 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI) in 173.9913ms
2025-06-22 00:26:55.392 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI)'
2025-06-22 00:26:55.392 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5049/api/auth/login - 401 null text/plain; charset=utf-8 174.5957ms
2025-06-22 00:26:56.708 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5049/api/auth/login - application/json; charset=utf-8 null
2025-06-22 00:26:56.709 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI)'
2025-06-22 00:26:56.709 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[DineEasy.SharedKernel.Models.Auth.AuthResponseDto]] Login(DineEasy.SharedKernel.Models.Auth.LoginDto) on controller DineEasy.WebAPI.Controllers.AuthController (DineEasy.WebAPI).
2025-06-22 00:26:56.710 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:26:56.710 +02:00 [INF] Login attempt for email: admin@dineeasy.com
2025-06-22 00:26:56.710 +02:00 [INF] Login attempt for email: admin@dineeasy.com
2025-06-22 00:26:56.712 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__email_0='?' (Size = 18)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."Email", "u"."PasswordHash", "u"."Role", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."Email" = @__email_0
LIMIT 1
2025-06-22 00:26:56.895 +02:00 [INF] Successful login for user: admin123123
2025-06-22 00:26:56.895 +02:00 [INF] Successful login for user: admin123123
2025-06-22 00:26:56.895 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 185.0882ms.
2025-06-22 00:26:56.895 +02:00 [INF] Executing OkObjectResult, writing value of type 'DineEasy.SharedKernel.Models.Auth.AuthResponseDto'.
2025-06-22 00:26:56.895 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI) in 186.3553ms
2025-06-22 00:26:56.895 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI)'
2025-06-22 00:26:56.896 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5049/api/auth/login - 200 null application/json; charset=utf-8 187.2325ms
2025-06-22 00:26:58.321 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5049/api/reservations - null null
2025-06-22 00:26:58.322 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI)'
2025-06-22 00:26:58.322 +02:00 [INF] Route matched with {action = "GetAll", controller = "Reservations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[DineEasy.SharedKernel.Models.Reservation.ReservationDto]]] GetAll() on controller DineEasy.WebAPI.Controllers.ReservationsController (DineEasy.WebAPI).
2025-06-22 00:26:58.322 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:26:58.322 +02:00 [INF] Getting reservations for user: admin123123
2025-06-22 00:26:58.322 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 1
2025-06-22 00:26:58.322 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin123123
2025-06-22 00:26:58.322 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = admin@dineeasy.com
2025-06-22 00:26:58.322 +02:00 [INF] Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = Admin
2025-06-22 00:26:58.322 +02:00 [INF] Claim: exp = 1750631216
2025-06-22 00:26:58.322 +02:00 [INF] Claim: iss = DineEasy
2025-06-22 00:26:58.322 +02:00 [INF] Claim: aud = DineEasy-Users
2025-06-22 00:26:58.322 +02:00 [INF] User is Admin - returning all reservations
2025-06-22 00:26:58.322 +02:00 [INF] Retrieving all reservations
2025-06-22 00:26:58.323 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Id", "r"."CreatedAt", "r"."Duration", "r"."PartySize", "r"."ReservationDateTime", "r"."SpecialRequests", "r"."Status", "r"."TableId", "r"."UserId"
FROM "Reservations" AS "r"
2025-06-22 00:26:58.323 +02:00 [INF] Successfully retrieved 0 reservations
2025-06-22 00:26:58.323 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 0.6262ms.
2025-06-22 00:26:58.323 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DineEasy.SharedKernel.Models.Reservation.ReservationDto, DineEasy.SharedKernel, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-22 00:26:58.323 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI) in 1.0232ms
2025-06-22 00:26:58.323 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI)'
2025-06-22 00:26:58.323 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5049/api/reservations - 200 null application/json; charset=utf-8 1.5792ms
2025-06-22 00:27:00.077 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5049/api/reservations - null null
2025-06-22 00:27:00.078 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI)'
2025-06-22 00:27:00.078 +02:00 [INF] Route matched with {action = "GetAll", controller = "Reservations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[DineEasy.SharedKernel.Models.Reservation.ReservationDto]]] GetAll() on controller DineEasy.WebAPI.Controllers.ReservationsController (DineEasy.WebAPI).
2025-06-22 00:27:00.079 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:27:00.079 +02:00 [INF] Getting reservations for user: admin123123
2025-06-22 00:27:00.079 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 1
2025-06-22 00:27:00.079 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin123123
2025-06-22 00:27:00.079 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = admin@dineeasy.com
2025-06-22 00:27:00.079 +02:00 [INF] Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = Admin
2025-06-22 00:27:00.079 +02:00 [INF] Claim: exp = 1750631216
2025-06-22 00:27:00.079 +02:00 [INF] Claim: iss = DineEasy
2025-06-22 00:27:00.079 +02:00 [INF] Claim: aud = DineEasy-Users
2025-06-22 00:27:00.079 +02:00 [INF] User is Admin - returning all reservations
2025-06-22 00:27:00.079 +02:00 [INF] Retrieving all reservations
2025-06-22 00:27:00.080 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Id", "r"."CreatedAt", "r"."Duration", "r"."PartySize", "r"."ReservationDateTime", "r"."SpecialRequests", "r"."Status", "r"."TableId", "r"."UserId"
FROM "Reservations" AS "r"
2025-06-22 00:27:00.081 +02:00 [INF] Successfully retrieved 0 reservations
2025-06-22 00:27:00.081 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1.7599ms.
2025-06-22 00:27:00.081 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DineEasy.SharedKernel.Models.Reservation.ReservationDto, DineEasy.SharedKernel, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-22 00:27:00.081 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI) in 3.0076ms
2025-06-22 00:27:00.081 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI)'
2025-06-22 00:27:00.081 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5049/api/reservations - 200 null application/json; charset=utf-8 4.6712ms
2025-06-22 00:27:19.249 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5049/api/reservations - application/json; charset=utf-8 116
2025-06-22 00:27:19.250 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI)'
2025-06-22 00:27:19.250 +02:00 [INF] Route matched with {action = "Create", controller = "Reservations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[DineEasy.SharedKernel.Models.Reservation.ReservationDto]] Create(DineEasy.SharedKernel.Models.Reservation.CreateReservationDto) on controller DineEasy.WebAPI.Controllers.ReservationsController (DineEasy.WebAPI).
2025-06-22 00:27:19.251 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:27:19.251 +02:00 [INF] Creating new reservation for UserId: 1, TableId: 1
2025-06-22 00:27:19.251 +02:00 [INF] Creating new reservation - UserId: 1, TableId: 1, DateTime: "2025-06-24T16:00:00.0000000", Duration: 1, PartySize: 2
2025-06-22 00:27:19.252 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."Email", "u"."PasswordHash", "u"."Role", "u"."Username", "u0"."Id", "u0"."CreatedAt", "u0"."DateOfBirth", "u0"."FirstName", "u0"."LastName", "u0"."PhoneNumber", "u0"."UserId"
FROM "Users" AS "u"
LEFT JOIN "UserProfiles" AS "u0" ON "u"."Id" = "u0"."UserId"
WHERE "u"."Id" = @__id_0
LIMIT 1
2025-06-22 00:27:19.254 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Capacity", "t"."IsActive", "t"."TableNumber"
FROM "Tables" AS "t"
WHERE "t"."Id" = @__p_0
LIMIT 1
2025-06-22 00:27:19.254 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__dayOfWeek_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."DayOfWeek", "t"."EndTime", "t"."StartTime"
FROM "TimeSlots" AS "t"
WHERE "t"."DayOfWeek" = @__dayOfWeek_0
LIMIT 1
2025-06-22 00:27:19.255 +02:00 [WRN] Reservation creation failed - No time slot available for "Tuesday"
2025-06-22 00:27:19.255 +02:00 [ERR] Unexpected error creating reservation for UserId: 1
System.Exception: Timeslot for given week day doesn't exist!
   at DineEasy.Application.Services.ReservationService.CreateAsync(CreateReservationDto dto) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 62
   at DineEasy.WebAPI.Controllers.ReservationsController.Create(CreateReservationDto dto) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.WebAPI/Controllers/ReservationsController.cs:line 132
2025-06-22 00:27:19.255 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 4.7135ms.
2025-06-22 00:27:19.256 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-06-22 00:27:19.256 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI) in 5.693ms
2025-06-22 00:27:19.256 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI)'
2025-06-22 00:27:19.256 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5049/api/reservations - 500 null text/plain; charset=utf-8 6.716ms
2025-06-22 00:28:03.182 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5049/api/reservations - application/json; charset=utf-8 116
2025-06-22 00:28:03.182 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI)'
2025-06-22 00:28:03.183 +02:00 [INF] Route matched with {action = "Create", controller = "Reservations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[DineEasy.SharedKernel.Models.Reservation.ReservationDto]] Create(DineEasy.SharedKernel.Models.Reservation.CreateReservationDto) on controller DineEasy.WebAPI.Controllers.ReservationsController (DineEasy.WebAPI).
2025-06-22 00:28:03.183 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:28:03.183 +02:00 [INF] Creating new reservation for UserId: 1, TableId: 1
2025-06-22 00:28:03.183 +02:00 [INF] Creating new reservation - UserId: 1, TableId: 1, DateTime: "2025-06-23T16:00:00.0000000", Duration: 1, PartySize: 2
2025-06-22 00:28:03.185 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."Email", "u"."PasswordHash", "u"."Role", "u"."Username", "u0"."Id", "u0"."CreatedAt", "u0"."DateOfBirth", "u0"."FirstName", "u0"."LastName", "u0"."PhoneNumber", "u0"."UserId"
FROM "Users" AS "u"
LEFT JOIN "UserProfiles" AS "u0" ON "u"."Id" = "u0"."UserId"
WHERE "u"."Id" = @__id_0
LIMIT 1
2025-06-22 00:28:03.186 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Capacity", "t"."IsActive", "t"."TableNumber"
FROM "Tables" AS "t"
WHERE "t"."Id" = @__p_0
LIMIT 1
2025-06-22 00:28:03.187 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__dayOfWeek_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."DayOfWeek", "t"."EndTime", "t"."StartTime"
FROM "TimeSlots" AS "t"
WHERE "t"."DayOfWeek" = @__dayOfWeek_0
LIMIT 1
2025-06-22 00:28:03.188 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__tabelId_0='?' (DbType = Int32), @__dateTime_1='?' (DbType = DateTime), @__newReservationEnd_2='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Reservations" AS "r"
    WHERE "r"."TableId" = @__tabelId_0 AND "r"."Status" NOT IN ('Cancelled', 'Completed') AND @__dateTime_1 < rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', "r"."ReservationDateTime", CAST(CAST("r"."Duration" AS REAL) AS TEXT) || ' hours'), '0'), '.') AND @__newReservationEnd_2 > "r"."ReservationDateTime")
2025-06-22 00:28:03.191 +02:00 [ERR] Failed executing DbCommand (2ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Reservations" ("CreatedAt", "Duration", "PartySize", "ReservationDateTime", "SpecialRequests", "Status", "TableId", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7)
RETURNING "Id";
2025-06-22 00:28:03.195 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'DineEasy.Infrastructure.Data.DineEasyDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'FOREIGN KEY constraint failed'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'FOREIGN KEY constraint failed'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-06-22 00:28:03.198 +02:00 [ERR] Unexpected error creating reservation for UserId: 1
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'FOREIGN KEY constraint failed'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at DineEasy.Infrastructure.Repositories.UnitOfWork.SaveChangesAsync() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Infrastructure/Repositories/UnitOfWork.cs:line 30
   at DineEasy.Application.Services.ReservationService.CreateAsync(CreateReservationDto dto) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 105
   at DineEasy.WebAPI.Controllers.ReservationsController.Create(CreateReservationDto dto) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.WebAPI/Controllers/ReservationsController.cs:line 132
2025-06-22 00:28:03.202 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 18.209ms.
2025-06-22 00:28:03.202 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-06-22 00:28:03.202 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI) in 19.2952ms
2025-06-22 00:28:03.202 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI)'
2025-06-22 00:28:03.202 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5049/api/reservations - 500 null text/plain; charset=utf-8 20.453ms
2025-06-22 00:28:03.295 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5049/api/reservations - application/json; charset=utf-8 116
2025-06-22 00:28:03.295 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI)'
2025-06-22 00:28:03.296 +02:00 [INF] Route matched with {action = "Create", controller = "Reservations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[DineEasy.SharedKernel.Models.Reservation.ReservationDto]] Create(DineEasy.SharedKernel.Models.Reservation.CreateReservationDto) on controller DineEasy.WebAPI.Controllers.ReservationsController (DineEasy.WebAPI).
2025-06-22 00:28:03.296 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:28:03.296 +02:00 [INF] Creating new reservation for UserId: 1, TableId: 1
2025-06-22 00:28:03.296 +02:00 [INF] Creating new reservation - UserId: 1, TableId: 1, DateTime: "2025-06-23T16:00:00.0000000", Duration: 1, PartySize: 2
2025-06-22 00:28:03.297 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."Email", "u"."PasswordHash", "u"."Role", "u"."Username", "u0"."Id", "u0"."CreatedAt", "u0"."DateOfBirth", "u0"."FirstName", "u0"."LastName", "u0"."PhoneNumber", "u0"."UserId"
FROM "Users" AS "u"
LEFT JOIN "UserProfiles" AS "u0" ON "u"."Id" = "u0"."UserId"
WHERE "u"."Id" = @__id_0
LIMIT 1
2025-06-22 00:28:03.298 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Capacity", "t"."IsActive", "t"."TableNumber"
FROM "Tables" AS "t"
WHERE "t"."Id" = @__p_0
LIMIT 1
2025-06-22 00:28:03.298 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__dayOfWeek_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."DayOfWeek", "t"."EndTime", "t"."StartTime"
FROM "TimeSlots" AS "t"
WHERE "t"."DayOfWeek" = @__dayOfWeek_0
LIMIT 1
2025-06-22 00:28:03.298 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__tabelId_0='?' (DbType = Int32), @__dateTime_1='?' (DbType = DateTime), @__newReservationEnd_2='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Reservations" AS "r"
    WHERE "r"."TableId" = @__tabelId_0 AND "r"."Status" NOT IN ('Cancelled', 'Completed') AND @__dateTime_1 < rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', "r"."ReservationDateTime", CAST(CAST("r"."Duration" AS REAL) AS TEXT) || ' hours'), '0'), '.') AND @__newReservationEnd_2 > "r"."ReservationDateTime")
2025-06-22 00:28:03.299 +02:00 [ERR] Failed executing DbCommand (0ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Reservations" ("CreatedAt", "Duration", "PartySize", "ReservationDateTime", "SpecialRequests", "Status", "TableId", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7)
RETURNING "Id";
2025-06-22 00:28:03.300 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'DineEasy.Infrastructure.Data.DineEasyDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'FOREIGN KEY constraint failed'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'FOREIGN KEY constraint failed'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-06-22 00:28:03.301 +02:00 [ERR] Unexpected error creating reservation for UserId: 1
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'FOREIGN KEY constraint failed'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at DineEasy.Infrastructure.Repositories.UnitOfWork.SaveChangesAsync() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Infrastructure/Repositories/UnitOfWork.cs:line 30
   at DineEasy.Application.Services.ReservationService.CreateAsync(CreateReservationDto dto) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 105
   at DineEasy.WebAPI.Controllers.ReservationsController.Create(CreateReservationDto dto) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.WebAPI/Controllers/ReservationsController.cs:line 132
2025-06-22 00:28:03.302 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 6.4036ms.
2025-06-22 00:28:03.303 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-06-22 00:28:03.303 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI) in 6.9538ms
2025-06-22 00:28:03.303 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI)'
2025-06-22 00:28:03.303 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5049/api/reservations - 500 null text/plain; charset=utf-8 8.0372ms
2025-06-22 00:28:37.019 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5049/api/reservations - application/json; charset=utf-8 116
2025-06-22 00:28:37.021 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI)'
2025-06-22 00:28:37.021 +02:00 [INF] Route matched with {action = "Create", controller = "Reservations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[DineEasy.SharedKernel.Models.Reservation.ReservationDto]] Create(DineEasy.SharedKernel.Models.Reservation.CreateReservationDto) on controller DineEasy.WebAPI.Controllers.ReservationsController (DineEasy.WebAPI).
2025-06-22 00:28:37.022 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:28:37.023 +02:00 [INF] Creating new reservation for UserId: 1, TableId: 1
2025-06-22 00:28:37.023 +02:00 [INF] Creating new reservation - UserId: 1, TableId: 1, DateTime: "2025-06-23T16:00:00.0000000", Duration: 1, PartySize: 2
2025-06-22 00:28:37.025 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."Email", "u"."PasswordHash", "u"."Role", "u"."Username", "u0"."Id", "u0"."CreatedAt", "u0"."DateOfBirth", "u0"."FirstName", "u0"."LastName", "u0"."PhoneNumber", "u0"."UserId"
FROM "Users" AS "u"
LEFT JOIN "UserProfiles" AS "u0" ON "u"."Id" = "u0"."UserId"
WHERE "u"."Id" = @__id_0
LIMIT 1
2025-06-22 00:28:37.026 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Capacity", "t"."IsActive", "t"."TableNumber"
FROM "Tables" AS "t"
WHERE "t"."Id" = @__p_0
LIMIT 1
2025-06-22 00:28:37.027 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__dayOfWeek_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."DayOfWeek", "t"."EndTime", "t"."StartTime"
FROM "TimeSlots" AS "t"
WHERE "t"."DayOfWeek" = @__dayOfWeek_0
LIMIT 1
2025-06-22 00:28:37.029 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__tabelId_0='?' (DbType = Int32), @__dateTime_1='?' (DbType = DateTime), @__newReservationEnd_2='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Reservations" AS "r"
    WHERE "r"."TableId" = @__tabelId_0 AND "r"."Status" NOT IN ('Cancelled', 'Completed') AND @__dateTime_1 < rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', "r"."ReservationDateTime", CAST(CAST("r"."Duration" AS REAL) AS TEXT) || ' hours'), '0'), '.') AND @__newReservationEnd_2 > "r"."ReservationDateTime")
2025-06-22 00:28:37.031 +02:00 [ERR] Failed executing DbCommand (1ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Reservations" ("CreatedAt", "Duration", "PartySize", "ReservationDateTime", "SpecialRequests", "Status", "TableId", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7)
RETURNING "Id";
2025-06-22 00:28:37.036 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'DineEasy.Infrastructure.Data.DineEasyDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'FOREIGN KEY constraint failed'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'FOREIGN KEY constraint failed'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-06-22 00:28:37.038 +02:00 [ERR] Unexpected error creating reservation for UserId: 1
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'FOREIGN KEY constraint failed'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at DineEasy.Infrastructure.Repositories.UnitOfWork.SaveChangesAsync() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Infrastructure/Repositories/UnitOfWork.cs:line 30
   at DineEasy.Application.Services.ReservationService.CreateAsync(CreateReservationDto dto) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 105
   at DineEasy.WebAPI.Controllers.ReservationsController.Create(CreateReservationDto dto) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.WebAPI/Controllers/ReservationsController.cs:line 132
2025-06-22 00:28:37.039 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 16.7209ms.
2025-06-22 00:28:37.039 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-06-22 00:28:37.040 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI) in 18.5382ms
2025-06-22 00:28:37.040 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI)'
2025-06-22 00:28:37.040 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5049/api/reservations - 500 null text/plain; charset=utf-8 20.4375ms
2025-06-22 00:28:54.932 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5049/api/auth/login - application/json; charset=utf-8 null
2025-06-22 00:28:54.932 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI)'
2025-06-22 00:28:54.933 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[DineEasy.SharedKernel.Models.Auth.AuthResponseDto]] Login(DineEasy.SharedKernel.Models.Auth.LoginDto) on controller DineEasy.WebAPI.Controllers.AuthController (DineEasy.WebAPI).
2025-06-22 00:28:54.933 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:28:54.934 +02:00 [INF] Login attempt for email: admin@dineeasy.com
2025-06-22 00:28:54.934 +02:00 [INF] Login attempt for email: admin@dineeasy.com
2025-06-22 00:28:54.935 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__email_0='?' (Size = 18)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."Email", "u"."PasswordHash", "u"."Role", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."Email" = @__email_0
LIMIT 1
2025-06-22 00:28:55.115 +02:00 [WRN] Failed login attempt for email: admin@dineeasy.com
2025-06-22 00:28:55.115 +02:00 [WRN] Failed login attempt for email: admin@dineeasy.com
2025-06-22 00:28:55.115 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.UnauthorizedObjectResult in 181.4961ms.
2025-06-22 00:28:55.115 +02:00 [INF] Executing UnauthorizedObjectResult, writing value of type 'System.String'.
2025-06-22 00:28:55.115 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI) in 182.6129ms
2025-06-22 00:28:55.115 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI)'
2025-06-22 00:28:55.115 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5049/api/auth/login - 401 null text/plain; charset=utf-8 183.5152ms
2025-06-22 00:28:57.333 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5049/api/auth/login - application/json; charset=utf-8 null
2025-06-22 00:28:57.333 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI)'
2025-06-22 00:28:57.334 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[DineEasy.SharedKernel.Models.Auth.AuthResponseDto]] Login(DineEasy.SharedKernel.Models.Auth.LoginDto) on controller DineEasy.WebAPI.Controllers.AuthController (DineEasy.WebAPI).
2025-06-22 00:28:57.335 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:28:57.335 +02:00 [INF] Login attempt for email: admin@dineeasy.com
2025-06-22 00:28:57.335 +02:00 [INF] Login attempt for email: admin@dineeasy.com
2025-06-22 00:28:57.336 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__email_0='?' (Size = 18)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."Email", "u"."PasswordHash", "u"."Role", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."Email" = @__email_0
LIMIT 1
2025-06-22 00:28:57.511 +02:00 [INF] Successful login for user: admin123123
2025-06-22 00:28:57.511 +02:00 [INF] Successful login for user: admin123123
2025-06-22 00:28:57.511 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 176.2381ms.
2025-06-22 00:28:57.511 +02:00 [INF] Executing OkObjectResult, writing value of type 'DineEasy.SharedKernel.Models.Auth.AuthResponseDto'.
2025-06-22 00:28:57.511 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI) in 177.5109ms
2025-06-22 00:28:57.511 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI)'
2025-06-22 00:28:57.511 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5049/api/auth/login - 200 null application/json; charset=utf-8 178.2462ms
2025-06-22 00:28:59.001 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5049/api/reservations - null null
2025-06-22 00:28:59.002 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI)'
2025-06-22 00:28:59.002 +02:00 [INF] Route matched with {action = "GetAll", controller = "Reservations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[DineEasy.SharedKernel.Models.Reservation.ReservationDto]]] GetAll() on controller DineEasy.WebAPI.Controllers.ReservationsController (DineEasy.WebAPI).
2025-06-22 00:28:59.003 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:28:59.003 +02:00 [INF] Getting reservations for user: admin123123
2025-06-22 00:28:59.003 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 1
2025-06-22 00:28:59.003 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin123123
2025-06-22 00:28:59.003 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = admin@dineeasy.com
2025-06-22 00:28:59.003 +02:00 [INF] Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = Admin
2025-06-22 00:28:59.003 +02:00 [INF] Claim: exp = 1750631337
2025-06-22 00:28:59.003 +02:00 [INF] Claim: iss = DineEasy
2025-06-22 00:28:59.003 +02:00 [INF] Claim: aud = DineEasy-Users
2025-06-22 00:28:59.003 +02:00 [INF] User is Admin - returning all reservations
2025-06-22 00:28:59.003 +02:00 [INF] Retrieving all reservations
2025-06-22 00:28:59.004 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Id", "r"."CreatedAt", "r"."Duration", "r"."PartySize", "r"."ReservationDateTime", "r"."SpecialRequests", "r"."Status", "r"."TableId", "r"."UserId"
FROM "Reservations" AS "r"
2025-06-22 00:28:59.004 +02:00 [INF] Successfully retrieved 0 reservations
2025-06-22 00:28:59.004 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 1.6516ms.
2025-06-22 00:28:59.004 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DineEasy.SharedKernel.Models.Reservation.ReservationDto, DineEasy.SharedKernel, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-22 00:28:59.005 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI) in 2.452ms
2025-06-22 00:28:59.005 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI)'
2025-06-22 00:28:59.005 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5049/api/reservations - 200 null application/json; charset=utf-8 3.5452ms
2025-06-22 00:29:15.979 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5049/api/reservations - application/json; charset=utf-8 116
2025-06-22 00:29:15.980 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI)'
2025-06-22 00:29:15.981 +02:00 [INF] Route matched with {action = "Create", controller = "Reservations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[DineEasy.SharedKernel.Models.Reservation.ReservationDto]] Create(DineEasy.SharedKernel.Models.Reservation.CreateReservationDto) on controller DineEasy.WebAPI.Controllers.ReservationsController (DineEasy.WebAPI).
2025-06-22 00:29:15.981 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:29:15.982 +02:00 [INF] Creating new reservation for UserId: 1, TableId: 1
2025-06-22 00:29:15.982 +02:00 [INF] Creating new reservation - UserId: 1, TableId: 1, DateTime: "2025-06-23T14:00:00.0000000", Duration: 2, PartySize: 1
2025-06-22 00:29:15.983 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."Email", "u"."PasswordHash", "u"."Role", "u"."Username", "u0"."Id", "u0"."CreatedAt", "u0"."DateOfBirth", "u0"."FirstName", "u0"."LastName", "u0"."PhoneNumber", "u0"."UserId"
FROM "Users" AS "u"
LEFT JOIN "UserProfiles" AS "u0" ON "u"."Id" = "u0"."UserId"
WHERE "u"."Id" = @__id_0
LIMIT 1
2025-06-22 00:29:15.985 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Capacity", "t"."IsActive", "t"."TableNumber"
FROM "Tables" AS "t"
WHERE "t"."Id" = @__p_0
LIMIT 1
2025-06-22 00:29:15.986 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__dayOfWeek_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."DayOfWeek", "t"."EndTime", "t"."StartTime"
FROM "TimeSlots" AS "t"
WHERE "t"."DayOfWeek" = @__dayOfWeek_0
LIMIT 1
2025-06-22 00:29:15.986 +02:00 [WRN] Reservation creation failed - Requested time "14:00:00.0000000"-"16:00:00.0000000" falls outside available slot "15:00:00.0000000"-"19:00:00.0000000" on "Monday"
2025-06-22 00:29:15.987 +02:00 [ERR] Unexpected error creating reservation for UserId: 1
DineEasy.Application.Exceptions.ReservationHoursOutOfBoundException: Reservation falls out of available time slot!
   at DineEasy.Application.Services.ReservationService.CreateAsync(CreateReservationDto dto) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 83
   at DineEasy.WebAPI.Controllers.ReservationsController.Create(CreateReservationDto dto) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.WebAPI/Controllers/ReservationsController.cs:line 132
2025-06-22 00:29:15.987 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 5.436ms.
2025-06-22 00:29:15.987 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-06-22 00:29:15.987 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI) in 6.7112ms
2025-06-22 00:29:15.987 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI)'
2025-06-22 00:29:15.988 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5049/api/reservations - 500 null text/plain; charset=utf-8 8.1037ms
2025-06-22 00:29:36.982 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5049/api/reservations - application/json; charset=utf-8 116
2025-06-22 00:29:36.983 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI)'
2025-06-22 00:29:36.983 +02:00 [INF] Route matched with {action = "Create", controller = "Reservations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[DineEasy.SharedKernel.Models.Reservation.ReservationDto]] Create(DineEasy.SharedKernel.Models.Reservation.CreateReservationDto) on controller DineEasy.WebAPI.Controllers.ReservationsController (DineEasy.WebAPI).
2025-06-22 00:29:36.984 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:29:36.984 +02:00 [INF] Creating new reservation for UserId: 1, TableId: 1
2025-06-22 00:29:36.984 +02:00 [INF] Creating new reservation - UserId: 1, TableId: 1, DateTime: "2025-06-23T16:00:00.0000000", Duration: 2, PartySize: 1
2025-06-22 00:29:36.985 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."Email", "u"."PasswordHash", "u"."Role", "u"."Username", "u0"."Id", "u0"."CreatedAt", "u0"."DateOfBirth", "u0"."FirstName", "u0"."LastName", "u0"."PhoneNumber", "u0"."UserId"
FROM "Users" AS "u"
LEFT JOIN "UserProfiles" AS "u0" ON "u"."Id" = "u0"."UserId"
WHERE "u"."Id" = @__id_0
LIMIT 1
2025-06-22 00:29:36.986 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Capacity", "t"."IsActive", "t"."TableNumber"
FROM "Tables" AS "t"
WHERE "t"."Id" = @__p_0
LIMIT 1
2025-06-22 00:29:36.987 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__dayOfWeek_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."DayOfWeek", "t"."EndTime", "t"."StartTime"
FROM "TimeSlots" AS "t"
WHERE "t"."DayOfWeek" = @__dayOfWeek_0
LIMIT 1
2025-06-22 00:29:36.987 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__tabelId_0='?' (DbType = Int32), @__dateTime_1='?' (DbType = DateTime), @__newReservationEnd_2='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Reservations" AS "r"
    WHERE "r"."TableId" = @__tabelId_0 AND "r"."Status" NOT IN ('Cancelled', 'Completed') AND @__dateTime_1 < rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', "r"."ReservationDateTime", CAST(CAST("r"."Duration" AS REAL) AS TEXT) || ' hours'), '0'), '.') AND @__newReservationEnd_2 > "r"."ReservationDateTime")
2025-06-22 00:29:36.990 +02:00 [ERR] Failed executing DbCommand (1ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Reservations" ("CreatedAt", "Duration", "PartySize", "ReservationDateTime", "SpecialRequests", "Status", "TableId", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7)
RETURNING "Id";
2025-06-22 00:29:36.992 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'DineEasy.Infrastructure.Data.DineEasyDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'FOREIGN KEY constraint failed'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'FOREIGN KEY constraint failed'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-06-22 00:29:36.994 +02:00 [ERR] Unexpected error creating reservation for UserId: 1
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'FOREIGN KEY constraint failed'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at DineEasy.Infrastructure.Repositories.UnitOfWork.SaveChangesAsync() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Infrastructure/Repositories/UnitOfWork.cs:line 30
   at DineEasy.Application.Services.ReservationService.CreateAsync(CreateReservationDto dto) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 105
   at DineEasy.WebAPI.Controllers.ReservationsController.Create(CreateReservationDto dto) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.WebAPI/Controllers/ReservationsController.cs:line 132
2025-06-22 00:29:36.996 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 11.4712ms.
2025-06-22 00:29:36.996 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-06-22 00:29:36.996 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI) in 12.995ms
2025-06-22 00:29:36.996 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI)'
2025-06-22 00:29:36.996 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5049/api/reservations - 500 null text/plain; charset=utf-8 14.2661ms
2025-06-22 00:31:19.336 +02:00 [INF] Application is shutting down...
2025-06-22 00:31:22.000 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-22 00:31:22.031 +02:00 [INF] User profile is available. Using '/Users/jakubwalkowicz/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-06-22 00:31:22.060 +02:00 [INF] Now listening on: http://localhost:5049
2025-06-22 00:31:22.061 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-22 00:31:22.062 +02:00 [INF] Hosting environment: Development
2025-06-22 00:31:22.062 +02:00 [INF] Content root path: /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.WebAPI
2025-06-22 00:31:22.100 +02:00 [INF] Application is shutting down...
2025-06-22 00:31:24.603 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-22 00:31:24.643 +02:00 [INF] User profile is available. Using '/Users/jakubwalkowicz/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-06-22 00:31:24.675 +02:00 [INF] Now listening on: http://localhost:5049
2025-06-22 00:31:24.677 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-22 00:31:24.677 +02:00 [INF] Hosting environment: Development
2025-06-22 00:31:24.677 +02:00 [INF] Content root path: /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.WebAPI
2025-06-22 00:31:24.795 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5049/swagger/index.html - null null
2025-06-22 00:31:24.929 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5049/swagger/index.html - 200 null text/html;charset=utf-8 136.5233ms
2025-06-22 00:31:24.987 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5049/swagger/v1/swagger.json - null null
2025-06-22 00:31:25.110 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5049/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 122.4737ms
2025-06-22 00:31:29.613 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5049/api/reservations - null null
2025-06-22 00:31:29.618 +02:00 [WRN] Failed to determine the https port for redirect.
2025-06-22 00:31:29.668 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI)'
2025-06-22 00:31:29.676 +02:00 [INF] Route matched with {action = "GetAll", controller = "Reservations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[DineEasy.SharedKernel.Models.Reservation.ReservationDto]]] GetAll() on controller DineEasy.WebAPI.Controllers.ReservationsController (DineEasy.WebAPI).
2025-06-22 00:31:29.679 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:31:29.681 +02:00 [INF] Getting reservations for user: admin123123
2025-06-22 00:31:29.681 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 1
2025-06-22 00:31:29.681 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin123123
2025-06-22 00:31:29.681 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = admin@dineeasy.com
2025-06-22 00:31:29.681 +02:00 [INF] Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = Admin
2025-06-22 00:31:29.681 +02:00 [INF] Claim: exp = 1750631337
2025-06-22 00:31:29.681 +02:00 [INF] Claim: iss = DineEasy
2025-06-22 00:31:29.681 +02:00 [INF] Claim: aud = DineEasy-Users
2025-06-22 00:31:29.681 +02:00 [INF] User is Admin - returning all reservations
2025-06-22 00:31:29.682 +02:00 [INF] Retrieving all reservations
2025-06-22 00:31:29.814 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Id", "r"."CreatedAt", "r"."Duration", "r"."PartySize", "r"."ReservationDateTime", "r"."SpecialRequests", "r"."Status", "r"."TableId", "r"."UserId"
FROM "Reservations" AS "r"
2025-06-22 00:31:29.820 +02:00 [INF] Successfully retrieved 0 reservations
2025-06-22 00:31:29.822 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 140.447ms.
2025-06-22 00:31:29.826 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DineEasy.SharedKernel.Models.Reservation.ReservationDto, DineEasy.SharedKernel, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-22 00:31:29.846 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI) in 168.23ms
2025-06-22 00:31:29.846 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI)'
2025-06-22 00:31:29.847 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5049/api/reservations - 200 null application/json; charset=utf-8 233.8313ms
2025-06-22 00:31:42.050 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5049/api/reservations - application/json; charset=utf-8 116
2025-06-22 00:31:42.057 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI)'
2025-06-22 00:31:42.070 +02:00 [INF] Route matched with {action = "Create", controller = "Reservations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[DineEasy.SharedKernel.Models.Reservation.ReservationDto]] Create(DineEasy.SharedKernel.Models.Reservation.CreateReservationDto) on controller DineEasy.WebAPI.Controllers.ReservationsController (DineEasy.WebAPI).
2025-06-22 00:31:42.110 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:31:42.111 +02:00 [INF] Creating new reservation for UserId: 1, TableId: 1
2025-06-22 00:31:42.113 +02:00 [INF] Creating reservation: UserId=1, TableId=1, DateTime="2025-06-23T15:00:00.0000000"
2025-06-22 00:31:42.114 +02:00 [INF] Creating new reservation - UserId: 1, TableId: 1, DateTime: "2025-06-23T15:00:00.0000000", Duration: 2, PartySize: 1
2025-06-22 00:31:42.220 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."Email", "u"."PasswordHash", "u"."Role", "u"."Username", "u0"."Id", "u0"."CreatedAt", "u0"."DateOfBirth", "u0"."FirstName", "u0"."LastName", "u0"."PhoneNumber", "u0"."UserId"
FROM "Users" AS "u"
LEFT JOIN "UserProfiles" AS "u0" ON "u"."Id" = "u0"."UserId"
WHERE "u"."Id" = @__id_0
LIMIT 1
2025-06-22 00:31:42.269 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Capacity", "t"."IsActive", "t"."TableNumber"
FROM "Tables" AS "t"
WHERE "t"."Id" = @__p_0
LIMIT 1
2025-06-22 00:31:42.279 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dayOfWeek_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."DayOfWeek", "t"."EndTime", "t"."StartTime"
FROM "TimeSlots" AS "t"
WHERE "t"."DayOfWeek" = @__dayOfWeek_0
LIMIT 1
2025-06-22 00:31:42.310 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__tabelId_0='?' (DbType = Int32), @__dateTime_1='?' (DbType = DateTime), @__newReservationEnd_2='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Reservations" AS "r"
    WHERE "r"."TableId" = @__tabelId_0 AND "r"."Status" NOT IN ('Cancelled', 'Completed') AND @__dateTime_1 < rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', "r"."ReservationDateTime", CAST(CAST("r"."Duration" AS REAL) AS TEXT) || ' hours'), '0'), '.') AND @__newReservationEnd_2 > "r"."ReservationDateTime")
2025-06-22 00:31:42.406 +02:00 [ERR] Failed executing DbCommand (2ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Reservations" ("CreatedAt", "Duration", "PartySize", "ReservationDateTime", "SpecialRequests", "Status", "TableId", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7)
RETURNING "Id";
2025-06-22 00:31:42.425 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'DineEasy.Infrastructure.Data.DineEasyDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'FOREIGN KEY constraint failed'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'FOREIGN KEY constraint failed'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-06-22 00:31:42.426 +02:00 [ERR] Unexpected error creating reservation for UserId: 1
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'FOREIGN KEY constraint failed'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at DineEasy.Infrastructure.Repositories.UnitOfWork.SaveChangesAsync() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Infrastructure/Repositories/UnitOfWork.cs:line 30
   at DineEasy.Application.Services.ReservationService.CreateAsync(CreateReservationDto dto) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 107
   at DineEasy.WebAPI.Controllers.ReservationsController.Create(CreateReservationDto dto) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.WebAPI/Controllers/ReservationsController.cs:line 132
2025-06-22 00:31:42.429 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 318.781ms.
2025-06-22 00:31:42.429 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-06-22 00:31:42.429 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI) in 358.748ms
2025-06-22 00:31:42.429 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI)'
2025-06-22 00:31:42.429 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5049/api/reservations - 500 null text/plain; charset=utf-8 379.0792ms
2025-06-22 00:34:23.435 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5049/api/reservations - application/json; charset=utf-8 116
2025-06-22 00:34:23.443 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI)'
2025-06-22 00:34:23.444 +02:00 [INF] Route matched with {action = "Create", controller = "Reservations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[DineEasy.SharedKernel.Models.Reservation.ReservationDto]] Create(DineEasy.SharedKernel.Models.Reservation.CreateReservationDto) on controller DineEasy.WebAPI.Controllers.ReservationsController (DineEasy.WebAPI).
2025-06-22 00:34:23.451 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:34:23.451 +02:00 [INF] Creating new reservation for UserId: 1, TableId: 1
2025-06-22 00:34:23.451 +02:00 [INF] Creating reservation: UserId=1, TableId=1, DateTime="2025-06-23T15:00:00.0000000"
2025-06-22 00:34:23.451 +02:00 [INF] Creating new reservation - UserId: 1, TableId: 1, DateTime: "2025-06-23T15:00:00.0000000", Duration: 2, PartySize: 1
2025-06-22 00:34:23.460 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."Email", "u"."PasswordHash", "u"."Role", "u"."Username", "u0"."Id", "u0"."CreatedAt", "u0"."DateOfBirth", "u0"."FirstName", "u0"."LastName", "u0"."PhoneNumber", "u0"."UserId"
FROM "Users" AS "u"
LEFT JOIN "UserProfiles" AS "u0" ON "u"."Id" = "u0"."UserId"
WHERE "u"."Id" = @__id_0
LIMIT 1
2025-06-22 00:34:23.462 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Capacity", "t"."IsActive", "t"."TableNumber"
FROM "Tables" AS "t"
WHERE "t"."Id" = @__p_0
LIMIT 1
2025-06-22 00:34:23.463 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__dayOfWeek_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."DayOfWeek", "t"."EndTime", "t"."StartTime"
FROM "TimeSlots" AS "t"
WHERE "t"."DayOfWeek" = @__dayOfWeek_0
LIMIT 1
2025-06-22 00:34:23.464 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__tabelId_0='?' (DbType = Int32), @__dateTime_1='?' (DbType = DateTime), @__newReservationEnd_2='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Reservations" AS "r"
    WHERE "r"."TableId" = @__tabelId_0 AND "r"."Status" NOT IN ('Cancelled', 'Completed') AND @__dateTime_1 < rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', "r"."ReservationDateTime", CAST(CAST("r"."Duration" AS REAL) AS TEXT) || ' hours'), '0'), '.') AND @__newReservationEnd_2 > "r"."ReservationDateTime")
2025-06-22 00:34:23.470 +02:00 [ERR] Failed executing DbCommand (1ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Reservations" ("CreatedAt", "Duration", "PartySize", "ReservationDateTime", "SpecialRequests", "Status", "TableId", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7)
RETURNING "Id";
2025-06-22 00:34:23.472 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'DineEasy.Infrastructure.Data.DineEasyDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'FOREIGN KEY constraint failed'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'FOREIGN KEY constraint failed'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-06-22 00:34:23.473 +02:00 [ERR] Unexpected error creating reservation for UserId: 1
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'FOREIGN KEY constraint failed'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at DineEasy.Infrastructure.Repositories.UnitOfWork.SaveChangesAsync() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Infrastructure/Repositories/UnitOfWork.cs:line 30
   at DineEasy.Application.Services.ReservationService.CreateAsync(CreateReservationDto dto) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 107
   at DineEasy.WebAPI.Controllers.ReservationsController.Create(CreateReservationDto dto) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.WebAPI/Controllers/ReservationsController.cs:line 132
2025-06-22 00:34:23.475 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 23.8085ms.
2025-06-22 00:34:23.475 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-06-22 00:34:23.475 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI) in 31.6198ms
2025-06-22 00:34:23.475 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI)'
2025-06-22 00:34:23.475 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5049/api/reservations - 500 null text/plain; charset=utf-8 40.3378ms
2025-06-22 00:37:26.522 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5049/api/auth/login - application/json; charset=utf-8 null
2025-06-22 00:37:26.523 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI)'
2025-06-22 00:37:26.524 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[DineEasy.SharedKernel.Models.Auth.AuthResponseDto]] Login(DineEasy.SharedKernel.Models.Auth.LoginDto) on controller DineEasy.WebAPI.Controllers.AuthController (DineEasy.WebAPI).
2025-06-22 00:37:26.530 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:37:26.531 +02:00 [INF] Login attempt for email: admin@dineeasy.com
2025-06-22 00:37:26.532 +02:00 [INF] Login attempt for email: admin@dineeasy.com
2025-06-22 00:37:26.535 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__email_0='?' (Size = 18)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."Email", "u"."PasswordHash", "u"."Role", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."Email" = @__email_0
LIMIT 1
2025-06-22 00:37:26.683 +02:00 [INF] Successful login for user: admin123123
2025-06-22 00:37:26.684 +02:00 [INF] Successful login for user: admin123123
2025-06-22 00:37:26.684 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 153.565ms.
2025-06-22 00:37:26.684 +02:00 [INF] Executing OkObjectResult, writing value of type 'DineEasy.SharedKernel.Models.Auth.AuthResponseDto'.
2025-06-22 00:37:26.686 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI) in 161.0929ms
2025-06-22 00:37:26.686 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI)'
2025-06-22 00:37:26.686 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5049/api/auth/login - 200 null application/json; charset=utf-8 163.625ms
2025-06-22 00:37:28.222 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5049/api/reservations - null null
2025-06-22 00:37:28.223 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI)'
2025-06-22 00:37:28.223 +02:00 [INF] Route matched with {action = "GetAll", controller = "Reservations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[DineEasy.SharedKernel.Models.Reservation.ReservationDto]]] GetAll() on controller DineEasy.WebAPI.Controllers.ReservationsController (DineEasy.WebAPI).
2025-06-22 00:37:28.224 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:37:28.224 +02:00 [INF] Getting reservations for user: admin123123
2025-06-22 00:37:28.224 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 1
2025-06-22 00:37:28.224 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin123123
2025-06-22 00:37:28.224 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = admin@dineeasy.com
2025-06-22 00:37:28.225 +02:00 [INF] Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = Admin
2025-06-22 00:37:28.225 +02:00 [INF] Claim: exp = 1750631846
2025-06-22 00:37:28.225 +02:00 [INF] Claim: iss = DineEasy
2025-06-22 00:37:28.225 +02:00 [INF] Claim: aud = DineEasy-Users
2025-06-22 00:37:28.225 +02:00 [INF] User is Admin - returning all reservations
2025-06-22 00:37:28.225 +02:00 [INF] Retrieving all reservations
2025-06-22 00:37:28.226 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Id", "r"."CreatedAt", "r"."Duration", "r"."PartySize", "r"."ReservationDateTime", "r"."SpecialRequests", "r"."Status", "r"."TableId", "r"."UserId"
FROM "Reservations" AS "r"
2025-06-22 00:37:28.227 +02:00 [INF] Successfully retrieved 0 reservations
2025-06-22 00:37:28.227 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 3.2397ms.
2025-06-22 00:37:28.228 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DineEasy.SharedKernel.Models.Reservation.ReservationDto, DineEasy.SharedKernel, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-22 00:37:28.228 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI) in 4.5365ms
2025-06-22 00:37:28.228 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI)'
2025-06-22 00:37:28.228 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5049/api/reservations - 200 null application/json; charset=utf-8 6.2953ms
2025-06-22 00:37:40.630 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5049/api/reservations - application/json; charset=utf-8 116
2025-06-22 00:37:40.631 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI)'
2025-06-22 00:37:40.631 +02:00 [INF] Route matched with {action = "Create", controller = "Reservations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[DineEasy.SharedKernel.Models.Reservation.ReservationDto]] Create(DineEasy.SharedKernel.Models.Reservation.CreateReservationDto) on controller DineEasy.WebAPI.Controllers.ReservationsController (DineEasy.WebAPI).
2025-06-22 00:37:40.633 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:37:40.634 +02:00 [INF] Creating new reservation for UserId: 1, TableId: 1
2025-06-22 00:37:40.634 +02:00 [INF] Creating reservation: UserId=1, TableId=1, DateTime="2025-06-23T14:00:00.0000000"
2025-06-22 00:37:40.634 +02:00 [INF] Creating new reservation - UserId: 1, TableId: 1, DateTime: "2025-06-23T14:00:00.0000000", Duration: 1, PartySize: 1
2025-06-22 00:37:40.636 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."Email", "u"."PasswordHash", "u"."Role", "u"."Username", "u0"."Id", "u0"."CreatedAt", "u0"."DateOfBirth", "u0"."FirstName", "u0"."LastName", "u0"."PhoneNumber", "u0"."UserId"
FROM "Users" AS "u"
LEFT JOIN "UserProfiles" AS "u0" ON "u"."Id" = "u0"."UserId"
WHERE "u"."Id" = @__id_0
LIMIT 1
2025-06-22 00:37:40.637 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Capacity", "t"."IsActive", "t"."TableNumber"
FROM "Tables" AS "t"
WHERE "t"."Id" = @__p_0
LIMIT 1
2025-06-22 00:37:40.639 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__dayOfWeek_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."DayOfWeek", "t"."EndTime", "t"."StartTime"
FROM "TimeSlots" AS "t"
WHERE "t"."DayOfWeek" = @__dayOfWeek_0
LIMIT 1
2025-06-22 00:37:40.639 +02:00 [WRN] Reservation creation failed - Requested time "14:00:00.0000000"-"15:00:00.0000000" falls outside available slot "15:00:00.0000000"-"19:00:00.0000000" on "Monday"
2025-06-22 00:37:40.643 +02:00 [ERR] Unexpected error creating reservation for UserId: 1
DineEasy.Application.Exceptions.ReservationHoursOutOfBoundException: Reservation falls out of available time slot!
   at DineEasy.Application.Services.ReservationService.CreateAsync(CreateReservationDto dto) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 85
   at DineEasy.WebAPI.Controllers.ReservationsController.Create(CreateReservationDto dto) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.WebAPI/Controllers/ReservationsController.cs:line 132
2025-06-22 00:37:40.643 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 10.3131ms.
2025-06-22 00:37:40.643 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-06-22 00:37:40.643 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI) in 12.4863ms
2025-06-22 00:37:40.643 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI)'
2025-06-22 00:37:40.644 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5049/api/reservations - 500 null text/plain; charset=utf-8 13.9397ms
2025-06-22 00:38:00.293 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5049/api/reservations - application/json; charset=utf-8 116
2025-06-22 00:38:00.294 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI)'
2025-06-22 00:38:00.294 +02:00 [INF] Route matched with {action = "Create", controller = "Reservations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[DineEasy.SharedKernel.Models.Reservation.ReservationDto]] Create(DineEasy.SharedKernel.Models.Reservation.CreateReservationDto) on controller DineEasy.WebAPI.Controllers.ReservationsController (DineEasy.WebAPI).
2025-06-22 00:38:00.296 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:38:00.296 +02:00 [INF] Creating new reservation for UserId: 1, TableId: 1
2025-06-22 00:38:00.296 +02:00 [INF] Creating reservation: UserId=1, TableId=1, DateTime="2025-06-23T15:00:00.0000000"
2025-06-22 00:38:00.296 +02:00 [INF] Creating new reservation - UserId: 1, TableId: 1, DateTime: "2025-06-23T15:00:00.0000000", Duration: 1, PartySize: 1
2025-06-22 00:38:00.299 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."Email", "u"."PasswordHash", "u"."Role", "u"."Username", "u0"."Id", "u0"."CreatedAt", "u0"."DateOfBirth", "u0"."FirstName", "u0"."LastName", "u0"."PhoneNumber", "u0"."UserId"
FROM "Users" AS "u"
LEFT JOIN "UserProfiles" AS "u0" ON "u"."Id" = "u0"."UserId"
WHERE "u"."Id" = @__id_0
LIMIT 1
2025-06-22 00:38:00.300 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Capacity", "t"."IsActive", "t"."TableNumber"
FROM "Tables" AS "t"
WHERE "t"."Id" = @__p_0
LIMIT 1
2025-06-22 00:38:00.302 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__dayOfWeek_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."DayOfWeek", "t"."EndTime", "t"."StartTime"
FROM "TimeSlots" AS "t"
WHERE "t"."DayOfWeek" = @__dayOfWeek_0
LIMIT 1
2025-06-22 00:38:00.304 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__tabelId_0='?' (DbType = Int32), @__dateTime_1='?' (DbType = DateTime), @__newReservationEnd_2='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Reservations" AS "r"
    WHERE "r"."TableId" = @__tabelId_0 AND "r"."Status" NOT IN ('Cancelled', 'Completed') AND @__dateTime_1 < rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', "r"."ReservationDateTime", CAST(CAST("r"."Duration" AS REAL) AS TEXT) || ' hours'), '0'), '.') AND @__newReservationEnd_2 > "r"."ReservationDateTime")
2025-06-22 00:38:00.306 +02:00 [ERR] Failed executing DbCommand (1ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Reservations" ("CreatedAt", "Duration", "PartySize", "ReservationDateTime", "SpecialRequests", "Status", "TableId", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7)
RETURNING "Id";
2025-06-22 00:38:00.308 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'DineEasy.Infrastructure.Data.DineEasyDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'FOREIGN KEY constraint failed'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'FOREIGN KEY constraint failed'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-06-22 00:38:00.310 +02:00 [ERR] Unexpected error creating reservation for UserId: 1
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'FOREIGN KEY constraint failed'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at DineEasy.Infrastructure.Repositories.UnitOfWork.SaveChangesAsync() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Infrastructure/Repositories/UnitOfWork.cs:line 30
   at DineEasy.Application.Services.ReservationService.CreateAsync(CreateReservationDto dto) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 107
   at DineEasy.WebAPI.Controllers.ReservationsController.Create(CreateReservationDto dto) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.WebAPI/Controllers/ReservationsController.cs:line 132
2025-06-22 00:38:00.313 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 16.4868ms.
2025-06-22 00:38:00.313 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-06-22 00:38:00.313 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI) in 18.7023ms
2025-06-22 00:38:00.313 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI)'
2025-06-22 00:38:00.313 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5049/api/reservations - 500 null text/plain; charset=utf-8 20.2001ms
2025-06-22 00:38:18.357 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5049/api/reservations - application/json; charset=utf-8 116
2025-06-22 00:38:18.357 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI)'
2025-06-22 00:38:18.358 +02:00 [INF] Route matched with {action = "Create", controller = "Reservations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[DineEasy.SharedKernel.Models.Reservation.ReservationDto]] Create(DineEasy.SharedKernel.Models.Reservation.CreateReservationDto) on controller DineEasy.WebAPI.Controllers.ReservationsController (DineEasy.WebAPI).
2025-06-22 00:38:18.358 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:38:18.358 +02:00 [INF] Creating new reservation for UserId: 1, TableId: 1
2025-06-22 00:38:18.359 +02:00 [INF] Creating reservation: UserId=1, TableId=1, DateTime="2025-06-23T15:00:00.0000000"
2025-06-22 00:38:18.359 +02:00 [INF] Creating new reservation - UserId: 1, TableId: 1, DateTime: "2025-06-23T15:00:00.0000000", Duration: 1, PartySize: 1
2025-06-22 00:38:18.360 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."Email", "u"."PasswordHash", "u"."Role", "u"."Username", "u0"."Id", "u0"."CreatedAt", "u0"."DateOfBirth", "u0"."FirstName", "u0"."LastName", "u0"."PhoneNumber", "u0"."UserId"
FROM "Users" AS "u"
LEFT JOIN "UserProfiles" AS "u0" ON "u"."Id" = "u0"."UserId"
WHERE "u"."Id" = @__id_0
LIMIT 1
2025-06-22 00:38:18.364 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Capacity", "t"."IsActive", "t"."TableNumber"
FROM "Tables" AS "t"
WHERE "t"."Id" = @__p_0
LIMIT 1
2025-06-22 00:38:18.367 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__dayOfWeek_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."DayOfWeek", "t"."EndTime", "t"."StartTime"
FROM "TimeSlots" AS "t"
WHERE "t"."DayOfWeek" = @__dayOfWeek_0
LIMIT 1
2025-06-22 00:38:18.368 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__tabelId_0='?' (DbType = Int32), @__dateTime_1='?' (DbType = DateTime), @__newReservationEnd_2='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Reservations" AS "r"
    WHERE "r"."TableId" = @__tabelId_0 AND "r"."Status" NOT IN ('Cancelled', 'Completed') AND @__dateTime_1 < rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', "r"."ReservationDateTime", CAST(CAST("r"."Duration" AS REAL) AS TEXT) || ' hours'), '0'), '.') AND @__newReservationEnd_2 > "r"."ReservationDateTime")
2025-06-22 00:38:18.372 +02:00 [ERR] Failed executing DbCommand (1ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Reservations" ("CreatedAt", "Duration", "PartySize", "ReservationDateTime", "SpecialRequests", "Status", "TableId", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7)
RETURNING "Id";
2025-06-22 00:38:18.373 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'DineEasy.Infrastructure.Data.DineEasyDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'FOREIGN KEY constraint failed'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'FOREIGN KEY constraint failed'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-06-22 00:38:18.373 +02:00 [ERR] Unexpected error creating reservation for UserId: 1
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'FOREIGN KEY constraint failed'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at DineEasy.Infrastructure.Repositories.UnitOfWork.SaveChangesAsync() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Infrastructure/Repositories/UnitOfWork.cs:line 30
   at DineEasy.Application.Services.ReservationService.CreateAsync(CreateReservationDto dto) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 107
   at DineEasy.WebAPI.Controllers.ReservationsController.Create(CreateReservationDto dto) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.WebAPI/Controllers/ReservationsController.cs:line 132
2025-06-22 00:38:18.374 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 15.9749ms.
2025-06-22 00:38:18.375 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-06-22 00:38:18.375 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI) in 17.0003ms
2025-06-22 00:38:18.375 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI)'
2025-06-22 00:38:18.375 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5049/api/reservations - 500 null text/plain; charset=utf-8 18.1412ms
2025-06-22 00:38:31.276 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5049/api/reservations - application/json; charset=utf-8 116
2025-06-22 00:38:31.277 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI)'
2025-06-22 00:38:31.277 +02:00 [INF] Route matched with {action = "Create", controller = "Reservations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[DineEasy.SharedKernel.Models.Reservation.ReservationDto]] Create(DineEasy.SharedKernel.Models.Reservation.CreateReservationDto) on controller DineEasy.WebAPI.Controllers.ReservationsController (DineEasy.WebAPI).
2025-06-22 00:38:31.279 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:38:31.279 +02:00 [INF] Creating new reservation for UserId: 1, TableId: 1
2025-06-22 00:38:31.279 +02:00 [INF] Creating reservation: UserId=1, TableId=1, DateTime="2025-06-23T15:00:00.0000000"
2025-06-22 00:38:31.279 +02:00 [INF] Creating new reservation - UserId: 1, TableId: 1, DateTime: "2025-06-23T15:00:00.0000000", Duration: 1, PartySize: 1
2025-06-22 00:38:31.281 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."Email", "u"."PasswordHash", "u"."Role", "u"."Username", "u0"."Id", "u0"."CreatedAt", "u0"."DateOfBirth", "u0"."FirstName", "u0"."LastName", "u0"."PhoneNumber", "u0"."UserId"
FROM "Users" AS "u"
LEFT JOIN "UserProfiles" AS "u0" ON "u"."Id" = "u0"."UserId"
WHERE "u"."Id" = @__id_0
LIMIT 1
2025-06-22 00:38:31.283 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Capacity", "t"."IsActive", "t"."TableNumber"
FROM "Tables" AS "t"
WHERE "t"."Id" = @__p_0
LIMIT 1
2025-06-22 00:38:31.284 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__dayOfWeek_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."DayOfWeek", "t"."EndTime", "t"."StartTime"
FROM "TimeSlots" AS "t"
WHERE "t"."DayOfWeek" = @__dayOfWeek_0
LIMIT 1
2025-06-22 00:38:31.286 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__tabelId_0='?' (DbType = Int32), @__dateTime_1='?' (DbType = DateTime), @__newReservationEnd_2='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Reservations" AS "r"
    WHERE "r"."TableId" = @__tabelId_0 AND "r"."Status" NOT IN ('Cancelled', 'Completed') AND @__dateTime_1 < rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', "r"."ReservationDateTime", CAST(CAST("r"."Duration" AS REAL) AS TEXT) || ' hours'), '0'), '.') AND @__newReservationEnd_2 > "r"."ReservationDateTime")
2025-06-22 00:38:31.288 +02:00 [ERR] Failed executing DbCommand (1ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime), @p4='?', @p5='?' (Size = 7), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Reservations" ("CreatedAt", "Duration", "PartySize", "ReservationDateTime", "SpecialRequests", "Status", "TableId", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7)
RETURNING "Id";
2025-06-22 00:38:31.290 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'DineEasy.Infrastructure.Data.DineEasyDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'FOREIGN KEY constraint failed'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'FOREIGN KEY constraint failed'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-06-22 00:38:31.292 +02:00 [ERR] Unexpected error creating reservation for UserId: 1
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'FOREIGN KEY constraint failed'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at DineEasy.Infrastructure.Repositories.UnitOfWork.SaveChangesAsync() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Infrastructure/Repositories/UnitOfWork.cs:line 30
   at DineEasy.Application.Services.ReservationService.CreateAsync(CreateReservationDto dto) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 107
   at DineEasy.WebAPI.Controllers.ReservationsController.Create(CreateReservationDto dto) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.WebAPI/Controllers/ReservationsController.cs:line 132
2025-06-22 00:38:31.294 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 15.2106ms.
2025-06-22 00:38:31.295 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-06-22 00:38:31.295 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI) in 17.3375ms
2025-06-22 00:38:31.295 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI)'
2025-06-22 00:38:31.295 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5049/api/reservations - 500 null text/plain; charset=utf-8 19.6337ms
2025-06-22 00:38:47.535 +02:00 [INF] Application is shutting down...
2025-06-22 00:38:51.886 +02:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-06-22 00:38:52.082 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-22 00:38:52.098 +02:00 [INF] User profile is available. Using '/Users/jakubwalkowicz/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-06-22 00:38:52.130 +02:00 [INF] Now listening on: http://localhost:5049
2025-06-22 00:38:52.132 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-22 00:38:52.132 +02:00 [INF] Hosting environment: Development
2025-06-22 00:38:52.132 +02:00 [INF] Content root path: /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.WebAPI
2025-06-22 00:38:52.593 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5049/swagger/index.html - null null
2025-06-22 00:38:52.691 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5049/swagger/index.html - 200 null text/html;charset=utf-8 98.8831ms
2025-06-22 00:38:52.740 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5049/swagger/v1/swagger.json - null null
2025-06-22 00:38:52.849 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5049/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 109.5192ms
2025-06-22 00:38:59.090 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5049/api/auth/login - application/json; charset=utf-8 null
2025-06-22 00:38:59.093 +02:00 [WRN] Failed to determine the https port for redirect.
2025-06-22 00:38:59.114 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI)'
2025-06-22 00:38:59.126 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[DineEasy.SharedKernel.Models.Auth.AuthResponseDto]] Login(DineEasy.SharedKernel.Models.Auth.LoginDto) on controller DineEasy.WebAPI.Controllers.AuthController (DineEasy.WebAPI).
2025-06-22 00:38:59.155 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:38:59.156 +02:00 [INF] Login attempt for email: admin@dineeasy.com
2025-06-22 00:38:59.156 +02:00 [INF] Login attempt for email: admin@dineeasy.com
2025-06-22 00:38:59.329 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__email_0='admin@dineeasy.com' (Size = 18)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."Email", "u"."PasswordHash", "u"."Role", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."Email" = @__email_0
LIMIT 1
2025-06-22 00:38:59.518 +02:00 [INF] Successful login for user: admin123123
2025-06-22 00:38:59.518 +02:00 [INF] Successful login for user: admin123123
2025-06-22 00:38:59.520 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 363.288ms.
2025-06-22 00:38:59.523 +02:00 [INF] Executing OkObjectResult, writing value of type 'DineEasy.SharedKernel.Models.Auth.AuthResponseDto'.
2025-06-22 00:38:59.530 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI) in 402.531ms
2025-06-22 00:38:59.531 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI)'
2025-06-22 00:38:59.531 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5049/api/auth/login - 200 null application/json; charset=utf-8 440.8ms
2025-06-22 00:39:00.536 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5049/api/reservations - null null
2025-06-22 00:39:00.572 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI)'
2025-06-22 00:39:00.575 +02:00 [INF] Route matched with {action = "GetAll", controller = "Reservations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[DineEasy.SharedKernel.Models.Reservation.ReservationDto]]] GetAll() on controller DineEasy.WebAPI.Controllers.ReservationsController (DineEasy.WebAPI).
2025-06-22 00:39:00.576 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:39:00.577 +02:00 [INF] Getting reservations for user: admin123123
2025-06-22 00:39:00.577 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 1
2025-06-22 00:39:00.577 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin123123
2025-06-22 00:39:00.577 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = admin@dineeasy.com
2025-06-22 00:39:00.577 +02:00 [INF] Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = Admin
2025-06-22 00:39:00.577 +02:00 [INF] Claim: exp = 1750631939
2025-06-22 00:39:00.577 +02:00 [INF] Claim: iss = DineEasy
2025-06-22 00:39:00.577 +02:00 [INF] Claim: aud = DineEasy-Users
2025-06-22 00:39:00.577 +02:00 [INF] User is Admin - returning all reservations
2025-06-22 00:39:00.578 +02:00 [INF] Retrieving all reservations
2025-06-22 00:39:00.604 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Id", "r"."CreatedAt", "r"."Duration", "r"."PartySize", "r"."ReservationDateTime", "r"."SpecialRequests", "r"."Status", "r"."TableId", "r"."UserId"
FROM "Reservations" AS "r"
2025-06-22 00:39:00.605 +02:00 [INF] Successfully retrieved 0 reservations
2025-06-22 00:39:00.605 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 29.0771ms.
2025-06-22 00:39:00.605 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DineEasy.SharedKernel.Models.Reservation.ReservationDto, DineEasy.SharedKernel, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-22 00:39:00.612 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI) in 36.9167ms
2025-06-22 00:39:00.612 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI)'
2025-06-22 00:39:00.612 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5049/api/reservations - 200 null application/json; charset=utf-8 76.4054ms
2025-06-22 00:39:10.467 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5049/api/reservations - application/json; charset=utf-8 116
2025-06-22 00:39:10.476 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI)'
2025-06-22 00:39:10.481 +02:00 [INF] Route matched with {action = "Create", controller = "Reservations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[DineEasy.SharedKernel.Models.Reservation.ReservationDto]] Create(DineEasy.SharedKernel.Models.Reservation.CreateReservationDto) on controller DineEasy.WebAPI.Controllers.ReservationsController (DineEasy.WebAPI).
2025-06-22 00:39:10.500 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:39:10.501 +02:00 [INF] Creating new reservation for UserId: 1, TableId: 1
2025-06-22 00:39:10.505 +02:00 [INF] Creating new reservation - UserId: 1, TableId: 1, DateTime: "2025-06-23T15:00:00.0000000", Duration: 2, PartySize: 1
2025-06-22 00:39:10.553 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."Email", "u"."PasswordHash", "u"."Role", "u"."Username", "u0"."Id", "u0"."CreatedAt", "u0"."DateOfBirth", "u0"."FirstName", "u0"."LastName", "u0"."PhoneNumber", "u0"."UserId"
FROM "Users" AS "u"
LEFT JOIN "UserProfiles" AS "u0" ON "u"."Id" = "u0"."UserId"
WHERE "u"."Id" = @__id_0
LIMIT 1
2025-06-22 00:39:10.578 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Capacity", "t"."IsActive", "t"."TableNumber"
FROM "Tables" AS "t"
WHERE "t"."Id" = @__p_0
LIMIT 1
2025-06-22 00:39:10.587 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__dayOfWeek_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."DayOfWeek", "t"."EndTime", "t"."StartTime"
FROM "TimeSlots" AS "t"
WHERE "t"."DayOfWeek" = @__dayOfWeek_0
LIMIT 1
2025-06-22 00:39:10.616 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__tabelId_0='1', @__dateTime_1='2025-06-23T15:00:00.0000000' (DbType = DateTime), @__newReservationEnd_2='2025-06-23T17:00:00.0000000' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Reservations" AS "r"
    WHERE "r"."TableId" = @__tabelId_0 AND "r"."Status" NOT IN ('Cancelled', 'Completed') AND @__dateTime_1 < rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', "r"."ReservationDateTime", CAST(CAST("r"."Duration" AS REAL) AS TEXT) || ' hours'), '0'), '.') AND @__newReservationEnd_2 > "r"."ReservationDateTime")
2025-06-22 00:39:10.713 +02:00 [ERR] Failed executing DbCommand (2ms) [Parameters=[@p0='2025-06-21T22:39:10.6174090Z' (DbType = DateTime), @p1='2', @p2='1', @p3='2025-06-23T15:00:00.0000000' (DbType = DateTime), @p4='', @p5='Pending' (Nullable = false) (Size = 7), @p6='1', @p7='0'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Reservations" ("CreatedAt", "Duration", "PartySize", "ReservationDateTime", "SpecialRequests", "Status", "TableId", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7)
RETURNING "Id";
2025-06-22 00:39:10.731 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'DineEasy.Infrastructure.Data.DineEasyDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'FOREIGN KEY constraint failed'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'FOREIGN KEY constraint failed'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-06-22 00:39:10.733 +02:00 [ERR] Unexpected error creating reservation for UserId: 1
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'FOREIGN KEY constraint failed'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at DineEasy.Infrastructure.Repositories.UnitOfWork.SaveChangesAsync() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Infrastructure/Repositories/UnitOfWork.cs:line 30
   at DineEasy.Application.Services.ReservationService.CreateAsync(CreateReservationDto dto) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 105
   at DineEasy.WebAPI.Controllers.ReservationsController.Create(CreateReservationDto dto) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.WebAPI/Controllers/ReservationsController.cs:line 132
2025-06-22 00:39:10.737 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 237.2098ms.
2025-06-22 00:39:10.737 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-06-22 00:39:10.737 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI) in 255.7622ms
2025-06-22 00:39:10.737 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI)'
2025-06-22 00:39:10.737 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5049/api/reservations - 500 null text/plain; charset=utf-8 270.4588ms
2025-06-22 00:42:10.220 +02:00 [INF] Application is shutting down...
2025-06-22 00:42:12.435 +02:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-06-22 00:42:12.593 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-22 00:42:12.607 +02:00 [INF] User profile is available. Using '/Users/jakubwalkowicz/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-06-22 00:42:12.631 +02:00 [INF] Now listening on: http://localhost:5049
2025-06-22 00:42:12.633 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-22 00:42:12.633 +02:00 [INF] Hosting environment: Development
2025-06-22 00:42:12.633 +02:00 [INF] Content root path: /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.WebAPI
2025-06-22 00:42:12.994 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5049/swagger/index.html - null null
2025-06-22 00:42:13.085 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5049/swagger/index.html - 200 null text/html;charset=utf-8 92.0495ms
2025-06-22 00:42:13.131 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5049/swagger/v1/swagger.json - null null
2025-06-22 00:42:13.221 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5049/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 90.7944ms
2025-06-22 00:42:16.093 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5049/api/reservations - null null
2025-06-22 00:42:16.096 +02:00 [WRN] Failed to determine the https port for redirect.
2025-06-22 00:42:16.150 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI)'
2025-06-22 00:42:16.159 +02:00 [INF] Route matched with {action = "GetAll", controller = "Reservations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[DineEasy.SharedKernel.Models.Reservation.ReservationDto]]] GetAll() on controller DineEasy.WebAPI.Controllers.ReservationsController (DineEasy.WebAPI).
2025-06-22 00:42:16.162 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:42:16.164 +02:00 [INF] Getting reservations for user: admin123123
2025-06-22 00:42:16.164 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 1
2025-06-22 00:42:16.164 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin123123
2025-06-22 00:42:16.164 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = admin@dineeasy.com
2025-06-22 00:42:16.164 +02:00 [INF] Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = Admin
2025-06-22 00:42:16.164 +02:00 [INF] Claim: exp = 1750631939
2025-06-22 00:42:16.164 +02:00 [INF] Claim: iss = DineEasy
2025-06-22 00:42:16.164 +02:00 [INF] Claim: aud = DineEasy-Users
2025-06-22 00:42:16.164 +02:00 [INF] User is Admin - returning all reservations
2025-06-22 00:42:16.164 +02:00 [INF] Retrieving all reservations
2025-06-22 00:42:16.287 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Id", "r"."CreatedAt", "r"."Duration", "r"."PartySize", "r"."ReservationDateTime", "r"."SpecialRequests", "r"."Status", "r"."TableId", "r"."UserId"
FROM "Reservations" AS "r"
2025-06-22 00:42:16.292 +02:00 [INF] Successfully retrieved 0 reservations
2025-06-22 00:42:16.294 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 130.3579ms.
2025-06-22 00:42:16.298 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DineEasy.SharedKernel.Models.Reservation.ReservationDto, DineEasy.SharedKernel, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-22 00:42:16.317 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI) in 156.651ms
2025-06-22 00:42:16.317 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI)'
2025-06-22 00:42:16.318 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5049/api/reservations - 200 null application/json; charset=utf-8 224.3339ms
2025-06-22 00:42:26.338 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5049/api/reservations - application/json; charset=utf-8 116
2025-06-22 00:42:26.347 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI)'
2025-06-22 00:42:26.362 +02:00 [INF] Route matched with {action = "Create", controller = "Reservations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[DineEasy.SharedKernel.Models.Reservation.ReservationDto]] Create(DineEasy.SharedKernel.Models.Reservation.CreateReservationDto) on controller DineEasy.WebAPI.Controllers.ReservationsController (DineEasy.WebAPI).
2025-06-22 00:42:26.402 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:42:26.403 +02:00 [INF] Creating new reservation for UserId: 1, TableId: 1
2025-06-22 00:42:26.405 +02:00 [INF] Creating new reservation - UserId: 1, TableId: 1, DateTime: "2025-06-23T15:59:00.0000000", Duration: 2, PartySize: 1
2025-06-22 00:42:26.515 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."Email", "u"."PasswordHash", "u"."Role", "u"."Username", "u0"."Id", "u0"."CreatedAt", "u0"."DateOfBirth", "u0"."FirstName", "u0"."LastName", "u0"."PhoneNumber", "u0"."UserId"
FROM "Users" AS "u"
LEFT JOIN "UserProfiles" AS "u0" ON "u"."Id" = "u0"."UserId"
WHERE "u"."Id" = @__id_0
LIMIT 1
2025-06-22 00:42:26.567 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Capacity", "t"."IsActive", "t"."TableNumber"
FROM "Tables" AS "t"
WHERE "t"."Id" = @__p_0
LIMIT 1
2025-06-22 00:42:26.576 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__dayOfWeek_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."DayOfWeek", "t"."EndTime", "t"."StartTime"
FROM "TimeSlots" AS "t"
WHERE "t"."DayOfWeek" = @__dayOfWeek_0
LIMIT 1
2025-06-22 00:42:26.607 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__tabelId_0='1', @__dateTime_1='2025-06-23T15:59:00.0000000' (DbType = DateTime), @__newReservationEnd_2='2025-06-23T17:59:00.0000000' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Reservations" AS "r"
    WHERE "r"."TableId" = @__tabelId_0 AND "r"."Status" NOT IN ('Cancelled', 'Completed') AND @__dateTime_1 < rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', "r"."ReservationDateTime", CAST(CAST("r"."Duration" AS REAL) AS TEXT) || ' hours'), '0'), '.') AND @__newReservationEnd_2 > "r"."ReservationDateTime")
2025-06-22 00:42:26.701 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='2025-06-21T22:42:26.6084190Z' (DbType = DateTime), @p1='2', @p2='1', @p3='2025-06-23T15:59:00.0000000' (DbType = DateTime), @p4='', @p5='Pending' (Nullable = false) (Size = 7), @p6='1', @p7='1'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Reservations" ("CreatedAt", "Duration", "PartySize", "ReservationDateTime", "SpecialRequests", "Status", "TableId", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7)
RETURNING "Id";
2025-06-22 00:42:26.715 +02:00 [INF] Reservation created successfully - ID: 1, User: 1, Table: 1, DateTime: "2025-06-23T15:59:00.0000000"
2025-06-22 00:42:26.716 +02:00 [INF] Successfully created reservation with ID: 1
2025-06-22 00:42:26.716 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.CreatedAtActionResult in 313.4655ms.
2025-06-22 00:42:26.716 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'DineEasy.SharedKernel.Models.Reservation.ReservationDto'.
2025-06-22 00:42:26.726 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI) in 364.2345ms
2025-06-22 00:42:26.726 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI)'
2025-06-22 00:42:26.726 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5049/api/reservations - 201 null application/json; charset=utf-8 388.556ms
2025-06-22 00:42:26.729 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5049/api/reservations - null null
2025-06-22 00:42:26.730 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI)'
2025-06-22 00:42:26.730 +02:00 [INF] Route matched with {action = "GetAll", controller = "Reservations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[DineEasy.SharedKernel.Models.Reservation.ReservationDto]]] GetAll() on controller DineEasy.WebAPI.Controllers.ReservationsController (DineEasy.WebAPI).
2025-06-22 00:42:26.732 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:42:26.732 +02:00 [INF] Getting reservations for user: admin123123
2025-06-22 00:42:26.732 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 1
2025-06-22 00:42:26.732 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin123123
2025-06-22 00:42:26.732 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = admin@dineeasy.com
2025-06-22 00:42:26.732 +02:00 [INF] Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = Admin
2025-06-22 00:42:26.732 +02:00 [INF] Claim: exp = 1750631939
2025-06-22 00:42:26.732 +02:00 [INF] Claim: iss = DineEasy
2025-06-22 00:42:26.732 +02:00 [INF] Claim: aud = DineEasy-Users
2025-06-22 00:42:26.732 +02:00 [INF] User is Admin - returning all reservations
2025-06-22 00:42:26.732 +02:00 [INF] Retrieving all reservations
2025-06-22 00:42:26.733 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Id", "r"."CreatedAt", "r"."Duration", "r"."PartySize", "r"."ReservationDateTime", "r"."SpecialRequests", "r"."Status", "r"."TableId", "r"."UserId"
FROM "Reservations" AS "r"
2025-06-22 00:42:26.734 +02:00 [ERR] Error occurred while retrieving all reservations
System.NullReferenceException: Object reference not set to an instance of an object.
   at DineEasy.Application.Extensions.ReservationExtensions.ToDto(Reservation reservation) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 10
   at DineEasy.Application.Extensions.ReservationExtensions.<>c.<ToDtos>b__2_0(Reservation r) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at System.Linq.Enumerable.SelectListIterator`2.Fill(ReadOnlySpan`1 source, Span`1 destination, Func`2 func)
   at System.Linq.Enumerable.SelectListIterator`2.ToList()
   at DineEasy.Application.Extensions.ReservationExtensions.ToDtos(IEnumerable`1 reservations) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at DineEasy.Application.Services.ReservationService.GetAllAsync() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 165
2025-06-22 00:42:26.743 +02:00 [ERR] Error retrieving reservations
System.NullReferenceException: Object reference not set to an instance of an object.
   at DineEasy.Application.Extensions.ReservationExtensions.ToDto(Reservation reservation) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 10
   at DineEasy.Application.Extensions.ReservationExtensions.<>c.<ToDtos>b__2_0(Reservation r) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at System.Linq.Enumerable.SelectListIterator`2.Fill(ReadOnlySpan`1 source, Span`1 destination, Func`2 func)
   at System.Linq.Enumerable.SelectListIterator`2.ToList()
   at DineEasy.Application.Extensions.ReservationExtensions.ToDtos(IEnumerable`1 reservations) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at DineEasy.Application.Services.ReservationService.GetAllAsync() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 165
   at DineEasy.WebAPI.Controllers.ReservationsController.GetAll() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.WebAPI/Controllers/ReservationsController.cs:line 39
2025-06-22 00:42:26.743 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 11.8041ms.
2025-06-22 00:42:26.743 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-06-22 00:42:26.744 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI) in 13.098ms
2025-06-22 00:42:26.744 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI)'
2025-06-22 00:42:26.744 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5049/api/reservations - 500 null text/plain; charset=utf-8 14.9792ms
2025-06-22 00:42:33.307 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5049/api/reservations - application/json; charset=utf-8 116
2025-06-22 00:42:33.309 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI)'
2025-06-22 00:42:33.309 +02:00 [INF] Route matched with {action = "Create", controller = "Reservations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[DineEasy.SharedKernel.Models.Reservation.ReservationDto]] Create(DineEasy.SharedKernel.Models.Reservation.CreateReservationDto) on controller DineEasy.WebAPI.Controllers.ReservationsController (DineEasy.WebAPI).
2025-06-22 00:42:33.312 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:42:33.312 +02:00 [INF] Creating new reservation for UserId: 1, TableId: 0
2025-06-22 00:42:33.312 +02:00 [INF] Creating new reservation - UserId: 1, TableId: 0, DateTime: "0001-01-01T00:00:00.0000000", Duration: 2, PartySize: 1
2025-06-22 00:42:33.318 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."Email", "u"."PasswordHash", "u"."Role", "u"."Username", "u0"."Id", "u0"."CreatedAt", "u0"."DateOfBirth", "u0"."FirstName", "u0"."LastName", "u0"."PhoneNumber", "u0"."UserId"
FROM "Users" AS "u"
LEFT JOIN "UserProfiles" AS "u0" ON "u"."Id" = "u0"."UserId"
WHERE "u"."Id" = @__id_0
LIMIT 1
2025-06-22 00:42:33.321 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='0'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Capacity", "t"."IsActive", "t"."TableNumber"
FROM "Tables" AS "t"
WHERE "t"."Id" = @__p_0
LIMIT 1
2025-06-22 00:42:33.322 +02:00 [WRN] Reservation creation failed - Table with ID 0 not found
2025-06-22 00:42:33.322 +02:00 [ERR] Unexpected error creating reservation for UserId: 1
System.Exception: Table with ID 0 not found
   at DineEasy.Application.Services.ReservationService.CreateAsync(CreateReservationDto dto) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 48
   at DineEasy.WebAPI.Controllers.ReservationsController.Create(CreateReservationDto dto) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.WebAPI/Controllers/ReservationsController.cs:line 132
2025-06-22 00:42:33.322 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 10.5115ms.
2025-06-22 00:42:33.323 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-06-22 00:42:33.323 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI) in 13.828ms
2025-06-22 00:42:33.323 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI)'
2025-06-22 00:42:33.323 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5049/api/reservations - 500 null text/plain; charset=utf-8 16.4543ms
2025-06-22 00:42:53.677 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5049/api/reservations - application/json; charset=utf-8 116
2025-06-22 00:42:53.680 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI)'
2025-06-22 00:42:53.680 +02:00 [INF] Route matched with {action = "Create", controller = "Reservations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[DineEasy.SharedKernel.Models.Reservation.ReservationDto]] Create(DineEasy.SharedKernel.Models.Reservation.CreateReservationDto) on controller DineEasy.WebAPI.Controllers.ReservationsController (DineEasy.WebAPI).
2025-06-22 00:42:53.682 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:42:53.682 +02:00 [INF] Creating new reservation for UserId: 1, TableId: 0
2025-06-22 00:42:53.682 +02:00 [INF] Creating new reservation - UserId: 1, TableId: 0, DateTime: "2025-06-23T16:50:00.0000000", Duration: 2, PartySize: 1
2025-06-22 00:42:53.685 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."Email", "u"."PasswordHash", "u"."Role", "u"."Username", "u0"."Id", "u0"."CreatedAt", "u0"."DateOfBirth", "u0"."FirstName", "u0"."LastName", "u0"."PhoneNumber", "u0"."UserId"
FROM "Users" AS "u"
LEFT JOIN "UserProfiles" AS "u0" ON "u"."Id" = "u0"."UserId"
WHERE "u"."Id" = @__id_0
LIMIT 1
2025-06-22 00:42:53.688 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='0'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Capacity", "t"."IsActive", "t"."TableNumber"
FROM "Tables" AS "t"
WHERE "t"."Id" = @__p_0
LIMIT 1
2025-06-22 00:42:53.688 +02:00 [WRN] Reservation creation failed - Table with ID 0 not found
2025-06-22 00:42:53.689 +02:00 [ERR] Unexpected error creating reservation for UserId: 1
System.Exception: Table with ID 0 not found
   at DineEasy.Application.Services.ReservationService.CreateAsync(CreateReservationDto dto) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 48
   at DineEasy.WebAPI.Controllers.ReservationsController.Create(CreateReservationDto dto) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.WebAPI/Controllers/ReservationsController.cs:line 132
2025-06-22 00:42:53.689 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 7.3813ms.
2025-06-22 00:42:53.690 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-06-22 00:42:53.690 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI) in 9.8832ms
2025-06-22 00:42:53.690 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI)'
2025-06-22 00:42:53.691 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5049/api/reservations - 500 null text/plain; charset=utf-8 13.1518ms
2025-06-22 00:43:02.636 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5049/api/reservations - application/json; charset=utf-8 116
2025-06-22 00:43:02.637 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI)'
2025-06-22 00:43:02.637 +02:00 [INF] Route matched with {action = "Create", controller = "Reservations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[DineEasy.SharedKernel.Models.Reservation.ReservationDto]] Create(DineEasy.SharedKernel.Models.Reservation.CreateReservationDto) on controller DineEasy.WebAPI.Controllers.ReservationsController (DineEasy.WebAPI).
2025-06-22 00:43:02.639 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:43:02.639 +02:00 [INF] Creating new reservation for UserId: 1, TableId: 1
2025-06-22 00:43:02.639 +02:00 [INF] Creating new reservation - UserId: 1, TableId: 1, DateTime: "2025-06-23T16:50:00.0000000", Duration: 2, PartySize: 1
2025-06-22 00:43:02.640 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."Email", "u"."PasswordHash", "u"."Role", "u"."Username", "u0"."Id", "u0"."CreatedAt", "u0"."DateOfBirth", "u0"."FirstName", "u0"."LastName", "u0"."PhoneNumber", "u0"."UserId"
FROM "Users" AS "u"
LEFT JOIN "UserProfiles" AS "u0" ON "u"."Id" = "u0"."UserId"
WHERE "u"."Id" = @__id_0
LIMIT 1
2025-06-22 00:43:02.642 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Capacity", "t"."IsActive", "t"."TableNumber"
FROM "Tables" AS "t"
WHERE "t"."Id" = @__p_0
LIMIT 1
2025-06-22 00:43:02.644 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__dayOfWeek_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."DayOfWeek", "t"."EndTime", "t"."StartTime"
FROM "TimeSlots" AS "t"
WHERE "t"."DayOfWeek" = @__dayOfWeek_0
LIMIT 1
2025-06-22 00:43:02.647 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__tabelId_0='1', @__dateTime_1='2025-06-23T16:50:00.0000000' (DbType = DateTime), @__newReservationEnd_2='2025-06-23T18:50:00.0000000' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Reservations" AS "r"
    WHERE "r"."TableId" = @__tabelId_0 AND "r"."Status" NOT IN ('Cancelled', 'Completed') AND @__dateTime_1 < rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', "r"."ReservationDateTime", CAST(CAST("r"."Duration" AS REAL) AS TEXT) || ' hours'), '0'), '.') AND @__newReservationEnd_2 > "r"."ReservationDateTime")
2025-06-22 00:43:02.648 +02:00 [WRN] Reservation creation failed - Table 1 has overlapping reservation for "2025-06-23T16:50:00.0000000" duration 2h
2025-06-22 00:43:02.649 +02:00 [ERR] Unexpected error creating reservation for UserId: 1
DineEasy.Application.Exceptions.UnavailableTableException: Table is not available for the requested time slot!
   at DineEasy.Application.Services.ReservationService.CreateAsync(CreateReservationDto dto) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 96
   at DineEasy.WebAPI.Controllers.ReservationsController.Create(CreateReservationDto dto) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.WebAPI/Controllers/ReservationsController.cs:line 132
2025-06-22 00:43:02.650 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 11.0631ms.
2025-06-22 00:43:02.650 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-06-22 00:43:02.650 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI) in 12.7648ms
2025-06-22 00:43:02.650 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI)'
2025-06-22 00:43:02.650 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5049/api/reservations - 500 null text/plain; charset=utf-8 14.0296ms
2025-06-22 00:43:08.293 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5049/api/reservations - application/json; charset=utf-8 116
2025-06-22 00:43:08.293 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI)'
2025-06-22 00:43:08.294 +02:00 [INF] Route matched with {action = "Create", controller = "Reservations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[DineEasy.SharedKernel.Models.Reservation.ReservationDto]] Create(DineEasy.SharedKernel.Models.Reservation.CreateReservationDto) on controller DineEasy.WebAPI.Controllers.ReservationsController (DineEasy.WebAPI).
2025-06-22 00:43:08.294 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:43:08.294 +02:00 [INF] Creating new reservation for UserId: 1, TableId: 2
2025-06-22 00:43:08.294 +02:00 [INF] Creating new reservation - UserId: 1, TableId: 2, DateTime: "2025-06-23T16:50:00.0000000", Duration: 2, PartySize: 1
2025-06-22 00:43:08.295 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."Email", "u"."PasswordHash", "u"."Role", "u"."Username", "u0"."Id", "u0"."CreatedAt", "u0"."DateOfBirth", "u0"."FirstName", "u0"."LastName", "u0"."PhoneNumber", "u0"."UserId"
FROM "Users" AS "u"
LEFT JOIN "UserProfiles" AS "u0" ON "u"."Id" = "u0"."UserId"
WHERE "u"."Id" = @__id_0
LIMIT 1
2025-06-22 00:43:08.296 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='2'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Capacity", "t"."IsActive", "t"."TableNumber"
FROM "Tables" AS "t"
WHERE "t"."Id" = @__p_0
LIMIT 1
2025-06-22 00:43:08.297 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__dayOfWeek_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."DayOfWeek", "t"."EndTime", "t"."StartTime"
FROM "TimeSlots" AS "t"
WHERE "t"."DayOfWeek" = @__dayOfWeek_0
LIMIT 1
2025-06-22 00:43:08.298 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__tabelId_0='2', @__dateTime_1='2025-06-23T16:50:00.0000000' (DbType = DateTime), @__newReservationEnd_2='2025-06-23T18:50:00.0000000' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Reservations" AS "r"
    WHERE "r"."TableId" = @__tabelId_0 AND "r"."Status" NOT IN ('Cancelled', 'Completed') AND @__dateTime_1 < rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', "r"."ReservationDateTime", CAST(CAST("r"."Duration" AS REAL) AS TEXT) || ' hours'), '0'), '.') AND @__newReservationEnd_2 > "r"."ReservationDateTime")
2025-06-22 00:43:08.301 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='2025-06-21T22:43:08.2982450Z' (DbType = DateTime), @p1='2', @p2='1', @p3='2025-06-23T16:50:00.0000000' (DbType = DateTime), @p4='', @p5='Pending' (Nullable = false) (Size = 7), @p6='2', @p7='1'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Reservations" ("CreatedAt", "Duration", "PartySize", "ReservationDateTime", "SpecialRequests", "Status", "TableId", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7)
RETURNING "Id";
2025-06-22 00:43:08.301 +02:00 [INF] Reservation created successfully - ID: 2, User: 1, Table: 2, DateTime: "2025-06-23T16:50:00.0000000"
2025-06-22 00:43:08.301 +02:00 [INF] Successfully created reservation with ID: 2
2025-06-22 00:43:08.301 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.CreatedAtActionResult in 7.1635ms.
2025-06-22 00:43:08.302 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'DineEasy.SharedKernel.Models.Reservation.ReservationDto'.
2025-06-22 00:43:08.302 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI) in 8.6434ms
2025-06-22 00:43:08.302 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI)'
2025-06-22 00:43:08.302 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5049/api/reservations - 201 null application/json; charset=utf-8 9.8705ms
2025-06-22 00:43:08.304 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5049/api/reservations - null null
2025-06-22 00:43:08.305 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI)'
2025-06-22 00:43:08.305 +02:00 [INF] Route matched with {action = "GetAll", controller = "Reservations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[DineEasy.SharedKernel.Models.Reservation.ReservationDto]]] GetAll() on controller DineEasy.WebAPI.Controllers.ReservationsController (DineEasy.WebAPI).
2025-06-22 00:43:08.305 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:43:08.305 +02:00 [INF] Getting reservations for user: admin123123
2025-06-22 00:43:08.305 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 1
2025-06-22 00:43:08.305 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin123123
2025-06-22 00:43:08.305 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = admin@dineeasy.com
2025-06-22 00:43:08.305 +02:00 [INF] Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = Admin
2025-06-22 00:43:08.305 +02:00 [INF] Claim: exp = 1750631939
2025-06-22 00:43:08.305 +02:00 [INF] Claim: iss = DineEasy
2025-06-22 00:43:08.305 +02:00 [INF] Claim: aud = DineEasy-Users
2025-06-22 00:43:08.305 +02:00 [INF] User is Admin - returning all reservations
2025-06-22 00:43:08.305 +02:00 [INF] Retrieving all reservations
2025-06-22 00:43:08.306 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Id", "r"."CreatedAt", "r"."Duration", "r"."PartySize", "r"."ReservationDateTime", "r"."SpecialRequests", "r"."Status", "r"."TableId", "r"."UserId"
FROM "Reservations" AS "r"
2025-06-22 00:43:08.306 +02:00 [ERR] Error occurred while retrieving all reservations
System.NullReferenceException: Object reference not set to an instance of an object.
   at DineEasy.Application.Extensions.ReservationExtensions.ToDto(Reservation reservation) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 10
   at DineEasy.Application.Extensions.ReservationExtensions.<>c.<ToDtos>b__2_0(Reservation r) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at System.Linq.Enumerable.SelectListIterator`2.Fill(ReadOnlySpan`1 source, Span`1 destination, Func`2 func)
   at System.Linq.Enumerable.SelectListIterator`2.ToList()
   at DineEasy.Application.Extensions.ReservationExtensions.ToDtos(IEnumerable`1 reservations) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at DineEasy.Application.Services.ReservationService.GetAllAsync() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 165
2025-06-22 00:43:08.307 +02:00 [ERR] Error retrieving reservations
System.NullReferenceException: Object reference not set to an instance of an object.
   at DineEasy.Application.Extensions.ReservationExtensions.ToDto(Reservation reservation) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 10
   at DineEasy.Application.Extensions.ReservationExtensions.<>c.<ToDtos>b__2_0(Reservation r) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at System.Linq.Enumerable.SelectListIterator`2.Fill(ReadOnlySpan`1 source, Span`1 destination, Func`2 func)
   at System.Linq.Enumerable.SelectListIterator`2.ToList()
   at DineEasy.Application.Extensions.ReservationExtensions.ToDtos(IEnumerable`1 reservations) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at DineEasy.Application.Services.ReservationService.GetAllAsync() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 165
   at DineEasy.WebAPI.Controllers.ReservationsController.GetAll() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.WebAPI/Controllers/ReservationsController.cs:line 39
2025-06-22 00:43:08.307 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 1.9607ms.
2025-06-22 00:43:08.307 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-06-22 00:43:08.307 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI) in 2.4621ms
2025-06-22 00:43:08.307 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI)'
2025-06-22 00:43:08.307 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5049/api/reservations - 500 null text/plain; charset=utf-8 3.1345ms
2025-06-22 00:43:22.877 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5049/api/auth/login - application/json; charset=utf-8 null
2025-06-22 00:43:22.877 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI)'
2025-06-22 00:43:22.880 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[DineEasy.SharedKernel.Models.Auth.AuthResponseDto]] Login(DineEasy.SharedKernel.Models.Auth.LoginDto) on controller DineEasy.WebAPI.Controllers.AuthController (DineEasy.WebAPI).
2025-06-22 00:43:22.889 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:43:22.890 +02:00 [INF] Login attempt for email: admin@dineeasy.com
2025-06-22 00:43:22.891 +02:00 [INF] Login attempt for email: admin@dineeasy.com
2025-06-22 00:43:22.894 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__email_0='admin@dineeasy.com' (Size = 18)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."Email", "u"."PasswordHash", "u"."Role", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."Email" = @__email_0
LIMIT 1
2025-06-22 00:43:23.048 +02:00 [INF] Successful login for user: admin123123
2025-06-22 00:43:23.048 +02:00 [INF] Successful login for user: admin123123
2025-06-22 00:43:23.048 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 159.3162ms.
2025-06-22 00:43:23.048 +02:00 [INF] Executing OkObjectResult, writing value of type 'DineEasy.SharedKernel.Models.Auth.AuthResponseDto'.
2025-06-22 00:43:23.049 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI) in 169.1361ms
2025-06-22 00:43:23.049 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI)'
2025-06-22 00:43:23.049 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5049/api/auth/login - 200 null application/json; charset=utf-8 172.7367ms
2025-06-22 00:43:24.118 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5049/api/reservations - null null
2025-06-22 00:43:24.120 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI)'
2025-06-22 00:43:24.120 +02:00 [INF] Route matched with {action = "GetAll", controller = "Reservations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[DineEasy.SharedKernel.Models.Reservation.ReservationDto]]] GetAll() on controller DineEasy.WebAPI.Controllers.ReservationsController (DineEasy.WebAPI).
2025-06-22 00:43:24.121 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:43:24.121 +02:00 [INF] Getting reservations for user: admin123123
2025-06-22 00:43:24.121 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 1
2025-06-22 00:43:24.121 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin123123
2025-06-22 00:43:24.121 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = admin@dineeasy.com
2025-06-22 00:43:24.121 +02:00 [INF] Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = Admin
2025-06-22 00:43:24.121 +02:00 [INF] Claim: exp = 1750632203
2025-06-22 00:43:24.121 +02:00 [INF] Claim: iss = DineEasy
2025-06-22 00:43:24.121 +02:00 [INF] Claim: aud = DineEasy-Users
2025-06-22 00:43:24.121 +02:00 [INF] User is Admin - returning all reservations
2025-06-22 00:43:24.121 +02:00 [INF] Retrieving all reservations
2025-06-22 00:43:24.122 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Id", "r"."CreatedAt", "r"."Duration", "r"."PartySize", "r"."ReservationDateTime", "r"."SpecialRequests", "r"."Status", "r"."TableId", "r"."UserId"
FROM "Reservations" AS "r"
2025-06-22 00:43:24.124 +02:00 [ERR] Error occurred while retrieving all reservations
System.NullReferenceException: Object reference not set to an instance of an object.
   at DineEasy.Application.Extensions.ReservationExtensions.ToDto(Reservation reservation) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 10
   at DineEasy.Application.Extensions.ReservationExtensions.<>c.<ToDtos>b__2_0(Reservation r) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at System.Linq.Enumerable.SelectListIterator`2.Fill(ReadOnlySpan`1 source, Span`1 destination, Func`2 func)
   at System.Linq.Enumerable.SelectListIterator`2.ToList()
   at DineEasy.Application.Extensions.ReservationExtensions.ToDtos(IEnumerable`1 reservations) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at DineEasy.Application.Services.ReservationService.GetAllAsync() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 165
2025-06-22 00:43:24.125 +02:00 [ERR] Error retrieving reservations
System.NullReferenceException: Object reference not set to an instance of an object.
   at DineEasy.Application.Extensions.ReservationExtensions.ToDto(Reservation reservation) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 10
   at DineEasy.Application.Extensions.ReservationExtensions.<>c.<ToDtos>b__2_0(Reservation r) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at System.Linq.Enumerable.SelectListIterator`2.Fill(ReadOnlySpan`1 source, Span`1 destination, Func`2 func)
   at System.Linq.Enumerable.SelectListIterator`2.ToList()
   at DineEasy.Application.Extensions.ReservationExtensions.ToDtos(IEnumerable`1 reservations) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at DineEasy.Application.Services.ReservationService.GetAllAsync() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 165
   at DineEasy.WebAPI.Controllers.ReservationsController.GetAll() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.WebAPI/Controllers/ReservationsController.cs:line 39
2025-06-22 00:43:24.126 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 4.8962ms.
2025-06-22 00:43:24.126 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-06-22 00:43:24.126 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI) in 5.8218ms
2025-06-22 00:43:24.126 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI)'
2025-06-22 00:43:24.126 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5049/api/reservations - 500 null text/plain; charset=utf-8 7.7543ms
2025-06-22 00:45:11.153 +02:00 [INF] Application is shutting down...
2025-06-22 00:45:13.789 +02:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-06-22 00:45:13.948 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-22 00:45:13.968 +02:00 [INF] User profile is available. Using '/Users/jakubwalkowicz/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-06-22 00:45:14.001 +02:00 [INF] Now listening on: http://localhost:5049
2025-06-22 00:45:14.003 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-22 00:45:14.003 +02:00 [INF] Hosting environment: Development
2025-06-22 00:45:14.003 +02:00 [INF] Content root path: /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.WebAPI
2025-06-22 00:45:14.332 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5049/swagger/index.html - null null
2025-06-22 00:45:14.483 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5049/swagger/index.html - 200 null text/html;charset=utf-8 151.9655ms
2025-06-22 00:45:14.536 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5049/swagger/v1/swagger.json - null null
2025-06-22 00:45:14.799 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5049/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 262.5278ms
2025-06-22 00:47:59.106 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5049/api/reservations - null null
2025-06-22 00:47:59.110 +02:00 [WRN] Failed to determine the https port for redirect.
2025-06-22 00:47:59.169 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI)'
2025-06-22 00:47:59.178 +02:00 [INF] Route matched with {action = "GetAll", controller = "Reservations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[DineEasy.SharedKernel.Models.Reservation.ReservationDto]]] GetAll() on controller DineEasy.WebAPI.Controllers.ReservationsController (DineEasy.WebAPI).
2025-06-22 00:47:59.182 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:47:59.183 +02:00 [INF] Getting reservations for user: admin123123
2025-06-22 00:47:59.183 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 1
2025-06-22 00:47:59.183 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin123123
2025-06-22 00:47:59.184 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = admin@dineeasy.com
2025-06-22 00:47:59.184 +02:00 [INF] Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = Admin
2025-06-22 00:47:59.184 +02:00 [INF] Claim: exp = 1750632203
2025-06-22 00:47:59.184 +02:00 [INF] Claim: iss = DineEasy
2025-06-22 00:47:59.184 +02:00 [INF] Claim: aud = DineEasy-Users
2025-06-22 00:47:59.184 +02:00 [INF] User is Admin - returning all reservations
2025-06-22 00:47:59.184 +02:00 [INF] Retrieving all reservations
2025-06-22 00:47:59.314 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Id", "r"."CreatedAt", "r"."Duration", "r"."PartySize", "r"."ReservationDateTime", "r"."SpecialRequests", "r"."Status", "r"."TableId", "r"."UserId"
FROM "Reservations" AS "r"
2025-06-22 00:47:59.349 +02:00 [ERR] Error occurred while retrieving all reservations
System.NullReferenceException: Object reference not set to an instance of an object.
   at DineEasy.Application.Extensions.ReservationExtensions.ToDto(Reservation reservation) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 10
   at DineEasy.Application.Extensions.ReservationExtensions.<>c.<ToDtos>b__2_0(Reservation r) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at System.Linq.Enumerable.SelectListIterator`2.Fill(ReadOnlySpan`1 source, Span`1 destination, Func`2 func)
   at System.Linq.Enumerable.SelectListIterator`2.ToList()
   at DineEasy.Application.Extensions.ReservationExtensions.ToDtos(IEnumerable`1 reservations) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at DineEasy.Application.Services.ReservationService.GetAllAsync() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 165
2025-06-22 00:47:59.359 +02:00 [ERR] Error retrieving reservations
System.NullReferenceException: Object reference not set to an instance of an object.
   at DineEasy.Application.Extensions.ReservationExtensions.ToDto(Reservation reservation) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 10
   at DineEasy.Application.Extensions.ReservationExtensions.<>c.<ToDtos>b__2_0(Reservation r) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at System.Linq.Enumerable.SelectListIterator`2.Fill(ReadOnlySpan`1 source, Span`1 destination, Func`2 func)
   at System.Linq.Enumerable.SelectListIterator`2.ToList()
   at DineEasy.Application.Extensions.ReservationExtensions.ToDtos(IEnumerable`1 reservations) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at DineEasy.Application.Services.ReservationService.GetAllAsync() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 165
   at DineEasy.WebAPI.Controllers.ReservationsController.GetAll() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.WebAPI/Controllers/ReservationsController.cs:line 39
2025-06-22 00:47:59.361 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 177.2574ms.
2025-06-22 00:47:59.365 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-06-22 00:47:59.366 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI) in 186.5452ms
2025-06-22 00:47:59.367 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI)'
2025-06-22 00:47:59.367 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5049/api/reservations - 500 null text/plain; charset=utf-8 261.094ms
2025-06-22 00:48:02.095 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5049/api/reservations - null null
2025-06-22 00:48:02.097 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI)'
2025-06-22 00:48:02.097 +02:00 [INF] Route matched with {action = "GetAll", controller = "Reservations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[DineEasy.SharedKernel.Models.Reservation.ReservationDto]]] GetAll() on controller DineEasy.WebAPI.Controllers.ReservationsController (DineEasy.WebAPI).
2025-06-22 00:48:02.098 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:48:02.098 +02:00 [INF] Getting reservations for user: admin123123
2025-06-22 00:48:02.098 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 1
2025-06-22 00:48:02.098 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin123123
2025-06-22 00:48:02.098 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = admin@dineeasy.com
2025-06-22 00:48:02.098 +02:00 [INF] Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = Admin
2025-06-22 00:48:02.098 +02:00 [INF] Claim: exp = 1750632203
2025-06-22 00:48:02.098 +02:00 [INF] Claim: iss = DineEasy
2025-06-22 00:48:02.098 +02:00 [INF] Claim: aud = DineEasy-Users
2025-06-22 00:48:02.098 +02:00 [INF] User is Admin - returning all reservations
2025-06-22 00:48:02.098 +02:00 [INF] Retrieving all reservations
2025-06-22 00:48:02.129 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Id", "r"."CreatedAt", "r"."Duration", "r"."PartySize", "r"."ReservationDateTime", "r"."SpecialRequests", "r"."Status", "r"."TableId", "r"."UserId"
FROM "Reservations" AS "r"
2025-06-22 00:48:02.130 +02:00 [ERR] Error occurred while retrieving all reservations
System.NullReferenceException: Object reference not set to an instance of an object.
   at DineEasy.Application.Extensions.ReservationExtensions.ToDto(Reservation reservation) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 10
   at DineEasy.Application.Extensions.ReservationExtensions.<>c.<ToDtos>b__2_0(Reservation r) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at System.Linq.Enumerable.SelectListIterator`2.Fill(ReadOnlySpan`1 source, Span`1 destination, Func`2 func)
   at System.Linq.Enumerable.SelectListIterator`2.ToList()
   at DineEasy.Application.Extensions.ReservationExtensions.ToDtos(IEnumerable`1 reservations) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at DineEasy.Application.Services.ReservationService.GetAllAsync() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 165
2025-06-22 00:48:02.130 +02:00 [ERR] Error retrieving reservations
System.NullReferenceException: Object reference not set to an instance of an object.
   at DineEasy.Application.Extensions.ReservationExtensions.ToDto(Reservation reservation) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 10
   at DineEasy.Application.Extensions.ReservationExtensions.<>c.<ToDtos>b__2_0(Reservation r) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at System.Linq.Enumerable.SelectListIterator`2.Fill(ReadOnlySpan`1 source, Span`1 destination, Func`2 func)
   at System.Linq.Enumerable.SelectListIterator`2.ToList()
   at DineEasy.Application.Extensions.ReservationExtensions.ToDtos(IEnumerable`1 reservations) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at DineEasy.Application.Services.ReservationService.GetAllAsync() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 165
   at DineEasy.WebAPI.Controllers.ReservationsController.GetAll() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.WebAPI/Controllers/ReservationsController.cs:line 39
2025-06-22 00:48:02.130 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 32.2569ms.
2025-06-22 00:48:02.130 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-06-22 00:48:02.131 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI) in 33.0891ms
2025-06-22 00:48:02.131 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI)'
2025-06-22 00:48:02.131 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5049/api/reservations - 500 null text/plain; charset=utf-8 35.8307ms
2025-06-22 00:48:02.753 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5049/api/reservations - null null
2025-06-22 00:48:02.757 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI)'
2025-06-22 00:48:02.758 +02:00 [INF] Route matched with {action = "GetAll", controller = "Reservations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[DineEasy.SharedKernel.Models.Reservation.ReservationDto]]] GetAll() on controller DineEasy.WebAPI.Controllers.ReservationsController (DineEasy.WebAPI).
2025-06-22 00:48:02.761 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:48:02.761 +02:00 [INF] Getting reservations for user: admin123123
2025-06-22 00:48:02.761 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 1
2025-06-22 00:48:02.761 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin123123
2025-06-22 00:48:02.761 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = admin@dineeasy.com
2025-06-22 00:48:02.761 +02:00 [INF] Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = Admin
2025-06-22 00:48:02.761 +02:00 [INF] Claim: exp = 1750632203
2025-06-22 00:48:02.761 +02:00 [INF] Claim: iss = DineEasy
2025-06-22 00:48:02.761 +02:00 [INF] Claim: aud = DineEasy-Users
2025-06-22 00:48:02.761 +02:00 [INF] User is Admin - returning all reservations
2025-06-22 00:48:02.761 +02:00 [INF] Retrieving all reservations
2025-06-22 00:48:02.764 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Id", "r"."CreatedAt", "r"."Duration", "r"."PartySize", "r"."ReservationDateTime", "r"."SpecialRequests", "r"."Status", "r"."TableId", "r"."UserId"
FROM "Reservations" AS "r"
2025-06-22 00:48:02.765 +02:00 [ERR] Error occurred while retrieving all reservations
System.NullReferenceException: Object reference not set to an instance of an object.
   at DineEasy.Application.Extensions.ReservationExtensions.ToDto(Reservation reservation) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 10
   at DineEasy.Application.Extensions.ReservationExtensions.<>c.<ToDtos>b__2_0(Reservation r) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at System.Linq.Enumerable.SelectListIterator`2.Fill(ReadOnlySpan`1 source, Span`1 destination, Func`2 func)
   at System.Linq.Enumerable.SelectListIterator`2.ToList()
   at DineEasy.Application.Extensions.ReservationExtensions.ToDtos(IEnumerable`1 reservations) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at DineEasy.Application.Services.ReservationService.GetAllAsync() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 165
2025-06-22 00:48:02.766 +02:00 [ERR] Error retrieving reservations
System.NullReferenceException: Object reference not set to an instance of an object.
   at DineEasy.Application.Extensions.ReservationExtensions.ToDto(Reservation reservation) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 10
   at DineEasy.Application.Extensions.ReservationExtensions.<>c.<ToDtos>b__2_0(Reservation r) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at System.Linq.Enumerable.SelectListIterator`2.Fill(ReadOnlySpan`1 source, Span`1 destination, Func`2 func)
   at System.Linq.Enumerable.SelectListIterator`2.ToList()
   at DineEasy.Application.Extensions.ReservationExtensions.ToDtos(IEnumerable`1 reservations) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at DineEasy.Application.Services.ReservationService.GetAllAsync() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 165
   at DineEasy.WebAPI.Controllers.ReservationsController.GetAll() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.WebAPI/Controllers/ReservationsController.cs:line 39
2025-06-22 00:48:02.766 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 5.3876ms.
2025-06-22 00:48:02.766 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-06-22 00:48:02.767 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI) in 8.7629ms
2025-06-22 00:48:02.767 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI)'
2025-06-22 00:48:02.767 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5049/api/reservations - 500 null text/plain; charset=utf-8 13.6248ms
2025-06-22 00:48:03.190 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5049/api/reservations - null null
2025-06-22 00:48:03.190 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI)'
2025-06-22 00:48:03.190 +02:00 [INF] Route matched with {action = "GetAll", controller = "Reservations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[DineEasy.SharedKernel.Models.Reservation.ReservationDto]]] GetAll() on controller DineEasy.WebAPI.Controllers.ReservationsController (DineEasy.WebAPI).
2025-06-22 00:48:03.190 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:48:03.190 +02:00 [INF] Getting reservations for user: admin123123
2025-06-22 00:48:03.191 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 1
2025-06-22 00:48:03.191 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin123123
2025-06-22 00:48:03.191 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = admin@dineeasy.com
2025-06-22 00:48:03.191 +02:00 [INF] Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = Admin
2025-06-22 00:48:03.191 +02:00 [INF] Claim: exp = 1750632203
2025-06-22 00:48:03.191 +02:00 [INF] Claim: iss = DineEasy
2025-06-22 00:48:03.191 +02:00 [INF] Claim: aud = DineEasy-Users
2025-06-22 00:48:03.191 +02:00 [INF] User is Admin - returning all reservations
2025-06-22 00:48:03.191 +02:00 [INF] Retrieving all reservations
2025-06-22 00:48:03.191 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Id", "r"."CreatedAt", "r"."Duration", "r"."PartySize", "r"."ReservationDateTime", "r"."SpecialRequests", "r"."Status", "r"."TableId", "r"."UserId"
FROM "Reservations" AS "r"
2025-06-22 00:48:03.192 +02:00 [ERR] Error occurred while retrieving all reservations
System.NullReferenceException: Object reference not set to an instance of an object.
   at DineEasy.Application.Extensions.ReservationExtensions.ToDto(Reservation reservation) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 10
   at DineEasy.Application.Extensions.ReservationExtensions.<>c.<ToDtos>b__2_0(Reservation r) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at System.Linq.Enumerable.SelectListIterator`2.Fill(ReadOnlySpan`1 source, Span`1 destination, Func`2 func)
   at System.Linq.Enumerable.SelectListIterator`2.ToList()
   at DineEasy.Application.Extensions.ReservationExtensions.ToDtos(IEnumerable`1 reservations) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at DineEasy.Application.Services.ReservationService.GetAllAsync() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 165
2025-06-22 00:48:03.192 +02:00 [ERR] Error retrieving reservations
System.NullReferenceException: Object reference not set to an instance of an object.
   at DineEasy.Application.Extensions.ReservationExtensions.ToDto(Reservation reservation) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 10
   at DineEasy.Application.Extensions.ReservationExtensions.<>c.<ToDtos>b__2_0(Reservation r) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at System.Linq.Enumerable.SelectListIterator`2.Fill(ReadOnlySpan`1 source, Span`1 destination, Func`2 func)
   at System.Linq.Enumerable.SelectListIterator`2.ToList()
   at DineEasy.Application.Extensions.ReservationExtensions.ToDtos(IEnumerable`1 reservations) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at DineEasy.Application.Services.ReservationService.GetAllAsync() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 165
   at DineEasy.WebAPI.Controllers.ReservationsController.GetAll() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.WebAPI/Controllers/ReservationsController.cs:line 39
2025-06-22 00:48:03.192 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 1.8692ms.
2025-06-22 00:48:03.192 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-06-22 00:48:03.193 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI) in 2.2642ms
2025-06-22 00:48:03.193 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI)'
2025-06-22 00:48:03.193 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5049/api/reservations - 500 null text/plain; charset=utf-8 2.9582ms
2025-06-22 00:48:03.514 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5049/api/reservations - null null
2025-06-22 00:48:03.514 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI)'
2025-06-22 00:48:03.514 +02:00 [INF] Route matched with {action = "GetAll", controller = "Reservations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[DineEasy.SharedKernel.Models.Reservation.ReservationDto]]] GetAll() on controller DineEasy.WebAPI.Controllers.ReservationsController (DineEasy.WebAPI).
2025-06-22 00:48:03.515 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:48:03.515 +02:00 [INF] Getting reservations for user: admin123123
2025-06-22 00:48:03.515 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 1
2025-06-22 00:48:03.515 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin123123
2025-06-22 00:48:03.515 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = admin@dineeasy.com
2025-06-22 00:48:03.515 +02:00 [INF] Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = Admin
2025-06-22 00:48:03.515 +02:00 [INF] Claim: exp = 1750632203
2025-06-22 00:48:03.515 +02:00 [INF] Claim: iss = DineEasy
2025-06-22 00:48:03.515 +02:00 [INF] Claim: aud = DineEasy-Users
2025-06-22 00:48:03.515 +02:00 [INF] User is Admin - returning all reservations
2025-06-22 00:48:03.515 +02:00 [INF] Retrieving all reservations
2025-06-22 00:48:03.515 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Id", "r"."CreatedAt", "r"."Duration", "r"."PartySize", "r"."ReservationDateTime", "r"."SpecialRequests", "r"."Status", "r"."TableId", "r"."UserId"
FROM "Reservations" AS "r"
2025-06-22 00:48:03.516 +02:00 [ERR] Error occurred while retrieving all reservations
System.NullReferenceException: Object reference not set to an instance of an object.
   at DineEasy.Application.Extensions.ReservationExtensions.ToDto(Reservation reservation) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 10
   at DineEasy.Application.Extensions.ReservationExtensions.<>c.<ToDtos>b__2_0(Reservation r) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at System.Linq.Enumerable.SelectListIterator`2.Fill(ReadOnlySpan`1 source, Span`1 destination, Func`2 func)
   at System.Linq.Enumerable.SelectListIterator`2.ToList()
   at DineEasy.Application.Extensions.ReservationExtensions.ToDtos(IEnumerable`1 reservations) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at DineEasy.Application.Services.ReservationService.GetAllAsync() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 165
2025-06-22 00:48:03.516 +02:00 [ERR] Error retrieving reservations
System.NullReferenceException: Object reference not set to an instance of an object.
   at DineEasy.Application.Extensions.ReservationExtensions.ToDto(Reservation reservation) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 10
   at DineEasy.Application.Extensions.ReservationExtensions.<>c.<ToDtos>b__2_0(Reservation r) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at System.Linq.Enumerable.SelectListIterator`2.Fill(ReadOnlySpan`1 source, Span`1 destination, Func`2 func)
   at System.Linq.Enumerable.SelectListIterator`2.ToList()
   at DineEasy.Application.Extensions.ReservationExtensions.ToDtos(IEnumerable`1 reservations) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at DineEasy.Application.Services.ReservationService.GetAllAsync() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 165
   at DineEasy.WebAPI.Controllers.ReservationsController.GetAll() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.WebAPI/Controllers/ReservationsController.cs:line 39
2025-06-22 00:48:03.516 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 1.6072ms.
2025-06-22 00:48:03.516 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-06-22 00:48:03.516 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI) in 2.0869ms
2025-06-22 00:48:03.516 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI)'
2025-06-22 00:48:03.517 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5049/api/reservations - 500 null text/plain; charset=utf-8 2.7121ms
2025-06-22 00:48:03.767 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5049/api/reservations - null null
2025-06-22 00:48:03.768 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI)'
2025-06-22 00:48:03.768 +02:00 [INF] Route matched with {action = "GetAll", controller = "Reservations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[DineEasy.SharedKernel.Models.Reservation.ReservationDto]]] GetAll() on controller DineEasy.WebAPI.Controllers.ReservationsController (DineEasy.WebAPI).
2025-06-22 00:48:03.768 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:48:03.768 +02:00 [INF] Getting reservations for user: admin123123
2025-06-22 00:48:03.768 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 1
2025-06-22 00:48:03.768 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin123123
2025-06-22 00:48:03.768 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = admin@dineeasy.com
2025-06-22 00:48:03.768 +02:00 [INF] Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = Admin
2025-06-22 00:48:03.768 +02:00 [INF] Claim: exp = 1750632203
2025-06-22 00:48:03.768 +02:00 [INF] Claim: iss = DineEasy
2025-06-22 00:48:03.768 +02:00 [INF] Claim: aud = DineEasy-Users
2025-06-22 00:48:03.768 +02:00 [INF] User is Admin - returning all reservations
2025-06-22 00:48:03.768 +02:00 [INF] Retrieving all reservations
2025-06-22 00:48:03.769 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Id", "r"."CreatedAt", "r"."Duration", "r"."PartySize", "r"."ReservationDateTime", "r"."SpecialRequests", "r"."Status", "r"."TableId", "r"."UserId"
FROM "Reservations" AS "r"
2025-06-22 00:48:03.770 +02:00 [ERR] Error occurred while retrieving all reservations
System.NullReferenceException: Object reference not set to an instance of an object.
   at DineEasy.Application.Extensions.ReservationExtensions.ToDto(Reservation reservation) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 10
   at DineEasy.Application.Extensions.ReservationExtensions.<>c.<ToDtos>b__2_0(Reservation r) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at System.Linq.Enumerable.SelectListIterator`2.Fill(ReadOnlySpan`1 source, Span`1 destination, Func`2 func)
   at System.Linq.Enumerable.SelectListIterator`2.ToList()
   at DineEasy.Application.Extensions.ReservationExtensions.ToDtos(IEnumerable`1 reservations) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at DineEasy.Application.Services.ReservationService.GetAllAsync() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 165
2025-06-22 00:48:03.771 +02:00 [ERR] Error retrieving reservations
System.NullReferenceException: Object reference not set to an instance of an object.
   at DineEasy.Application.Extensions.ReservationExtensions.ToDto(Reservation reservation) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 10
   at DineEasy.Application.Extensions.ReservationExtensions.<>c.<ToDtos>b__2_0(Reservation r) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at System.Linq.Enumerable.SelectListIterator`2.Fill(ReadOnlySpan`1 source, Span`1 destination, Func`2 func)
   at System.Linq.Enumerable.SelectListIterator`2.ToList()
   at DineEasy.Application.Extensions.ReservationExtensions.ToDtos(IEnumerable`1 reservations) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at DineEasy.Application.Services.ReservationService.GetAllAsync() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 165
   at DineEasy.WebAPI.Controllers.ReservationsController.GetAll() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.WebAPI/Controllers/ReservationsController.cs:line 39
2025-06-22 00:48:03.771 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 2.8139ms.
2025-06-22 00:48:03.771 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-06-22 00:48:03.772 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI) in 3.6337ms
2025-06-22 00:48:03.772 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI)'
2025-06-22 00:48:03.772 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5049/api/reservations - 500 null text/plain; charset=utf-8 4.7ms
2025-06-22 00:48:03.981 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5049/api/reservations - null null
2025-06-22 00:48:03.981 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI)'
2025-06-22 00:48:03.981 +02:00 [INF] Route matched with {action = "GetAll", controller = "Reservations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[DineEasy.SharedKernel.Models.Reservation.ReservationDto]]] GetAll() on controller DineEasy.WebAPI.Controllers.ReservationsController (DineEasy.WebAPI).
2025-06-22 00:48:03.981 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:48:03.981 +02:00 [INF] Getting reservations for user: admin123123
2025-06-22 00:48:03.981 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 1
2025-06-22 00:48:03.981 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin123123
2025-06-22 00:48:03.981 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = admin@dineeasy.com
2025-06-22 00:48:03.981 +02:00 [INF] Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = Admin
2025-06-22 00:48:03.981 +02:00 [INF] Claim: exp = 1750632203
2025-06-22 00:48:03.981 +02:00 [INF] Claim: iss = DineEasy
2025-06-22 00:48:03.981 +02:00 [INF] Claim: aud = DineEasy-Users
2025-06-22 00:48:03.981 +02:00 [INF] User is Admin - returning all reservations
2025-06-22 00:48:03.981 +02:00 [INF] Retrieving all reservations
2025-06-22 00:48:03.982 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Id", "r"."CreatedAt", "r"."Duration", "r"."PartySize", "r"."ReservationDateTime", "r"."SpecialRequests", "r"."Status", "r"."TableId", "r"."UserId"
FROM "Reservations" AS "r"
2025-06-22 00:48:03.982 +02:00 [ERR] Error occurred while retrieving all reservations
System.NullReferenceException: Object reference not set to an instance of an object.
   at DineEasy.Application.Extensions.ReservationExtensions.ToDto(Reservation reservation) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 10
   at DineEasy.Application.Extensions.ReservationExtensions.<>c.<ToDtos>b__2_0(Reservation r) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at System.Linq.Enumerable.SelectListIterator`2.Fill(ReadOnlySpan`1 source, Span`1 destination, Func`2 func)
   at System.Linq.Enumerable.SelectListIterator`2.ToList()
   at DineEasy.Application.Extensions.ReservationExtensions.ToDtos(IEnumerable`1 reservations) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at DineEasy.Application.Services.ReservationService.GetAllAsync() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 165
2025-06-22 00:48:03.982 +02:00 [ERR] Error retrieving reservations
System.NullReferenceException: Object reference not set to an instance of an object.
   at DineEasy.Application.Extensions.ReservationExtensions.ToDto(Reservation reservation) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 10
   at DineEasy.Application.Extensions.ReservationExtensions.<>c.<ToDtos>b__2_0(Reservation r) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at System.Linq.Enumerable.SelectListIterator`2.Fill(ReadOnlySpan`1 source, Span`1 destination, Func`2 func)
   at System.Linq.Enumerable.SelectListIterator`2.ToList()
   at DineEasy.Application.Extensions.ReservationExtensions.ToDtos(IEnumerable`1 reservations) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at DineEasy.Application.Services.ReservationService.GetAllAsync() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 165
   at DineEasy.WebAPI.Controllers.ReservationsController.GetAll() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.WebAPI/Controllers/ReservationsController.cs:line 39
2025-06-22 00:48:03.982 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 1.2509ms.
2025-06-22 00:48:03.983 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-06-22 00:48:03.983 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI) in 1.5962ms
2025-06-22 00:48:03.983 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI)'
2025-06-22 00:48:03.983 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5049/api/reservations - 500 null text/plain; charset=utf-8 2.1547ms
2025-06-22 00:48:04.031 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5049/api/reservations - null null
2025-06-22 00:48:04.032 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI)'
2025-06-22 00:48:04.032 +02:00 [INF] Route matched with {action = "GetAll", controller = "Reservations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[DineEasy.SharedKernel.Models.Reservation.ReservationDto]]] GetAll() on controller DineEasy.WebAPI.Controllers.ReservationsController (DineEasy.WebAPI).
2025-06-22 00:48:04.032 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:48:04.032 +02:00 [INF] Getting reservations for user: admin123123
2025-06-22 00:48:04.032 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 1
2025-06-22 00:48:04.032 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin123123
2025-06-22 00:48:04.032 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = admin@dineeasy.com
2025-06-22 00:48:04.032 +02:00 [INF] Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = Admin
2025-06-22 00:48:04.032 +02:00 [INF] Claim: exp = 1750632203
2025-06-22 00:48:04.032 +02:00 [INF] Claim: iss = DineEasy
2025-06-22 00:48:04.032 +02:00 [INF] Claim: aud = DineEasy-Users
2025-06-22 00:48:04.032 +02:00 [INF] User is Admin - returning all reservations
2025-06-22 00:48:04.032 +02:00 [INF] Retrieving all reservations
2025-06-22 00:48:04.032 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Id", "r"."CreatedAt", "r"."Duration", "r"."PartySize", "r"."ReservationDateTime", "r"."SpecialRequests", "r"."Status", "r"."TableId", "r"."UserId"
FROM "Reservations" AS "r"
2025-06-22 00:48:04.033 +02:00 [ERR] Error occurred while retrieving all reservations
System.NullReferenceException: Object reference not set to an instance of an object.
   at DineEasy.Application.Extensions.ReservationExtensions.ToDto(Reservation reservation) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 10
   at DineEasy.Application.Extensions.ReservationExtensions.<>c.<ToDtos>b__2_0(Reservation r) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at System.Linq.Enumerable.SelectListIterator`2.Fill(ReadOnlySpan`1 source, Span`1 destination, Func`2 func)
   at System.Linq.Enumerable.SelectListIterator`2.ToList()
   at DineEasy.Application.Extensions.ReservationExtensions.ToDtos(IEnumerable`1 reservations) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at DineEasy.Application.Services.ReservationService.GetAllAsync() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 165
2025-06-22 00:48:04.033 +02:00 [ERR] Error retrieving reservations
System.NullReferenceException: Object reference not set to an instance of an object.
   at DineEasy.Application.Extensions.ReservationExtensions.ToDto(Reservation reservation) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 10
   at DineEasy.Application.Extensions.ReservationExtensions.<>c.<ToDtos>b__2_0(Reservation r) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at System.Linq.Enumerable.SelectListIterator`2.Fill(ReadOnlySpan`1 source, Span`1 destination, Func`2 func)
   at System.Linq.Enumerable.SelectListIterator`2.ToList()
   at DineEasy.Application.Extensions.ReservationExtensions.ToDtos(IEnumerable`1 reservations) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at DineEasy.Application.Services.ReservationService.GetAllAsync() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 165
   at DineEasy.WebAPI.Controllers.ReservationsController.GetAll() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.WebAPI/Controllers/ReservationsController.cs:line 39
2025-06-22 00:48:04.033 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 1.1834ms.
2025-06-22 00:48:04.033 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-06-22 00:48:04.033 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI) in 1.5419ms
2025-06-22 00:48:04.033 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI)'
2025-06-22 00:48:04.033 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5049/api/reservations - 500 null text/plain; charset=utf-8 2.2426ms
2025-06-22 00:48:04.273 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5049/api/reservations - null null
2025-06-22 00:48:04.274 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI)'
2025-06-22 00:48:04.274 +02:00 [INF] Route matched with {action = "GetAll", controller = "Reservations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[DineEasy.SharedKernel.Models.Reservation.ReservationDto]]] GetAll() on controller DineEasy.WebAPI.Controllers.ReservationsController (DineEasy.WebAPI).
2025-06-22 00:48:04.274 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:48:04.274 +02:00 [INF] Getting reservations for user: admin123123
2025-06-22 00:48:04.274 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 1
2025-06-22 00:48:04.275 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin123123
2025-06-22 00:48:04.275 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = admin@dineeasy.com
2025-06-22 00:48:04.275 +02:00 [INF] Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = Admin
2025-06-22 00:48:04.275 +02:00 [INF] Claim: exp = 1750632203
2025-06-22 00:48:04.275 +02:00 [INF] Claim: iss = DineEasy
2025-06-22 00:48:04.275 +02:00 [INF] Claim: aud = DineEasy-Users
2025-06-22 00:48:04.275 +02:00 [INF] User is Admin - returning all reservations
2025-06-22 00:48:04.275 +02:00 [INF] Retrieving all reservations
2025-06-22 00:48:04.275 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Id", "r"."CreatedAt", "r"."Duration", "r"."PartySize", "r"."ReservationDateTime", "r"."SpecialRequests", "r"."Status", "r"."TableId", "r"."UserId"
FROM "Reservations" AS "r"
2025-06-22 00:48:04.276 +02:00 [ERR] Error occurred while retrieving all reservations
System.NullReferenceException: Object reference not set to an instance of an object.
   at DineEasy.Application.Extensions.ReservationExtensions.ToDto(Reservation reservation) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 10
   at DineEasy.Application.Extensions.ReservationExtensions.<>c.<ToDtos>b__2_0(Reservation r) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at System.Linq.Enumerable.SelectListIterator`2.Fill(ReadOnlySpan`1 source, Span`1 destination, Func`2 func)
   at System.Linq.Enumerable.SelectListIterator`2.ToList()
   at DineEasy.Application.Extensions.ReservationExtensions.ToDtos(IEnumerable`1 reservations) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at DineEasy.Application.Services.ReservationService.GetAllAsync() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 165
2025-06-22 00:48:04.276 +02:00 [ERR] Error retrieving reservations
System.NullReferenceException: Object reference not set to an instance of an object.
   at DineEasy.Application.Extensions.ReservationExtensions.ToDto(Reservation reservation) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 10
   at DineEasy.Application.Extensions.ReservationExtensions.<>c.<ToDtos>b__2_0(Reservation r) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at System.Linq.Enumerable.SelectListIterator`2.Fill(ReadOnlySpan`1 source, Span`1 destination, Func`2 func)
   at System.Linq.Enumerable.SelectListIterator`2.ToList()
   at DineEasy.Application.Extensions.ReservationExtensions.ToDtos(IEnumerable`1 reservations) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at DineEasy.Application.Services.ReservationService.GetAllAsync() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 165
   at DineEasy.WebAPI.Controllers.ReservationsController.GetAll() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.WebAPI/Controllers/ReservationsController.cs:line 39
2025-06-22 00:48:04.276 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 1.8465ms.
2025-06-22 00:48:04.276 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-06-22 00:48:04.276 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI) in 2.5676ms
2025-06-22 00:48:04.276 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI)'
2025-06-22 00:48:04.277 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5049/api/reservations - 500 null text/plain; charset=utf-8 3.3823ms
2025-06-22 00:48:04.317 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5049/api/reservations - null null
2025-06-22 00:48:04.317 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI)'
2025-06-22 00:48:04.318 +02:00 [INF] Route matched with {action = "GetAll", controller = "Reservations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[DineEasy.SharedKernel.Models.Reservation.ReservationDto]]] GetAll() on controller DineEasy.WebAPI.Controllers.ReservationsController (DineEasy.WebAPI).
2025-06-22 00:48:04.318 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:48:04.318 +02:00 [INF] Getting reservations for user: admin123123
2025-06-22 00:48:04.318 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 1
2025-06-22 00:48:04.318 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin123123
2025-06-22 00:48:04.318 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = admin@dineeasy.com
2025-06-22 00:48:04.318 +02:00 [INF] Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = Admin
2025-06-22 00:48:04.318 +02:00 [INF] Claim: exp = 1750632203
2025-06-22 00:48:04.318 +02:00 [INF] Claim: iss = DineEasy
2025-06-22 00:48:04.318 +02:00 [INF] Claim: aud = DineEasy-Users
2025-06-22 00:48:04.318 +02:00 [INF] User is Admin - returning all reservations
2025-06-22 00:48:04.318 +02:00 [INF] Retrieving all reservations
2025-06-22 00:48:04.318 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Id", "r"."CreatedAt", "r"."Duration", "r"."PartySize", "r"."ReservationDateTime", "r"."SpecialRequests", "r"."Status", "r"."TableId", "r"."UserId"
FROM "Reservations" AS "r"
2025-06-22 00:48:04.319 +02:00 [ERR] Error occurred while retrieving all reservations
System.NullReferenceException: Object reference not set to an instance of an object.
   at DineEasy.Application.Extensions.ReservationExtensions.ToDto(Reservation reservation) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 10
   at DineEasy.Application.Extensions.ReservationExtensions.<>c.<ToDtos>b__2_0(Reservation r) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at System.Linq.Enumerable.SelectListIterator`2.Fill(ReadOnlySpan`1 source, Span`1 destination, Func`2 func)
   at System.Linq.Enumerable.SelectListIterator`2.ToList()
   at DineEasy.Application.Extensions.ReservationExtensions.ToDtos(IEnumerable`1 reservations) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at DineEasy.Application.Services.ReservationService.GetAllAsync() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 165
2025-06-22 00:48:04.319 +02:00 [ERR] Error retrieving reservations
System.NullReferenceException: Object reference not set to an instance of an object.
   at DineEasy.Application.Extensions.ReservationExtensions.ToDto(Reservation reservation) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 10
   at DineEasy.Application.Extensions.ReservationExtensions.<>c.<ToDtos>b__2_0(Reservation r) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at System.Linq.Enumerable.SelectListIterator`2.Fill(ReadOnlySpan`1 source, Span`1 destination, Func`2 func)
   at System.Linq.Enumerable.SelectListIterator`2.ToList()
   at DineEasy.Application.Extensions.ReservationExtensions.ToDtos(IEnumerable`1 reservations) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at DineEasy.Application.Services.ReservationService.GetAllAsync() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 165
   at DineEasy.WebAPI.Controllers.ReservationsController.GetAll() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.WebAPI/Controllers/ReservationsController.cs:line 39
2025-06-22 00:48:04.319 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 1.2379ms.
2025-06-22 00:48:04.319 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-06-22 00:48:04.319 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI) in 1.5805ms
2025-06-22 00:48:04.319 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI)'
2025-06-22 00:48:04.319 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5049/api/reservations - 500 null text/plain; charset=utf-8 2.426ms
2025-06-22 00:48:04.433 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5049/api/reservations - null null
2025-06-22 00:48:04.434 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI)'
2025-06-22 00:48:04.434 +02:00 [INF] Route matched with {action = "GetAll", controller = "Reservations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[DineEasy.SharedKernel.Models.Reservation.ReservationDto]]] GetAll() on controller DineEasy.WebAPI.Controllers.ReservationsController (DineEasy.WebAPI).
2025-06-22 00:48:04.434 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:48:04.434 +02:00 [INF] Getting reservations for user: admin123123
2025-06-22 00:48:04.434 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 1
2025-06-22 00:48:04.434 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin123123
2025-06-22 00:48:04.434 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = admin@dineeasy.com
2025-06-22 00:48:04.434 +02:00 [INF] Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = Admin
2025-06-22 00:48:04.434 +02:00 [INF] Claim: exp = 1750632203
2025-06-22 00:48:04.434 +02:00 [INF] Claim: iss = DineEasy
2025-06-22 00:48:04.434 +02:00 [INF] Claim: aud = DineEasy-Users
2025-06-22 00:48:04.434 +02:00 [INF] User is Admin - returning all reservations
2025-06-22 00:48:04.434 +02:00 [INF] Retrieving all reservations
2025-06-22 00:48:04.435 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Id", "r"."CreatedAt", "r"."Duration", "r"."PartySize", "r"."ReservationDateTime", "r"."SpecialRequests", "r"."Status", "r"."TableId", "r"."UserId"
FROM "Reservations" AS "r"
2025-06-22 00:48:04.436 +02:00 [ERR] Error occurred while retrieving all reservations
System.NullReferenceException: Object reference not set to an instance of an object.
   at DineEasy.Application.Extensions.ReservationExtensions.ToDto(Reservation reservation) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 10
   at DineEasy.Application.Extensions.ReservationExtensions.<>c.<ToDtos>b__2_0(Reservation r) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at System.Linq.Enumerable.SelectListIterator`2.Fill(ReadOnlySpan`1 source, Span`1 destination, Func`2 func)
   at System.Linq.Enumerable.SelectListIterator`2.ToList()
   at DineEasy.Application.Extensions.ReservationExtensions.ToDtos(IEnumerable`1 reservations) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at DineEasy.Application.Services.ReservationService.GetAllAsync() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 165
2025-06-22 00:48:04.437 +02:00 [ERR] Error retrieving reservations
System.NullReferenceException: Object reference not set to an instance of an object.
   at DineEasy.Application.Extensions.ReservationExtensions.ToDto(Reservation reservation) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 10
   at DineEasy.Application.Extensions.ReservationExtensions.<>c.<ToDtos>b__2_0(Reservation r) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at System.Linq.Enumerable.SelectListIterator`2.Fill(ReadOnlySpan`1 source, Span`1 destination, Func`2 func)
   at System.Linq.Enumerable.SelectListIterator`2.ToList()
   at DineEasy.Application.Extensions.ReservationExtensions.ToDtos(IEnumerable`1 reservations) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at DineEasy.Application.Services.ReservationService.GetAllAsync() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 165
   at DineEasy.WebAPI.Controllers.ReservationsController.GetAll() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.WebAPI/Controllers/ReservationsController.cs:line 39
2025-06-22 00:48:04.438 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 3.7727ms.
2025-06-22 00:48:04.438 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-06-22 00:48:04.438 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI) in 4.3942ms
2025-06-22 00:48:04.438 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI)'
2025-06-22 00:48:04.438 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5049/api/reservations - 500 null text/plain; charset=utf-8 5.1662ms
2025-06-22 00:48:04.623 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5049/api/reservations - null null
2025-06-22 00:48:04.624 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI)'
2025-06-22 00:48:04.624 +02:00 [INF] Route matched with {action = "GetAll", controller = "Reservations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[DineEasy.SharedKernel.Models.Reservation.ReservationDto]]] GetAll() on controller DineEasy.WebAPI.Controllers.ReservationsController (DineEasy.WebAPI).
2025-06-22 00:48:04.624 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:48:04.624 +02:00 [INF] Getting reservations for user: admin123123
2025-06-22 00:48:04.624 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 1
2025-06-22 00:48:04.624 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin123123
2025-06-22 00:48:04.624 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = admin@dineeasy.com
2025-06-22 00:48:04.624 +02:00 [INF] Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = Admin
2025-06-22 00:48:04.624 +02:00 [INF] Claim: exp = 1750632203
2025-06-22 00:48:04.624 +02:00 [INF] Claim: iss = DineEasy
2025-06-22 00:48:04.624 +02:00 [INF] Claim: aud = DineEasy-Users
2025-06-22 00:48:04.624 +02:00 [INF] User is Admin - returning all reservations
2025-06-22 00:48:04.624 +02:00 [INF] Retrieving all reservations
2025-06-22 00:48:04.625 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Id", "r"."CreatedAt", "r"."Duration", "r"."PartySize", "r"."ReservationDateTime", "r"."SpecialRequests", "r"."Status", "r"."TableId", "r"."UserId"
FROM "Reservations" AS "r"
2025-06-22 00:48:04.625 +02:00 [ERR] Error occurred while retrieving all reservations
System.NullReferenceException: Object reference not set to an instance of an object.
   at DineEasy.Application.Extensions.ReservationExtensions.ToDto(Reservation reservation) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 10
   at DineEasy.Application.Extensions.ReservationExtensions.<>c.<ToDtos>b__2_0(Reservation r) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at System.Linq.Enumerable.SelectListIterator`2.Fill(ReadOnlySpan`1 source, Span`1 destination, Func`2 func)
   at System.Linq.Enumerable.SelectListIterator`2.ToList()
   at DineEasy.Application.Extensions.ReservationExtensions.ToDtos(IEnumerable`1 reservations) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at DineEasy.Application.Services.ReservationService.GetAllAsync() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 165
2025-06-22 00:48:04.626 +02:00 [ERR] Error retrieving reservations
System.NullReferenceException: Object reference not set to an instance of an object.
   at DineEasy.Application.Extensions.ReservationExtensions.ToDto(Reservation reservation) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 10
   at DineEasy.Application.Extensions.ReservationExtensions.<>c.<ToDtos>b__2_0(Reservation r) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at System.Linq.Enumerable.SelectListIterator`2.Fill(ReadOnlySpan`1 source, Span`1 destination, Func`2 func)
   at System.Linq.Enumerable.SelectListIterator`2.ToList()
   at DineEasy.Application.Extensions.ReservationExtensions.ToDtos(IEnumerable`1 reservations) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at DineEasy.Application.Services.ReservationService.GetAllAsync() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 165
   at DineEasy.WebAPI.Controllers.ReservationsController.GetAll() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.WebAPI/Controllers/ReservationsController.cs:line 39
2025-06-22 00:48:04.626 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 1.5965ms.
2025-06-22 00:48:04.626 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-06-22 00:48:04.626 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI) in 2.1168ms
2025-06-22 00:48:04.626 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI)'
2025-06-22 00:48:04.626 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5049/api/reservations - 500 null text/plain; charset=utf-8 2.8839ms
2025-06-22 00:48:04.703 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5049/api/reservations - null null
2025-06-22 00:48:04.703 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI)'
2025-06-22 00:48:04.703 +02:00 [INF] Route matched with {action = "GetAll", controller = "Reservations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[DineEasy.SharedKernel.Models.Reservation.ReservationDto]]] GetAll() on controller DineEasy.WebAPI.Controllers.ReservationsController (DineEasy.WebAPI).
2025-06-22 00:48:04.704 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:48:04.704 +02:00 [INF] Getting reservations for user: admin123123
2025-06-22 00:48:04.704 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 1
2025-06-22 00:48:04.704 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin123123
2025-06-22 00:48:04.704 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = admin@dineeasy.com
2025-06-22 00:48:04.704 +02:00 [INF] Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = Admin
2025-06-22 00:48:04.704 +02:00 [INF] Claim: exp = 1750632203
2025-06-22 00:48:04.704 +02:00 [INF] Claim: iss = DineEasy
2025-06-22 00:48:04.704 +02:00 [INF] Claim: aud = DineEasy-Users
2025-06-22 00:48:04.704 +02:00 [INF] User is Admin - returning all reservations
2025-06-22 00:48:04.704 +02:00 [INF] Retrieving all reservations
2025-06-22 00:48:04.705 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Id", "r"."CreatedAt", "r"."Duration", "r"."PartySize", "r"."ReservationDateTime", "r"."SpecialRequests", "r"."Status", "r"."TableId", "r"."UserId"
FROM "Reservations" AS "r"
2025-06-22 00:48:04.705 +02:00 [ERR] Error occurred while retrieving all reservations
System.NullReferenceException: Object reference not set to an instance of an object.
   at DineEasy.Application.Extensions.ReservationExtensions.ToDto(Reservation reservation) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 10
   at DineEasy.Application.Extensions.ReservationExtensions.<>c.<ToDtos>b__2_0(Reservation r) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at System.Linq.Enumerable.SelectListIterator`2.Fill(ReadOnlySpan`1 source, Span`1 destination, Func`2 func)
   at System.Linq.Enumerable.SelectListIterator`2.ToList()
   at DineEasy.Application.Extensions.ReservationExtensions.ToDtos(IEnumerable`1 reservations) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at DineEasy.Application.Services.ReservationService.GetAllAsync() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 165
2025-06-22 00:48:04.706 +02:00 [ERR] Error retrieving reservations
System.NullReferenceException: Object reference not set to an instance of an object.
   at DineEasy.Application.Extensions.ReservationExtensions.ToDto(Reservation reservation) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 10
   at DineEasy.Application.Extensions.ReservationExtensions.<>c.<ToDtos>b__2_0(Reservation r) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at System.Linq.Enumerable.SelectListIterator`2.Fill(ReadOnlySpan`1 source, Span`1 destination, Func`2 func)
   at System.Linq.Enumerable.SelectListIterator`2.ToList()
   at DineEasy.Application.Extensions.ReservationExtensions.ToDtos(IEnumerable`1 reservations) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at DineEasy.Application.Services.ReservationService.GetAllAsync() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 165
   at DineEasy.WebAPI.Controllers.ReservationsController.GetAll() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.WebAPI/Controllers/ReservationsController.cs:line 39
2025-06-22 00:48:04.706 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 2.079ms.
2025-06-22 00:48:04.706 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-06-22 00:48:04.706 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI) in 2.7804ms
2025-06-22 00:48:04.706 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI)'
2025-06-22 00:48:04.706 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5049/api/reservations - 500 null text/plain; charset=utf-8 3.619ms
2025-06-22 00:48:04.862 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5049/api/reservations - null null
2025-06-22 00:48:04.862 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI)'
2025-06-22 00:48:04.862 +02:00 [INF] Route matched with {action = "GetAll", controller = "Reservations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[DineEasy.SharedKernel.Models.Reservation.ReservationDto]]] GetAll() on controller DineEasy.WebAPI.Controllers.ReservationsController (DineEasy.WebAPI).
2025-06-22 00:48:04.862 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:48:04.862 +02:00 [INF] Getting reservations for user: admin123123
2025-06-22 00:48:04.862 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 1
2025-06-22 00:48:04.862 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin123123
2025-06-22 00:48:04.862 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = admin@dineeasy.com
2025-06-22 00:48:04.862 +02:00 [INF] Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = Admin
2025-06-22 00:48:04.862 +02:00 [INF] Claim: exp = 1750632203
2025-06-22 00:48:04.862 +02:00 [INF] Claim: iss = DineEasy
2025-06-22 00:48:04.862 +02:00 [INF] Claim: aud = DineEasy-Users
2025-06-22 00:48:04.862 +02:00 [INF] User is Admin - returning all reservations
2025-06-22 00:48:04.862 +02:00 [INF] Retrieving all reservations
2025-06-22 00:48:04.863 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Id", "r"."CreatedAt", "r"."Duration", "r"."PartySize", "r"."ReservationDateTime", "r"."SpecialRequests", "r"."Status", "r"."TableId", "r"."UserId"
FROM "Reservations" AS "r"
2025-06-22 00:48:04.864 +02:00 [ERR] Error occurred while retrieving all reservations
System.NullReferenceException: Object reference not set to an instance of an object.
   at DineEasy.Application.Extensions.ReservationExtensions.ToDto(Reservation reservation) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 10
   at DineEasy.Application.Extensions.ReservationExtensions.<>c.<ToDtos>b__2_0(Reservation r) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at System.Linq.Enumerable.SelectListIterator`2.Fill(ReadOnlySpan`1 source, Span`1 destination, Func`2 func)
   at System.Linq.Enumerable.SelectListIterator`2.ToList()
   at DineEasy.Application.Extensions.ReservationExtensions.ToDtos(IEnumerable`1 reservations) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at DineEasy.Application.Services.ReservationService.GetAllAsync() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 165
2025-06-22 00:48:04.864 +02:00 [ERR] Error retrieving reservations
System.NullReferenceException: Object reference not set to an instance of an object.
   at DineEasy.Application.Extensions.ReservationExtensions.ToDto(Reservation reservation) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 10
   at DineEasy.Application.Extensions.ReservationExtensions.<>c.<ToDtos>b__2_0(Reservation r) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at System.Linq.Enumerable.SelectListIterator`2.Fill(ReadOnlySpan`1 source, Span`1 destination, Func`2 func)
   at System.Linq.Enumerable.SelectListIterator`2.ToList()
   at DineEasy.Application.Extensions.ReservationExtensions.ToDtos(IEnumerable`1 reservations) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at DineEasy.Application.Services.ReservationService.GetAllAsync() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 165
   at DineEasy.WebAPI.Controllers.ReservationsController.GetAll() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.WebAPI/Controllers/ReservationsController.cs:line 39
2025-06-22 00:48:04.864 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 2.1792ms.
2025-06-22 00:48:04.865 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-06-22 00:48:04.865 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI) in 2.5105ms
2025-06-22 00:48:04.865 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI)'
2025-06-22 00:48:04.865 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5049/api/reservations - 500 null text/plain; charset=utf-8 3.0599ms
2025-06-22 00:48:05.193 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5049/api/reservations - null null
2025-06-22 00:48:05.194 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI)'
2025-06-22 00:48:05.194 +02:00 [INF] Route matched with {action = "GetAll", controller = "Reservations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[DineEasy.SharedKernel.Models.Reservation.ReservationDto]]] GetAll() on controller DineEasy.WebAPI.Controllers.ReservationsController (DineEasy.WebAPI).
2025-06-22 00:48:05.194 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:48:05.194 +02:00 [INF] Getting reservations for user: admin123123
2025-06-22 00:48:05.194 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 1
2025-06-22 00:48:05.194 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin123123
2025-06-22 00:48:05.194 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = admin@dineeasy.com
2025-06-22 00:48:05.194 +02:00 [INF] Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = Admin
2025-06-22 00:48:05.194 +02:00 [INF] Claim: exp = 1750632203
2025-06-22 00:48:05.194 +02:00 [INF] Claim: iss = DineEasy
2025-06-22 00:48:05.194 +02:00 [INF] Claim: aud = DineEasy-Users
2025-06-22 00:48:05.194 +02:00 [INF] User is Admin - returning all reservations
2025-06-22 00:48:05.194 +02:00 [INF] Retrieving all reservations
2025-06-22 00:48:05.194 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Id", "r"."CreatedAt", "r"."Duration", "r"."PartySize", "r"."ReservationDateTime", "r"."SpecialRequests", "r"."Status", "r"."TableId", "r"."UserId"
FROM "Reservations" AS "r"
2025-06-22 00:48:05.195 +02:00 [ERR] Error occurred while retrieving all reservations
System.NullReferenceException: Object reference not set to an instance of an object.
   at DineEasy.Application.Extensions.ReservationExtensions.ToDto(Reservation reservation) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 10
   at DineEasy.Application.Extensions.ReservationExtensions.<>c.<ToDtos>b__2_0(Reservation r) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at System.Linq.Enumerable.SelectListIterator`2.Fill(ReadOnlySpan`1 source, Span`1 destination, Func`2 func)
   at System.Linq.Enumerable.SelectListIterator`2.ToList()
   at DineEasy.Application.Extensions.ReservationExtensions.ToDtos(IEnumerable`1 reservations) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at DineEasy.Application.Services.ReservationService.GetAllAsync() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 165
2025-06-22 00:48:05.195 +02:00 [ERR] Error retrieving reservations
System.NullReferenceException: Object reference not set to an instance of an object.
   at DineEasy.Application.Extensions.ReservationExtensions.ToDto(Reservation reservation) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 10
   at DineEasy.Application.Extensions.ReservationExtensions.<>c.<ToDtos>b__2_0(Reservation r) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at System.Linq.Enumerable.SelectListIterator`2.Fill(ReadOnlySpan`1 source, Span`1 destination, Func`2 func)
   at System.Linq.Enumerable.SelectListIterator`2.ToList()
   at DineEasy.Application.Extensions.ReservationExtensions.ToDtos(IEnumerable`1 reservations) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at DineEasy.Application.Services.ReservationService.GetAllAsync() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 165
   at DineEasy.WebAPI.Controllers.ReservationsController.GetAll() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.WebAPI/Controllers/ReservationsController.cs:line 39
2025-06-22 00:48:05.195 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 1.5248ms.
2025-06-22 00:48:05.196 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-06-22 00:48:05.196 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI) in 1.8651ms
2025-06-22 00:48:05.196 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI)'
2025-06-22 00:48:05.196 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5049/api/reservations - 500 null text/plain; charset=utf-8 2.7137ms
2025-06-22 00:48:05.280 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5049/api/reservations - null null
2025-06-22 00:48:05.280 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI)'
2025-06-22 00:48:05.280 +02:00 [INF] Route matched with {action = "GetAll", controller = "Reservations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[DineEasy.SharedKernel.Models.Reservation.ReservationDto]]] GetAll() on controller DineEasy.WebAPI.Controllers.ReservationsController (DineEasy.WebAPI).
2025-06-22 00:48:05.280 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:48:05.280 +02:00 [INF] Getting reservations for user: admin123123
2025-06-22 00:48:05.280 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 1
2025-06-22 00:48:05.280 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin123123
2025-06-22 00:48:05.280 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = admin@dineeasy.com
2025-06-22 00:48:05.280 +02:00 [INF] Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = Admin
2025-06-22 00:48:05.280 +02:00 [INF] Claim: exp = 1750632203
2025-06-22 00:48:05.280 +02:00 [INF] Claim: iss = DineEasy
2025-06-22 00:48:05.280 +02:00 [INF] Claim: aud = DineEasy-Users
2025-06-22 00:48:05.280 +02:00 [INF] User is Admin - returning all reservations
2025-06-22 00:48:05.280 +02:00 [INF] Retrieving all reservations
2025-06-22 00:48:05.281 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Id", "r"."CreatedAt", "r"."Duration", "r"."PartySize", "r"."ReservationDateTime", "r"."SpecialRequests", "r"."Status", "r"."TableId", "r"."UserId"
FROM "Reservations" AS "r"
2025-06-22 00:48:05.282 +02:00 [ERR] Error occurred while retrieving all reservations
System.NullReferenceException: Object reference not set to an instance of an object.
   at DineEasy.Application.Extensions.ReservationExtensions.ToDto(Reservation reservation) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 10
   at DineEasy.Application.Extensions.ReservationExtensions.<>c.<ToDtos>b__2_0(Reservation r) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at System.Linq.Enumerable.SelectListIterator`2.Fill(ReadOnlySpan`1 source, Span`1 destination, Func`2 func)
   at System.Linq.Enumerable.SelectListIterator`2.ToList()
   at DineEasy.Application.Extensions.ReservationExtensions.ToDtos(IEnumerable`1 reservations) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at DineEasy.Application.Services.ReservationService.GetAllAsync() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 165
2025-06-22 00:48:05.282 +02:00 [ERR] Error retrieving reservations
System.NullReferenceException: Object reference not set to an instance of an object.
   at DineEasy.Application.Extensions.ReservationExtensions.ToDto(Reservation reservation) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 10
   at DineEasy.Application.Extensions.ReservationExtensions.<>c.<ToDtos>b__2_0(Reservation r) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at System.Linq.Enumerable.SelectListIterator`2.Fill(ReadOnlySpan`1 source, Span`1 destination, Func`2 func)
   at System.Linq.Enumerable.SelectListIterator`2.ToList()
   at DineEasy.Application.Extensions.ReservationExtensions.ToDtos(IEnumerable`1 reservations) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at DineEasy.Application.Services.ReservationService.GetAllAsync() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 165
   at DineEasy.WebAPI.Controllers.ReservationsController.GetAll() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.WebAPI/Controllers/ReservationsController.cs:line 39
2025-06-22 00:48:05.282 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 1.7269ms.
2025-06-22 00:48:05.282 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-06-22 00:48:05.282 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI) in 2.1439ms
2025-06-22 00:48:05.282 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI)'
2025-06-22 00:48:05.282 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5049/api/reservations - 500 null text/plain; charset=utf-8 2.7442ms
2025-06-22 00:48:05.440 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5049/api/reservations - null null
2025-06-22 00:48:05.441 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI)'
2025-06-22 00:48:05.441 +02:00 [INF] Route matched with {action = "GetAll", controller = "Reservations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[DineEasy.SharedKernel.Models.Reservation.ReservationDto]]] GetAll() on controller DineEasy.WebAPI.Controllers.ReservationsController (DineEasy.WebAPI).
2025-06-22 00:48:05.441 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:48:05.441 +02:00 [INF] Getting reservations for user: admin123123
2025-06-22 00:48:05.441 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 1
2025-06-22 00:48:05.441 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin123123
2025-06-22 00:48:05.441 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = admin@dineeasy.com
2025-06-22 00:48:05.441 +02:00 [INF] Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = Admin
2025-06-22 00:48:05.441 +02:00 [INF] Claim: exp = 1750632203
2025-06-22 00:48:05.441 +02:00 [INF] Claim: iss = DineEasy
2025-06-22 00:48:05.441 +02:00 [INF] Claim: aud = DineEasy-Users
2025-06-22 00:48:05.441 +02:00 [INF] User is Admin - returning all reservations
2025-06-22 00:48:05.441 +02:00 [INF] Retrieving all reservations
2025-06-22 00:48:05.442 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Id", "r"."CreatedAt", "r"."Duration", "r"."PartySize", "r"."ReservationDateTime", "r"."SpecialRequests", "r"."Status", "r"."TableId", "r"."UserId"
FROM "Reservations" AS "r"
2025-06-22 00:48:05.443 +02:00 [ERR] Error occurred while retrieving all reservations
System.NullReferenceException: Object reference not set to an instance of an object.
   at DineEasy.Application.Extensions.ReservationExtensions.ToDto(Reservation reservation) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 10
   at DineEasy.Application.Extensions.ReservationExtensions.<>c.<ToDtos>b__2_0(Reservation r) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at System.Linq.Enumerable.SelectListIterator`2.Fill(ReadOnlySpan`1 source, Span`1 destination, Func`2 func)
   at System.Linq.Enumerable.SelectListIterator`2.ToList()
   at DineEasy.Application.Extensions.ReservationExtensions.ToDtos(IEnumerable`1 reservations) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at DineEasy.Application.Services.ReservationService.GetAllAsync() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 165
2025-06-22 00:48:05.443 +02:00 [ERR] Error retrieving reservations
System.NullReferenceException: Object reference not set to an instance of an object.
   at DineEasy.Application.Extensions.ReservationExtensions.ToDto(Reservation reservation) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 10
   at DineEasy.Application.Extensions.ReservationExtensions.<>c.<ToDtos>b__2_0(Reservation r) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at System.Linq.Enumerable.SelectListIterator`2.Fill(ReadOnlySpan`1 source, Span`1 destination, Func`2 func)
   at System.Linq.Enumerable.SelectListIterator`2.ToList()
   at DineEasy.Application.Extensions.ReservationExtensions.ToDtos(IEnumerable`1 reservations) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at DineEasy.Application.Services.ReservationService.GetAllAsync() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 165
   at DineEasy.WebAPI.Controllers.ReservationsController.GetAll() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.WebAPI/Controllers/ReservationsController.cs:line 39
2025-06-22 00:48:05.443 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 1.7604ms.
2025-06-22 00:48:05.443 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-06-22 00:48:05.443 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI) in 2.5763ms
2025-06-22 00:48:05.443 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI)'
2025-06-22 00:48:05.444 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5049/api/reservations - 500 null text/plain; charset=utf-8 3.351ms
2025-06-22 00:48:06.504 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5049/api/reservations - null null
2025-06-22 00:48:06.505 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI)'
2025-06-22 00:48:06.505 +02:00 [INF] Route matched with {action = "GetAll", controller = "Reservations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[DineEasy.SharedKernel.Models.Reservation.ReservationDto]]] GetAll() on controller DineEasy.WebAPI.Controllers.ReservationsController (DineEasy.WebAPI).
2025-06-22 00:48:06.505 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:48:06.506 +02:00 [INF] Getting reservations for user: admin123123
2025-06-22 00:48:06.506 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 1
2025-06-22 00:48:06.506 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin123123
2025-06-22 00:48:06.506 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = admin@dineeasy.com
2025-06-22 00:48:06.506 +02:00 [INF] Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = Admin
2025-06-22 00:48:06.506 +02:00 [INF] Claim: exp = 1750632203
2025-06-22 00:48:06.506 +02:00 [INF] Claim: iss = DineEasy
2025-06-22 00:48:06.506 +02:00 [INF] Claim: aud = DineEasy-Users
2025-06-22 00:48:06.506 +02:00 [INF] User is Admin - returning all reservations
2025-06-22 00:48:06.506 +02:00 [INF] Retrieving all reservations
2025-06-22 00:48:06.507 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Id", "r"."CreatedAt", "r"."Duration", "r"."PartySize", "r"."ReservationDateTime", "r"."SpecialRequests", "r"."Status", "r"."TableId", "r"."UserId"
FROM "Reservations" AS "r"
2025-06-22 00:48:06.507 +02:00 [ERR] Error occurred while retrieving all reservations
System.NullReferenceException: Object reference not set to an instance of an object.
   at DineEasy.Application.Extensions.ReservationExtensions.ToDto(Reservation reservation) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 10
   at DineEasy.Application.Extensions.ReservationExtensions.<>c.<ToDtos>b__2_0(Reservation r) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at System.Linq.Enumerable.SelectListIterator`2.Fill(ReadOnlySpan`1 source, Span`1 destination, Func`2 func)
   at System.Linq.Enumerable.SelectListIterator`2.ToList()
   at DineEasy.Application.Extensions.ReservationExtensions.ToDtos(IEnumerable`1 reservations) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at DineEasy.Application.Services.ReservationService.GetAllAsync() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 165
2025-06-22 00:48:06.507 +02:00 [ERR] Error retrieving reservations
System.NullReferenceException: Object reference not set to an instance of an object.
   at DineEasy.Application.Extensions.ReservationExtensions.ToDto(Reservation reservation) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 10
   at DineEasy.Application.Extensions.ReservationExtensions.<>c.<ToDtos>b__2_0(Reservation r) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at System.Linq.Enumerable.SelectListIterator`2.Fill(ReadOnlySpan`1 source, Span`1 destination, Func`2 func)
   at System.Linq.Enumerable.SelectListIterator`2.ToList()
   at DineEasy.Application.Extensions.ReservationExtensions.ToDtos(IEnumerable`1 reservations) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at DineEasy.Application.Services.ReservationService.GetAllAsync() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 165
   at DineEasy.WebAPI.Controllers.ReservationsController.GetAll() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.WebAPI/Controllers/ReservationsController.cs:line 39
2025-06-22 00:48:06.507 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 1.8635ms.
2025-06-22 00:48:06.507 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-06-22 00:48:06.508 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI) in 2.5012ms
2025-06-22 00:48:06.508 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI)'
2025-06-22 00:48:06.508 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5049/api/reservations - 500 null text/plain; charset=utf-8 3.5165ms
2025-06-22 00:48:06.907 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5049/api/reservations - null null
2025-06-22 00:48:06.907 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI)'
2025-06-22 00:48:06.908 +02:00 [INF] Route matched with {action = "GetAll", controller = "Reservations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[DineEasy.SharedKernel.Models.Reservation.ReservationDto]]] GetAll() on controller DineEasy.WebAPI.Controllers.ReservationsController (DineEasy.WebAPI).
2025-06-22 00:48:06.908 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:48:06.908 +02:00 [INF] Getting reservations for user: admin123123
2025-06-22 00:48:06.908 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 1
2025-06-22 00:48:06.908 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin123123
2025-06-22 00:48:06.908 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = admin@dineeasy.com
2025-06-22 00:48:06.908 +02:00 [INF] Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = Admin
2025-06-22 00:48:06.908 +02:00 [INF] Claim: exp = 1750632203
2025-06-22 00:48:06.908 +02:00 [INF] Claim: iss = DineEasy
2025-06-22 00:48:06.908 +02:00 [INF] Claim: aud = DineEasy-Users
2025-06-22 00:48:06.908 +02:00 [INF] User is Admin - returning all reservations
2025-06-22 00:48:06.908 +02:00 [INF] Retrieving all reservations
2025-06-22 00:48:06.909 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Id", "r"."CreatedAt", "r"."Duration", "r"."PartySize", "r"."ReservationDateTime", "r"."SpecialRequests", "r"."Status", "r"."TableId", "r"."UserId"
FROM "Reservations" AS "r"
2025-06-22 00:48:06.910 +02:00 [ERR] Error occurred while retrieving all reservations
System.NullReferenceException: Object reference not set to an instance of an object.
   at DineEasy.Application.Extensions.ReservationExtensions.ToDto(Reservation reservation) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 10
   at DineEasy.Application.Extensions.ReservationExtensions.<>c.<ToDtos>b__2_0(Reservation r) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at System.Linq.Enumerable.SelectListIterator`2.Fill(ReadOnlySpan`1 source, Span`1 destination, Func`2 func)
   at System.Linq.Enumerable.SelectListIterator`2.ToList()
   at DineEasy.Application.Extensions.ReservationExtensions.ToDtos(IEnumerable`1 reservations) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at DineEasy.Application.Services.ReservationService.GetAllAsync() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 165
2025-06-22 00:48:06.911 +02:00 [ERR] Error retrieving reservations
System.NullReferenceException: Object reference not set to an instance of an object.
   at DineEasy.Application.Extensions.ReservationExtensions.ToDto(Reservation reservation) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 10
   at DineEasy.Application.Extensions.ReservationExtensions.<>c.<ToDtos>b__2_0(Reservation r) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at System.Linq.Enumerable.SelectListIterator`2.Fill(ReadOnlySpan`1 source, Span`1 destination, Func`2 func)
   at System.Linq.Enumerable.SelectListIterator`2.ToList()
   at DineEasy.Application.Extensions.ReservationExtensions.ToDtos(IEnumerable`1 reservations) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at DineEasy.Application.Services.ReservationService.GetAllAsync() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 165
   at DineEasy.WebAPI.Controllers.ReservationsController.GetAll() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.WebAPI/Controllers/ReservationsController.cs:line 39
2025-06-22 00:48:06.911 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 3.3921ms.
2025-06-22 00:48:06.912 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-06-22 00:48:06.912 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI) in 4.0777ms
2025-06-22 00:48:06.912 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI)'
2025-06-22 00:48:06.912 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5049/api/reservations - 500 null text/plain; charset=utf-8 4.9616ms
2025-06-22 00:48:07.300 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5049/api/reservations - null null
2025-06-22 00:48:07.301 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI)'
2025-06-22 00:48:07.301 +02:00 [INF] Route matched with {action = "GetAll", controller = "Reservations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[DineEasy.SharedKernel.Models.Reservation.ReservationDto]]] GetAll() on controller DineEasy.WebAPI.Controllers.ReservationsController (DineEasy.WebAPI).
2025-06-22 00:48:07.301 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:48:07.301 +02:00 [INF] Getting reservations for user: admin123123
2025-06-22 00:48:07.301 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 1
2025-06-22 00:48:07.301 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin123123
2025-06-22 00:48:07.302 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = admin@dineeasy.com
2025-06-22 00:48:07.302 +02:00 [INF] Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = Admin
2025-06-22 00:48:07.302 +02:00 [INF] Claim: exp = 1750632203
2025-06-22 00:48:07.302 +02:00 [INF] Claim: iss = DineEasy
2025-06-22 00:48:07.302 +02:00 [INF] Claim: aud = DineEasy-Users
2025-06-22 00:48:07.302 +02:00 [INF] User is Admin - returning all reservations
2025-06-22 00:48:07.302 +02:00 [INF] Retrieving all reservations
2025-06-22 00:48:07.303 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Id", "r"."CreatedAt", "r"."Duration", "r"."PartySize", "r"."ReservationDateTime", "r"."SpecialRequests", "r"."Status", "r"."TableId", "r"."UserId"
FROM "Reservations" AS "r"
2025-06-22 00:48:07.304 +02:00 [ERR] Error occurred while retrieving all reservations
System.NullReferenceException: Object reference not set to an instance of an object.
   at DineEasy.Application.Extensions.ReservationExtensions.ToDto(Reservation reservation) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 10
   at DineEasy.Application.Extensions.ReservationExtensions.<>c.<ToDtos>b__2_0(Reservation r) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at System.Linq.Enumerable.SelectListIterator`2.Fill(ReadOnlySpan`1 source, Span`1 destination, Func`2 func)
   at System.Linq.Enumerable.SelectListIterator`2.ToList()
   at DineEasy.Application.Extensions.ReservationExtensions.ToDtos(IEnumerable`1 reservations) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at DineEasy.Application.Services.ReservationService.GetAllAsync() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 165
2025-06-22 00:48:07.304 +02:00 [ERR] Error retrieving reservations
System.NullReferenceException: Object reference not set to an instance of an object.
   at DineEasy.Application.Extensions.ReservationExtensions.ToDto(Reservation reservation) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 10
   at DineEasy.Application.Extensions.ReservationExtensions.<>c.<ToDtos>b__2_0(Reservation r) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at System.Linq.Enumerable.SelectListIterator`2.Fill(ReadOnlySpan`1 source, Span`1 destination, Func`2 func)
   at System.Linq.Enumerable.SelectListIterator`2.ToList()
   at DineEasy.Application.Extensions.ReservationExtensions.ToDtos(IEnumerable`1 reservations) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at DineEasy.Application.Services.ReservationService.GetAllAsync() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 165
   at DineEasy.WebAPI.Controllers.ReservationsController.GetAll() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.WebAPI/Controllers/ReservationsController.cs:line 39
2025-06-22 00:48:07.305 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 3.1475ms.
2025-06-22 00:48:07.305 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-06-22 00:48:07.305 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI) in 3.8231ms
2025-06-22 00:48:07.305 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI)'
2025-06-22 00:48:07.305 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5049/api/reservations - 500 null text/plain; charset=utf-8 4.83ms
2025-06-22 00:48:07.642 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5049/api/reservations - null null
2025-06-22 00:48:07.643 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI)'
2025-06-22 00:48:07.643 +02:00 [INF] Route matched with {action = "GetAll", controller = "Reservations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[DineEasy.SharedKernel.Models.Reservation.ReservationDto]]] GetAll() on controller DineEasy.WebAPI.Controllers.ReservationsController (DineEasy.WebAPI).
2025-06-22 00:48:07.643 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:48:07.643 +02:00 [INF] Getting reservations for user: admin123123
2025-06-22 00:48:07.643 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 1
2025-06-22 00:48:07.643 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin123123
2025-06-22 00:48:07.643 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = admin@dineeasy.com
2025-06-22 00:48:07.643 +02:00 [INF] Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = Admin
2025-06-22 00:48:07.643 +02:00 [INF] Claim: exp = 1750632203
2025-06-22 00:48:07.643 +02:00 [INF] Claim: iss = DineEasy
2025-06-22 00:48:07.643 +02:00 [INF] Claim: aud = DineEasy-Users
2025-06-22 00:48:07.643 +02:00 [INF] User is Admin - returning all reservations
2025-06-22 00:48:07.643 +02:00 [INF] Retrieving all reservations
2025-06-22 00:48:07.643 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Id", "r"."CreatedAt", "r"."Duration", "r"."PartySize", "r"."ReservationDateTime", "r"."SpecialRequests", "r"."Status", "r"."TableId", "r"."UserId"
FROM "Reservations" AS "r"
2025-06-22 00:48:07.644 +02:00 [ERR] Error occurred while retrieving all reservations
System.NullReferenceException: Object reference not set to an instance of an object.
   at DineEasy.Application.Extensions.ReservationExtensions.ToDto(Reservation reservation) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 10
   at DineEasy.Application.Extensions.ReservationExtensions.<>c.<ToDtos>b__2_0(Reservation r) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at System.Linq.Enumerable.SelectListIterator`2.Fill(ReadOnlySpan`1 source, Span`1 destination, Func`2 func)
   at System.Linq.Enumerable.SelectListIterator`2.ToList()
   at DineEasy.Application.Extensions.ReservationExtensions.ToDtos(IEnumerable`1 reservations) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at DineEasy.Application.Services.ReservationService.GetAllAsync() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 165
2025-06-22 00:48:07.644 +02:00 [ERR] Error retrieving reservations
System.NullReferenceException: Object reference not set to an instance of an object.
   at DineEasy.Application.Extensions.ReservationExtensions.ToDto(Reservation reservation) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 10
   at DineEasy.Application.Extensions.ReservationExtensions.<>c.<ToDtos>b__2_0(Reservation r) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at System.Linq.Enumerable.SelectListIterator`2.Fill(ReadOnlySpan`1 source, Span`1 destination, Func`2 func)
   at System.Linq.Enumerable.SelectListIterator`2.ToList()
   at DineEasy.Application.Extensions.ReservationExtensions.ToDtos(IEnumerable`1 reservations) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at DineEasy.Application.Services.ReservationService.GetAllAsync() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 165
   at DineEasy.WebAPI.Controllers.ReservationsController.GetAll() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.WebAPI/Controllers/ReservationsController.cs:line 39
2025-06-22 00:48:07.645 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 1.5372ms.
2025-06-22 00:48:07.645 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-06-22 00:48:07.645 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI) in 1.8675ms
2025-06-22 00:48:07.645 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI)'
2025-06-22 00:48:07.645 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5049/api/reservations - 500 null text/plain; charset=utf-8 2.7364ms
2025-06-22 00:48:08.273 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5049/api/reservations - null null
2025-06-22 00:48:08.273 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI)'
2025-06-22 00:48:08.273 +02:00 [INF] Route matched with {action = "GetAll", controller = "Reservations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[DineEasy.SharedKernel.Models.Reservation.ReservationDto]]] GetAll() on controller DineEasy.WebAPI.Controllers.ReservationsController (DineEasy.WebAPI).
2025-06-22 00:48:08.274 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:48:08.274 +02:00 [INF] Getting reservations for user: admin123123
2025-06-22 00:48:08.274 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 1
2025-06-22 00:48:08.274 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin123123
2025-06-22 00:48:08.274 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = admin@dineeasy.com
2025-06-22 00:48:08.274 +02:00 [INF] Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = Admin
2025-06-22 00:48:08.274 +02:00 [INF] Claim: exp = 1750632203
2025-06-22 00:48:08.274 +02:00 [INF] Claim: iss = DineEasy
2025-06-22 00:48:08.274 +02:00 [INF] Claim: aud = DineEasy-Users
2025-06-22 00:48:08.274 +02:00 [INF] User is Admin - returning all reservations
2025-06-22 00:48:08.274 +02:00 [INF] Retrieving all reservations
2025-06-22 00:48:08.275 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Id", "r"."CreatedAt", "r"."Duration", "r"."PartySize", "r"."ReservationDateTime", "r"."SpecialRequests", "r"."Status", "r"."TableId", "r"."UserId"
FROM "Reservations" AS "r"
2025-06-22 00:48:08.276 +02:00 [ERR] Error occurred while retrieving all reservations
System.NullReferenceException: Object reference not set to an instance of an object.
   at DineEasy.Application.Extensions.ReservationExtensions.ToDto(Reservation reservation) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 10
   at DineEasy.Application.Extensions.ReservationExtensions.<>c.<ToDtos>b__2_0(Reservation r) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at System.Linq.Enumerable.SelectListIterator`2.Fill(ReadOnlySpan`1 source, Span`1 destination, Func`2 func)
   at System.Linq.Enumerable.SelectListIterator`2.ToList()
   at DineEasy.Application.Extensions.ReservationExtensions.ToDtos(IEnumerable`1 reservations) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at DineEasy.Application.Services.ReservationService.GetAllAsync() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 165
2025-06-22 00:48:08.276 +02:00 [ERR] Error retrieving reservations
System.NullReferenceException: Object reference not set to an instance of an object.
   at DineEasy.Application.Extensions.ReservationExtensions.ToDto(Reservation reservation) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 10
   at DineEasy.Application.Extensions.ReservationExtensions.<>c.<ToDtos>b__2_0(Reservation r) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at System.Linq.Enumerable.SelectListIterator`2.Fill(ReadOnlySpan`1 source, Span`1 destination, Func`2 func)
   at System.Linq.Enumerable.SelectListIterator`2.ToList()
   at DineEasy.Application.Extensions.ReservationExtensions.ToDtos(IEnumerable`1 reservations) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at DineEasy.Application.Services.ReservationService.GetAllAsync() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 165
   at DineEasy.WebAPI.Controllers.ReservationsController.GetAll() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.WebAPI/Controllers/ReservationsController.cs:line 39
2025-06-22 00:48:08.277 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 2.7724ms.
2025-06-22 00:48:08.277 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-06-22 00:48:08.277 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI) in 3.6057ms
2025-06-22 00:48:08.277 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI)'
2025-06-22 00:48:08.277 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5049/api/reservations - 500 null text/plain; charset=utf-8 4.4895ms
2025-06-22 00:48:08.534 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5049/api/reservations - null null
2025-06-22 00:48:08.534 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI)'
2025-06-22 00:48:08.534 +02:00 [INF] Route matched with {action = "GetAll", controller = "Reservations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[DineEasy.SharedKernel.Models.Reservation.ReservationDto]]] GetAll() on controller DineEasy.WebAPI.Controllers.ReservationsController (DineEasy.WebAPI).
2025-06-22 00:48:08.534 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:48:08.534 +02:00 [INF] Getting reservations for user: admin123123
2025-06-22 00:48:08.534 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 1
2025-06-22 00:48:08.534 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin123123
2025-06-22 00:48:08.534 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = admin@dineeasy.com
2025-06-22 00:48:08.534 +02:00 [INF] Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = Admin
2025-06-22 00:48:08.534 +02:00 [INF] Claim: exp = 1750632203
2025-06-22 00:48:08.534 +02:00 [INF] Claim: iss = DineEasy
2025-06-22 00:48:08.534 +02:00 [INF] Claim: aud = DineEasy-Users
2025-06-22 00:48:08.534 +02:00 [INF] User is Admin - returning all reservations
2025-06-22 00:48:08.534 +02:00 [INF] Retrieving all reservations
2025-06-22 00:48:08.535 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Id", "r"."CreatedAt", "r"."Duration", "r"."PartySize", "r"."ReservationDateTime", "r"."SpecialRequests", "r"."Status", "r"."TableId", "r"."UserId"
FROM "Reservations" AS "r"
2025-06-22 00:48:08.535 +02:00 [ERR] Error occurred while retrieving all reservations
System.NullReferenceException: Object reference not set to an instance of an object.
   at DineEasy.Application.Extensions.ReservationExtensions.ToDto(Reservation reservation) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 10
   at DineEasy.Application.Extensions.ReservationExtensions.<>c.<ToDtos>b__2_0(Reservation r) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at System.Linq.Enumerable.SelectListIterator`2.Fill(ReadOnlySpan`1 source, Span`1 destination, Func`2 func)
   at System.Linq.Enumerable.SelectListIterator`2.ToList()
   at DineEasy.Application.Extensions.ReservationExtensions.ToDtos(IEnumerable`1 reservations) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at DineEasy.Application.Services.ReservationService.GetAllAsync() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 165
2025-06-22 00:48:08.535 +02:00 [ERR] Error retrieving reservations
System.NullReferenceException: Object reference not set to an instance of an object.
   at DineEasy.Application.Extensions.ReservationExtensions.ToDto(Reservation reservation) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 10
   at DineEasy.Application.Extensions.ReservationExtensions.<>c.<ToDtos>b__2_0(Reservation r) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at System.Linq.Enumerable.SelectListIterator`2.Fill(ReadOnlySpan`1 source, Span`1 destination, Func`2 func)
   at System.Linq.Enumerable.SelectListIterator`2.ToList()
   at DineEasy.Application.Extensions.ReservationExtensions.ToDtos(IEnumerable`1 reservations) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at DineEasy.Application.Services.ReservationService.GetAllAsync() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 165
   at DineEasy.WebAPI.Controllers.ReservationsController.GetAll() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.WebAPI/Controllers/ReservationsController.cs:line 39
2025-06-22 00:48:08.536 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 1.2553ms.
2025-06-22 00:48:08.536 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-06-22 00:48:08.536 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI) in 1.5628ms
2025-06-22 00:48:08.536 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI)'
2025-06-22 00:48:08.536 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5049/api/reservations - 500 null text/plain; charset=utf-8 2.0725ms
2025-06-22 00:48:21.703 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5049/api/reservations - application/json; charset=utf-8 116
2025-06-22 00:48:21.703 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI)'
2025-06-22 00:48:21.711 +02:00 [INF] Route matched with {action = "Create", controller = "Reservations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[DineEasy.SharedKernel.Models.Reservation.ReservationDto]] Create(DineEasy.SharedKernel.Models.Reservation.CreateReservationDto) on controller DineEasy.WebAPI.Controllers.ReservationsController (DineEasy.WebAPI).
2025-06-22 00:48:21.749 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:48:21.750 +02:00 [INF] Creating new reservation for UserId: 1, TableId: 2
2025-06-22 00:48:21.751 +02:00 [INF] Creating new reservation - UserId: 1, TableId: 2, DateTime: "2025-06-23T16:00:00.0000000", Duration: 2, PartySize: 1
2025-06-22 00:48:21.834 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."Email", "u"."PasswordHash", "u"."Role", "u"."Username", "u0"."Id", "u0"."CreatedAt", "u0"."DateOfBirth", "u0"."FirstName", "u0"."LastName", "u0"."PhoneNumber", "u0"."UserId"
FROM "Users" AS "u"
LEFT JOIN "UserProfiles" AS "u0" ON "u"."Id" = "u0"."UserId"
WHERE "u"."Id" = @__id_0
LIMIT 1
2025-06-22 00:48:21.864 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='2'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Capacity", "t"."IsActive", "t"."TableNumber"
FROM "Tables" AS "t"
WHERE "t"."Id" = @__p_0
LIMIT 1
2025-06-22 00:48:21.872 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__dayOfWeek_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."DayOfWeek", "t"."EndTime", "t"."StartTime"
FROM "TimeSlots" AS "t"
WHERE "t"."DayOfWeek" = @__dayOfWeek_0
LIMIT 1
2025-06-22 00:48:21.902 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__tabelId_0='2', @__dateTime_1='2025-06-23T16:00:00.0000000' (DbType = DateTime), @__newReservationEnd_2='2025-06-23T18:00:00.0000000' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Reservations" AS "r"
    WHERE "r"."TableId" = @__tabelId_0 AND "r"."Status" NOT IN ('Cancelled', 'Completed') AND @__dateTime_1 < rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', "r"."ReservationDateTime", CAST(CAST("r"."Duration" AS REAL) AS TEXT) || ' hours'), '0'), '.') AND @__newReservationEnd_2 > "r"."ReservationDateTime")
2025-06-22 00:48:21.903 +02:00 [WRN] Reservation creation failed - Table 2 has overlapping reservation for "2025-06-23T16:00:00.0000000" duration 2h
2025-06-22 00:48:21.903 +02:00 [ERR] Unexpected error creating reservation for UserId: 1
DineEasy.Application.Exceptions.UnavailableTableException: Table is not available for the requested time slot!
   at DineEasy.Application.Services.ReservationService.CreateAsync(CreateReservationDto dto) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 96
   at DineEasy.WebAPI.Controllers.ReservationsController.Create(CreateReservationDto dto) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.WebAPI/Controllers/ReservationsController.cs:line 132
2025-06-22 00:48:21.904 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 154.528ms.
2025-06-22 00:48:21.904 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-06-22 00:48:21.904 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI) in 192.9825ms
2025-06-22 00:48:21.904 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI)'
2025-06-22 00:48:21.904 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5049/api/reservations - 500 null text/plain; charset=utf-8 201.4439ms
2025-06-22 00:48:55.290 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5049/api/reservations - application/json; charset=utf-8 116
2025-06-22 00:48:55.291 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI)'
2025-06-22 00:48:55.291 +02:00 [INF] Route matched with {action = "Create", controller = "Reservations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[DineEasy.SharedKernel.Models.Reservation.ReservationDto]] Create(DineEasy.SharedKernel.Models.Reservation.CreateReservationDto) on controller DineEasy.WebAPI.Controllers.ReservationsController (DineEasy.WebAPI).
2025-06-22 00:48:55.294 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:48:55.294 +02:00 [INF] Creating new reservation for UserId: 1, TableId: 2
2025-06-22 00:48:55.294 +02:00 [INF] Creating new reservation - UserId: 1, TableId: 2, DateTime: "2025-06-23T18:00:00.0000000", Duration: 1, PartySize: 1
2025-06-22 00:48:55.303 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."Email", "u"."PasswordHash", "u"."Role", "u"."Username", "u0"."Id", "u0"."CreatedAt", "u0"."DateOfBirth", "u0"."FirstName", "u0"."LastName", "u0"."PhoneNumber", "u0"."UserId"
FROM "Users" AS "u"
LEFT JOIN "UserProfiles" AS "u0" ON "u"."Id" = "u0"."UserId"
WHERE "u"."Id" = @__id_0
LIMIT 1
2025-06-22 00:48:55.309 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='2'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Capacity", "t"."IsActive", "t"."TableNumber"
FROM "Tables" AS "t"
WHERE "t"."Id" = @__p_0
LIMIT 1
2025-06-22 00:48:55.311 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__dayOfWeek_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."DayOfWeek", "t"."EndTime", "t"."StartTime"
FROM "TimeSlots" AS "t"
WHERE "t"."DayOfWeek" = @__dayOfWeek_0
LIMIT 1
2025-06-22 00:48:55.313 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__tabelId_0='2', @__dateTime_1='2025-06-23T18:00:00.0000000' (DbType = DateTime), @__newReservationEnd_2='2025-06-23T19:00:00.0000000' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Reservations" AS "r"
    WHERE "r"."TableId" = @__tabelId_0 AND "r"."Status" NOT IN ('Cancelled', 'Completed') AND @__dateTime_1 < rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', "r"."ReservationDateTime", CAST(CAST("r"."Duration" AS REAL) AS TEXT) || ' hours'), '0'), '.') AND @__newReservationEnd_2 > "r"."ReservationDateTime")
2025-06-22 00:48:55.313 +02:00 [WRN] Reservation creation failed - Table 2 has overlapping reservation for "2025-06-23T18:00:00.0000000" duration 1h
2025-06-22 00:48:55.313 +02:00 [ERR] Unexpected error creating reservation for UserId: 1
DineEasy.Application.Exceptions.UnavailableTableException: Table is not available for the requested time slot!
   at DineEasy.Application.Services.ReservationService.CreateAsync(CreateReservationDto dto) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 96
   at DineEasy.WebAPI.Controllers.ReservationsController.Create(CreateReservationDto dto) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.WebAPI/Controllers/ReservationsController.cs:line 132
2025-06-22 00:48:55.314 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 19.7899ms.
2025-06-22 00:48:55.314 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-06-22 00:48:55.314 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI) in 22.5981ms
2025-06-22 00:48:55.314 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI)'
2025-06-22 00:48:55.314 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5049/api/reservations - 500 null text/plain; charset=utf-8 24.1912ms
2025-06-22 00:49:02.742 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5049/api/reservations - application/json; charset=utf-8 116
2025-06-22 00:49:02.743 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI)'
2025-06-22 00:49:02.743 +02:00 [INF] Route matched with {action = "Create", controller = "Reservations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[DineEasy.SharedKernel.Models.Reservation.ReservationDto]] Create(DineEasy.SharedKernel.Models.Reservation.CreateReservationDto) on controller DineEasy.WebAPI.Controllers.ReservationsController (DineEasy.WebAPI).
2025-06-22 00:49:02.744 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:49:02.745 +02:00 [INF] Creating new reservation for UserId: 1, TableId: 1
2025-06-22 00:49:02.745 +02:00 [INF] Creating new reservation - UserId: 1, TableId: 1, DateTime: "2025-06-23T18:00:00.0000000", Duration: 1, PartySize: 1
2025-06-22 00:49:02.749 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."Email", "u"."PasswordHash", "u"."Role", "u"."Username", "u0"."Id", "u0"."CreatedAt", "u0"."DateOfBirth", "u0"."FirstName", "u0"."LastName", "u0"."PhoneNumber", "u0"."UserId"
FROM "Users" AS "u"
LEFT JOIN "UserProfiles" AS "u0" ON "u"."Id" = "u0"."UserId"
WHERE "u"."Id" = @__id_0
LIMIT 1
2025-06-22 00:49:02.752 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."Capacity", "t"."IsActive", "t"."TableNumber"
FROM "Tables" AS "t"
WHERE "t"."Id" = @__p_0
LIMIT 1
2025-06-22 00:49:02.755 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dayOfWeek_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "t"."Id", "t"."DayOfWeek", "t"."EndTime", "t"."StartTime"
FROM "TimeSlots" AS "t"
WHERE "t"."DayOfWeek" = @__dayOfWeek_0
LIMIT 1
2025-06-22 00:49:02.757 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__tabelId_0='1', @__dateTime_1='2025-06-23T18:00:00.0000000' (DbType = DateTime), @__newReservationEnd_2='2025-06-23T19:00:00.0000000' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Reservations" AS "r"
    WHERE "r"."TableId" = @__tabelId_0 AND "r"."Status" NOT IN ('Cancelled', 'Completed') AND @__dateTime_1 < rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', "r"."ReservationDateTime", CAST(CAST("r"."Duration" AS REAL) AS TEXT) || ' hours'), '0'), '.') AND @__newReservationEnd_2 > "r"."ReservationDateTime")
2025-06-22 00:49:02.886 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='2025-06-21T22:49:02.7596360Z' (DbType = DateTime), @p1='1', @p2='1', @p3='2025-06-23T18:00:00.0000000' (DbType = DateTime), @p4='', @p5='Pending' (Nullable = false) (Size = 7), @p6='1', @p7='1'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Reservations" ("CreatedAt", "Duration", "PartySize", "ReservationDateTime", "SpecialRequests", "Status", "TableId", "UserId")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7)
RETURNING "Id";
2025-06-22 00:49:02.900 +02:00 [INF] Reservation created successfully - ID: 3, User: 1, Table: 1, DateTime: "2025-06-23T18:00:00.0000000"
2025-06-22 00:49:02.900 +02:00 [INF] Successfully created reservation with ID: 3
2025-06-22 00:49:02.901 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.CreatedAtActionResult in 156.0066ms.
2025-06-22 00:49:02.901 +02:00 [INF] Executing CreatedAtActionResult, writing value of type 'DineEasy.SharedKernel.Models.Reservation.ReservationDto'.
2025-06-22 00:49:02.916 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI) in 173.1973ms
2025-06-22 00:49:02.916 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.Create (DineEasy.WebAPI)'
2025-06-22 00:49:02.916 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5049/api/reservations - 201 null application/json; charset=utf-8 174.8161ms
2025-06-22 00:49:02.922 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5049/api/reservations - null null
2025-06-22 00:49:02.923 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI)'
2025-06-22 00:49:02.923 +02:00 [INF] Route matched with {action = "GetAll", controller = "Reservations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[DineEasy.SharedKernel.Models.Reservation.ReservationDto]]] GetAll() on controller DineEasy.WebAPI.Controllers.ReservationsController (DineEasy.WebAPI).
2025-06-22 00:49:02.923 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:49:02.923 +02:00 [INF] Getting reservations for user: admin123123
2025-06-22 00:49:02.923 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 1
2025-06-22 00:49:02.923 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin123123
2025-06-22 00:49:02.923 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = admin@dineeasy.com
2025-06-22 00:49:02.923 +02:00 [INF] Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = Admin
2025-06-22 00:49:02.923 +02:00 [INF] Claim: exp = 1750632203
2025-06-22 00:49:02.923 +02:00 [INF] Claim: iss = DineEasy
2025-06-22 00:49:02.923 +02:00 [INF] Claim: aud = DineEasy-Users
2025-06-22 00:49:02.923 +02:00 [INF] User is Admin - returning all reservations
2025-06-22 00:49:02.923 +02:00 [INF] Retrieving all reservations
2025-06-22 00:49:02.923 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Id", "r"."CreatedAt", "r"."Duration", "r"."PartySize", "r"."ReservationDateTime", "r"."SpecialRequests", "r"."Status", "r"."TableId", "r"."UserId"
FROM "Reservations" AS "r"
2025-06-22 00:49:02.924 +02:00 [ERR] Error occurred while retrieving all reservations
System.NullReferenceException: Object reference not set to an instance of an object.
   at DineEasy.Application.Extensions.ReservationExtensions.ToDto(Reservation reservation) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 10
   at DineEasy.Application.Extensions.ReservationExtensions.<>c.<ToDtos>b__2_0(Reservation r) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at System.Linq.Enumerable.SelectListIterator`2.Fill(ReadOnlySpan`1 source, Span`1 destination, Func`2 func)
   at System.Linq.Enumerable.SelectListIterator`2.ToList()
   at DineEasy.Application.Extensions.ReservationExtensions.ToDtos(IEnumerable`1 reservations) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at DineEasy.Application.Services.ReservationService.GetAllAsync() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 165
2025-06-22 00:49:02.924 +02:00 [ERR] Error retrieving reservations
System.NullReferenceException: Object reference not set to an instance of an object.
   at DineEasy.Application.Extensions.ReservationExtensions.ToDto(Reservation reservation) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 10
   at DineEasy.Application.Extensions.ReservationExtensions.<>c.<ToDtos>b__2_0(Reservation r) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at System.Linq.Enumerable.SelectListIterator`2.Fill(ReadOnlySpan`1 source, Span`1 destination, Func`2 func)
   at System.Linq.Enumerable.SelectListIterator`2.ToList()
   at DineEasy.Application.Extensions.ReservationExtensions.ToDtos(IEnumerable`1 reservations) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at DineEasy.Application.Services.ReservationService.GetAllAsync() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 165
   at DineEasy.WebAPI.Controllers.ReservationsController.GetAll() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.WebAPI/Controllers/ReservationsController.cs:line 39
2025-06-22 00:49:02.924 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 1.1166ms.
2025-06-22 00:49:02.924 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-06-22 00:49:02.924 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI) in 1.3887ms
2025-06-22 00:49:02.924 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI)'
2025-06-22 00:49:02.924 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5049/api/reservations - 500 null text/plain; charset=utf-8 1.8245ms
2025-06-22 00:49:05.910 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5049/api/reservations - null null
2025-06-22 00:49:05.910 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI)'
2025-06-22 00:49:05.911 +02:00 [INF] Route matched with {action = "GetAll", controller = "Reservations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[DineEasy.SharedKernel.Models.Reservation.ReservationDto]]] GetAll() on controller DineEasy.WebAPI.Controllers.ReservationsController (DineEasy.WebAPI).
2025-06-22 00:49:05.911 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:49:05.911 +02:00 [INF] Getting reservations for user: admin123123
2025-06-22 00:49:05.911 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 1
2025-06-22 00:49:05.911 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin123123
2025-06-22 00:49:05.911 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = admin@dineeasy.com
2025-06-22 00:49:05.911 +02:00 [INF] Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = Admin
2025-06-22 00:49:05.911 +02:00 [INF] Claim: exp = 1750632203
2025-06-22 00:49:05.911 +02:00 [INF] Claim: iss = DineEasy
2025-06-22 00:49:05.911 +02:00 [INF] Claim: aud = DineEasy-Users
2025-06-22 00:49:05.911 +02:00 [INF] User is Admin - returning all reservations
2025-06-22 00:49:05.911 +02:00 [INF] Retrieving all reservations
2025-06-22 00:49:05.912 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Id", "r"."CreatedAt", "r"."Duration", "r"."PartySize", "r"."ReservationDateTime", "r"."SpecialRequests", "r"."Status", "r"."TableId", "r"."UserId"
FROM "Reservations" AS "r"
2025-06-22 00:49:05.914 +02:00 [ERR] Error occurred while retrieving all reservations
System.NullReferenceException: Object reference not set to an instance of an object.
   at DineEasy.Application.Extensions.ReservationExtensions.ToDto(Reservation reservation) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 10
   at DineEasy.Application.Extensions.ReservationExtensions.<>c.<ToDtos>b__2_0(Reservation r) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at System.Linq.Enumerable.SelectListIterator`2.Fill(ReadOnlySpan`1 source, Span`1 destination, Func`2 func)
   at System.Linq.Enumerable.SelectListIterator`2.ToList()
   at DineEasy.Application.Extensions.ReservationExtensions.ToDtos(IEnumerable`1 reservations) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at DineEasy.Application.Services.ReservationService.GetAllAsync() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 165
2025-06-22 00:49:05.915 +02:00 [ERR] Error retrieving reservations
System.NullReferenceException: Object reference not set to an instance of an object.
   at DineEasy.Application.Extensions.ReservationExtensions.ToDto(Reservation reservation) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 10
   at DineEasy.Application.Extensions.ReservationExtensions.<>c.<ToDtos>b__2_0(Reservation r) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at System.Linq.Enumerable.SelectListIterator`2.Fill(ReadOnlySpan`1 source, Span`1 destination, Func`2 func)
   at System.Linq.Enumerable.SelectListIterator`2.ToList()
   at DineEasy.Application.Extensions.ReservationExtensions.ToDtos(IEnumerable`1 reservations) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at DineEasy.Application.Services.ReservationService.GetAllAsync() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 165
   at DineEasy.WebAPI.Controllers.ReservationsController.GetAll() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.WebAPI/Controllers/ReservationsController.cs:line 39
2025-06-22 00:49:05.915 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 4.195ms.
2025-06-22 00:49:05.915 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-06-22 00:49:05.915 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI) in 4.8496ms
2025-06-22 00:49:05.915 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI)'
2025-06-22 00:49:05.916 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5049/api/reservations - 500 null text/plain; charset=utf-8 5.7103ms
2025-06-22 00:49:06.273 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5049/api/reservations - null null
2025-06-22 00:49:06.274 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI)'
2025-06-22 00:49:06.274 +02:00 [INF] Route matched with {action = "GetAll", controller = "Reservations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[DineEasy.SharedKernel.Models.Reservation.ReservationDto]]] GetAll() on controller DineEasy.WebAPI.Controllers.ReservationsController (DineEasy.WebAPI).
2025-06-22 00:49:06.274 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:49:06.274 +02:00 [INF] Getting reservations for user: admin123123
2025-06-22 00:49:06.274 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 1
2025-06-22 00:49:06.274 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin123123
2025-06-22 00:49:06.274 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = admin@dineeasy.com
2025-06-22 00:49:06.274 +02:00 [INF] Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = Admin
2025-06-22 00:49:06.274 +02:00 [INF] Claim: exp = 1750632203
2025-06-22 00:49:06.274 +02:00 [INF] Claim: iss = DineEasy
2025-06-22 00:49:06.274 +02:00 [INF] Claim: aud = DineEasy-Users
2025-06-22 00:49:06.274 +02:00 [INF] User is Admin - returning all reservations
2025-06-22 00:49:06.274 +02:00 [INF] Retrieving all reservations
2025-06-22 00:49:06.275 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Id", "r"."CreatedAt", "r"."Duration", "r"."PartySize", "r"."ReservationDateTime", "r"."SpecialRequests", "r"."Status", "r"."TableId", "r"."UserId"
FROM "Reservations" AS "r"
2025-06-22 00:49:06.275 +02:00 [ERR] Error occurred while retrieving all reservations
System.NullReferenceException: Object reference not set to an instance of an object.
   at DineEasy.Application.Extensions.ReservationExtensions.ToDto(Reservation reservation) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 10
   at DineEasy.Application.Extensions.ReservationExtensions.<>c.<ToDtos>b__2_0(Reservation r) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at System.Linq.Enumerable.SelectListIterator`2.Fill(ReadOnlySpan`1 source, Span`1 destination, Func`2 func)
   at System.Linq.Enumerable.SelectListIterator`2.ToList()
   at DineEasy.Application.Extensions.ReservationExtensions.ToDtos(IEnumerable`1 reservations) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at DineEasy.Application.Services.ReservationService.GetAllAsync() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 165
2025-06-22 00:49:06.276 +02:00 [ERR] Error retrieving reservations
System.NullReferenceException: Object reference not set to an instance of an object.
   at DineEasy.Application.Extensions.ReservationExtensions.ToDto(Reservation reservation) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 10
   at DineEasy.Application.Extensions.ReservationExtensions.<>c.<ToDtos>b__2_0(Reservation r) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at System.Linq.Enumerable.SelectListIterator`2.Fill(ReadOnlySpan`1 source, Span`1 destination, Func`2 func)
   at System.Linq.Enumerable.SelectListIterator`2.ToList()
   at DineEasy.Application.Extensions.ReservationExtensions.ToDtos(IEnumerable`1 reservations) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at DineEasy.Application.Services.ReservationService.GetAllAsync() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 165
   at DineEasy.WebAPI.Controllers.ReservationsController.GetAll() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.WebAPI/Controllers/ReservationsController.cs:line 39
2025-06-22 00:49:06.276 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 1.8615ms.
2025-06-22 00:49:06.276 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-06-22 00:49:06.276 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI) in 2.3598ms
2025-06-22 00:49:06.276 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI)'
2025-06-22 00:49:06.276 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5049/api/reservations - 500 null text/plain; charset=utf-8 3.2087ms
2025-06-22 00:49:06.463 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5049/api/reservations - null null
2025-06-22 00:49:06.464 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI)'
2025-06-22 00:49:06.464 +02:00 [INF] Route matched with {action = "GetAll", controller = "Reservations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[DineEasy.SharedKernel.Models.Reservation.ReservationDto]]] GetAll() on controller DineEasy.WebAPI.Controllers.ReservationsController (DineEasy.WebAPI).
2025-06-22 00:49:06.464 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:49:06.464 +02:00 [INF] Getting reservations for user: admin123123
2025-06-22 00:49:06.464 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 1
2025-06-22 00:49:06.464 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin123123
2025-06-22 00:49:06.464 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = admin@dineeasy.com
2025-06-22 00:49:06.464 +02:00 [INF] Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = Admin
2025-06-22 00:49:06.464 +02:00 [INF] Claim: exp = 1750632203
2025-06-22 00:49:06.464 +02:00 [INF] Claim: iss = DineEasy
2025-06-22 00:49:06.464 +02:00 [INF] Claim: aud = DineEasy-Users
2025-06-22 00:49:06.464 +02:00 [INF] User is Admin - returning all reservations
2025-06-22 00:49:06.464 +02:00 [INF] Retrieving all reservations
2025-06-22 00:49:06.465 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Id", "r"."CreatedAt", "r"."Duration", "r"."PartySize", "r"."ReservationDateTime", "r"."SpecialRequests", "r"."Status", "r"."TableId", "r"."UserId"
FROM "Reservations" AS "r"
2025-06-22 00:49:06.465 +02:00 [ERR] Error occurred while retrieving all reservations
System.NullReferenceException: Object reference not set to an instance of an object.
   at DineEasy.Application.Extensions.ReservationExtensions.ToDto(Reservation reservation) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 10
   at DineEasy.Application.Extensions.ReservationExtensions.<>c.<ToDtos>b__2_0(Reservation r) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at System.Linq.Enumerable.SelectListIterator`2.Fill(ReadOnlySpan`1 source, Span`1 destination, Func`2 func)
   at System.Linq.Enumerable.SelectListIterator`2.ToList()
   at DineEasy.Application.Extensions.ReservationExtensions.ToDtos(IEnumerable`1 reservations) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at DineEasy.Application.Services.ReservationService.GetAllAsync() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 165
2025-06-22 00:49:06.466 +02:00 [ERR] Error retrieving reservations
System.NullReferenceException: Object reference not set to an instance of an object.
   at DineEasy.Application.Extensions.ReservationExtensions.ToDto(Reservation reservation) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 10
   at DineEasy.Application.Extensions.ReservationExtensions.<>c.<ToDtos>b__2_0(Reservation r) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at System.Linq.Enumerable.SelectListIterator`2.Fill(ReadOnlySpan`1 source, Span`1 destination, Func`2 func)
   at System.Linq.Enumerable.SelectListIterator`2.ToList()
   at DineEasy.Application.Extensions.ReservationExtensions.ToDtos(IEnumerable`1 reservations) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at DineEasy.Application.Services.ReservationService.GetAllAsync() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 165
   at DineEasy.WebAPI.Controllers.ReservationsController.GetAll() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.WebAPI/Controllers/ReservationsController.cs:line 39
2025-06-22 00:49:06.466 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 1.7549ms.
2025-06-22 00:49:06.466 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-06-22 00:49:06.466 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI) in 2.1812ms
2025-06-22 00:49:06.466 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI)'
2025-06-22 00:49:06.466 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5049/api/reservations - 500 null text/plain; charset=utf-8 3.0401ms
2025-06-22 00:49:06.623 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5049/api/reservations - null null
2025-06-22 00:49:06.624 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI)'
2025-06-22 00:49:06.624 +02:00 [INF] Route matched with {action = "GetAll", controller = "Reservations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[DineEasy.SharedKernel.Models.Reservation.ReservationDto]]] GetAll() on controller DineEasy.WebAPI.Controllers.ReservationsController (DineEasy.WebAPI).
2025-06-22 00:49:06.625 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:49:06.625 +02:00 [INF] Getting reservations for user: admin123123
2025-06-22 00:49:06.625 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 1
2025-06-22 00:49:06.625 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin123123
2025-06-22 00:49:06.625 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = admin@dineeasy.com
2025-06-22 00:49:06.625 +02:00 [INF] Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = Admin
2025-06-22 00:49:06.625 +02:00 [INF] Claim: exp = 1750632203
2025-06-22 00:49:06.625 +02:00 [INF] Claim: iss = DineEasy
2025-06-22 00:49:06.625 +02:00 [INF] Claim: aud = DineEasy-Users
2025-06-22 00:49:06.625 +02:00 [INF] User is Admin - returning all reservations
2025-06-22 00:49:06.625 +02:00 [INF] Retrieving all reservations
2025-06-22 00:49:06.625 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Id", "r"."CreatedAt", "r"."Duration", "r"."PartySize", "r"."ReservationDateTime", "r"."SpecialRequests", "r"."Status", "r"."TableId", "r"."UserId"
FROM "Reservations" AS "r"
2025-06-22 00:49:06.626 +02:00 [ERR] Error occurred while retrieving all reservations
System.NullReferenceException: Object reference not set to an instance of an object.
   at DineEasy.Application.Extensions.ReservationExtensions.ToDto(Reservation reservation) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 10
   at DineEasy.Application.Extensions.ReservationExtensions.<>c.<ToDtos>b__2_0(Reservation r) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at System.Linq.Enumerable.SelectListIterator`2.Fill(ReadOnlySpan`1 source, Span`1 destination, Func`2 func)
   at System.Linq.Enumerable.SelectListIterator`2.ToList()
   at DineEasy.Application.Extensions.ReservationExtensions.ToDtos(IEnumerable`1 reservations) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at DineEasy.Application.Services.ReservationService.GetAllAsync() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 165
2025-06-22 00:49:06.626 +02:00 [ERR] Error retrieving reservations
System.NullReferenceException: Object reference not set to an instance of an object.
   at DineEasy.Application.Extensions.ReservationExtensions.ToDto(Reservation reservation) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 10
   at DineEasy.Application.Extensions.ReservationExtensions.<>c.<ToDtos>b__2_0(Reservation r) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at System.Linq.Enumerable.SelectListIterator`2.Fill(ReadOnlySpan`1 source, Span`1 destination, Func`2 func)
   at System.Linq.Enumerable.SelectListIterator`2.ToList()
   at DineEasy.Application.Extensions.ReservationExtensions.ToDtos(IEnumerable`1 reservations) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at DineEasy.Application.Services.ReservationService.GetAllAsync() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 165
   at DineEasy.WebAPI.Controllers.ReservationsController.GetAll() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.WebAPI/Controllers/ReservationsController.cs:line 39
2025-06-22 00:49:06.626 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 1.2501ms.
2025-06-22 00:49:06.626 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-06-22 00:49:06.626 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI) in 1.8414ms
2025-06-22 00:49:06.626 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI)'
2025-06-22 00:49:06.626 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5049/api/reservations - 500 null text/plain; charset=utf-8 2.9114ms
2025-06-22 00:49:06.759 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5049/api/reservations - null null
2025-06-22 00:49:06.760 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI)'
2025-06-22 00:49:06.760 +02:00 [INF] Route matched with {action = "GetAll", controller = "Reservations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[DineEasy.SharedKernel.Models.Reservation.ReservationDto]]] GetAll() on controller DineEasy.WebAPI.Controllers.ReservationsController (DineEasy.WebAPI).
2025-06-22 00:49:06.760 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:49:06.760 +02:00 [INF] Getting reservations for user: admin123123
2025-06-22 00:49:06.760 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 1
2025-06-22 00:49:06.760 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin123123
2025-06-22 00:49:06.760 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = admin@dineeasy.com
2025-06-22 00:49:06.760 +02:00 [INF] Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = Admin
2025-06-22 00:49:06.760 +02:00 [INF] Claim: exp = 1750632203
2025-06-22 00:49:06.760 +02:00 [INF] Claim: iss = DineEasy
2025-06-22 00:49:06.760 +02:00 [INF] Claim: aud = DineEasy-Users
2025-06-22 00:49:06.760 +02:00 [INF] User is Admin - returning all reservations
2025-06-22 00:49:06.761 +02:00 [INF] Retrieving all reservations
2025-06-22 00:49:06.761 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Id", "r"."CreatedAt", "r"."Duration", "r"."PartySize", "r"."ReservationDateTime", "r"."SpecialRequests", "r"."Status", "r"."TableId", "r"."UserId"
FROM "Reservations" AS "r"
2025-06-22 00:49:06.761 +02:00 [ERR] Error occurred while retrieving all reservations
System.NullReferenceException: Object reference not set to an instance of an object.
   at DineEasy.Application.Extensions.ReservationExtensions.ToDto(Reservation reservation) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 10
   at DineEasy.Application.Extensions.ReservationExtensions.<>c.<ToDtos>b__2_0(Reservation r) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at System.Linq.Enumerable.SelectListIterator`2.Fill(ReadOnlySpan`1 source, Span`1 destination, Func`2 func)
   at System.Linq.Enumerable.SelectListIterator`2.ToList()
   at DineEasy.Application.Extensions.ReservationExtensions.ToDtos(IEnumerable`1 reservations) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at DineEasy.Application.Services.ReservationService.GetAllAsync() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 165
2025-06-22 00:49:06.761 +02:00 [ERR] Error retrieving reservations
System.NullReferenceException: Object reference not set to an instance of an object.
   at DineEasy.Application.Extensions.ReservationExtensions.ToDto(Reservation reservation) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 10
   at DineEasy.Application.Extensions.ReservationExtensions.<>c.<ToDtos>b__2_0(Reservation r) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at System.Linq.Enumerable.SelectListIterator`2.Fill(ReadOnlySpan`1 source, Span`1 destination, Func`2 func)
   at System.Linq.Enumerable.SelectListIterator`2.ToList()
   at DineEasy.Application.Extensions.ReservationExtensions.ToDtos(IEnumerable`1 reservations) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at DineEasy.Application.Services.ReservationService.GetAllAsync() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 165
   at DineEasy.WebAPI.Controllers.ReservationsController.GetAll() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.WebAPI/Controllers/ReservationsController.cs:line 39
2025-06-22 00:49:06.762 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 1.1339ms.
2025-06-22 00:49:06.762 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-06-22 00:49:06.762 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI) in 1.4582ms
2025-06-22 00:49:06.762 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI)'
2025-06-22 00:49:06.762 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5049/api/reservations - 500 null text/plain; charset=utf-8 2.2952ms
2025-06-22 00:49:06.903 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5049/api/reservations - null null
2025-06-22 00:49:06.904 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI)'
2025-06-22 00:49:06.904 +02:00 [INF] Route matched with {action = "GetAll", controller = "Reservations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[DineEasy.SharedKernel.Models.Reservation.ReservationDto]]] GetAll() on controller DineEasy.WebAPI.Controllers.ReservationsController (DineEasy.WebAPI).
2025-06-22 00:49:06.904 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:49:06.904 +02:00 [INF] Getting reservations for user: admin123123
2025-06-22 00:49:06.904 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 1
2025-06-22 00:49:06.904 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin123123
2025-06-22 00:49:06.905 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = admin@dineeasy.com
2025-06-22 00:49:06.905 +02:00 [INF] Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = Admin
2025-06-22 00:49:06.905 +02:00 [INF] Claim: exp = 1750632203
2025-06-22 00:49:06.905 +02:00 [INF] Claim: iss = DineEasy
2025-06-22 00:49:06.905 +02:00 [INF] Claim: aud = DineEasy-Users
2025-06-22 00:49:06.905 +02:00 [INF] User is Admin - returning all reservations
2025-06-22 00:49:06.905 +02:00 [INF] Retrieving all reservations
2025-06-22 00:49:06.906 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Id", "r"."CreatedAt", "r"."Duration", "r"."PartySize", "r"."ReservationDateTime", "r"."SpecialRequests", "r"."Status", "r"."TableId", "r"."UserId"
FROM "Reservations" AS "r"
2025-06-22 00:49:06.907 +02:00 [ERR] Error occurred while retrieving all reservations
System.NullReferenceException: Object reference not set to an instance of an object.
   at DineEasy.Application.Extensions.ReservationExtensions.ToDto(Reservation reservation) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 10
   at DineEasy.Application.Extensions.ReservationExtensions.<>c.<ToDtos>b__2_0(Reservation r) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at System.Linq.Enumerable.SelectListIterator`2.Fill(ReadOnlySpan`1 source, Span`1 destination, Func`2 func)
   at System.Linq.Enumerable.SelectListIterator`2.ToList()
   at DineEasy.Application.Extensions.ReservationExtensions.ToDtos(IEnumerable`1 reservations) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at DineEasy.Application.Services.ReservationService.GetAllAsync() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 165
2025-06-22 00:49:06.907 +02:00 [ERR] Error retrieving reservations
System.NullReferenceException: Object reference not set to an instance of an object.
   at DineEasy.Application.Extensions.ReservationExtensions.ToDto(Reservation reservation) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 10
   at DineEasy.Application.Extensions.ReservationExtensions.<>c.<ToDtos>b__2_0(Reservation r) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at System.Linq.Enumerable.SelectListIterator`2.Fill(ReadOnlySpan`1 source, Span`1 destination, Func`2 func)
   at System.Linq.Enumerable.SelectListIterator`2.ToList()
   at DineEasy.Application.Extensions.ReservationExtensions.ToDtos(IEnumerable`1 reservations) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at DineEasy.Application.Services.ReservationService.GetAllAsync() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 165
   at DineEasy.WebAPI.Controllers.ReservationsController.GetAll() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.WebAPI/Controllers/ReservationsController.cs:line 39
2025-06-22 00:49:06.907 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 2.6696ms.
2025-06-22 00:49:06.907 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-06-22 00:49:06.907 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI) in 3.1282ms
2025-06-22 00:49:06.907 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI)'
2025-06-22 00:49:06.907 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5049/api/reservations - 500 null text/plain; charset=utf-8 3.8649ms
2025-06-22 00:49:07.066 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5049/api/reservations - null null
2025-06-22 00:49:07.066 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI)'
2025-06-22 00:49:07.066 +02:00 [INF] Route matched with {action = "GetAll", controller = "Reservations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[DineEasy.SharedKernel.Models.Reservation.ReservationDto]]] GetAll() on controller DineEasy.WebAPI.Controllers.ReservationsController (DineEasy.WebAPI).
2025-06-22 00:49:07.066 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:49:07.066 +02:00 [INF] Getting reservations for user: admin123123
2025-06-22 00:49:07.066 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 1
2025-06-22 00:49:07.066 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin123123
2025-06-22 00:49:07.066 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = admin@dineeasy.com
2025-06-22 00:49:07.066 +02:00 [INF] Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = Admin
2025-06-22 00:49:07.066 +02:00 [INF] Claim: exp = 1750632203
2025-06-22 00:49:07.066 +02:00 [INF] Claim: iss = DineEasy
2025-06-22 00:49:07.066 +02:00 [INF] Claim: aud = DineEasy-Users
2025-06-22 00:49:07.066 +02:00 [INF] User is Admin - returning all reservations
2025-06-22 00:49:07.066 +02:00 [INF] Retrieving all reservations
2025-06-22 00:49:07.067 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Id", "r"."CreatedAt", "r"."Duration", "r"."PartySize", "r"."ReservationDateTime", "r"."SpecialRequests", "r"."Status", "r"."TableId", "r"."UserId"
FROM "Reservations" AS "r"
2025-06-22 00:49:07.067 +02:00 [ERR] Error occurred while retrieving all reservations
System.NullReferenceException: Object reference not set to an instance of an object.
   at DineEasy.Application.Extensions.ReservationExtensions.ToDto(Reservation reservation) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 10
   at DineEasy.Application.Extensions.ReservationExtensions.<>c.<ToDtos>b__2_0(Reservation r) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at System.Linq.Enumerable.SelectListIterator`2.Fill(ReadOnlySpan`1 source, Span`1 destination, Func`2 func)
   at System.Linq.Enumerable.SelectListIterator`2.ToList()
   at DineEasy.Application.Extensions.ReservationExtensions.ToDtos(IEnumerable`1 reservations) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at DineEasy.Application.Services.ReservationService.GetAllAsync() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 165
2025-06-22 00:49:07.067 +02:00 [ERR] Error retrieving reservations
System.NullReferenceException: Object reference not set to an instance of an object.
   at DineEasy.Application.Extensions.ReservationExtensions.ToDto(Reservation reservation) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 10
   at DineEasy.Application.Extensions.ReservationExtensions.<>c.<ToDtos>b__2_0(Reservation r) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at System.Linq.Enumerable.SelectListIterator`2.Fill(ReadOnlySpan`1 source, Span`1 destination, Func`2 func)
   at System.Linq.Enumerable.SelectListIterator`2.ToList()
   at DineEasy.Application.Extensions.ReservationExtensions.ToDtos(IEnumerable`1 reservations) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at DineEasy.Application.Services.ReservationService.GetAllAsync() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 165
   at DineEasy.WebAPI.Controllers.ReservationsController.GetAll() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.WebAPI/Controllers/ReservationsController.cs:line 39
2025-06-22 00:49:07.067 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 1.0719ms.
2025-06-22 00:49:07.067 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-06-22 00:49:07.068 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI) in 1.3232ms
2025-06-22 00:49:07.068 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI)'
2025-06-22 00:49:07.068 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5049/api/reservations - 500 null text/plain; charset=utf-8 1.8703ms
2025-06-22 00:50:04.518 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5049/api/reservations - null null
2025-06-22 00:50:04.519 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI)'
2025-06-22 00:50:04.519 +02:00 [INF] Route matched with {action = "GetAll", controller = "Reservations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[DineEasy.SharedKernel.Models.Reservation.ReservationDto]]] GetAll() on controller DineEasy.WebAPI.Controllers.ReservationsController (DineEasy.WebAPI).
2025-06-22 00:50:04.520 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:50:04.520 +02:00 [INF] Getting reservations for user: admin123123
2025-06-22 00:50:04.520 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 1
2025-06-22 00:50:04.520 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin123123
2025-06-22 00:50:04.520 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = admin@dineeasy.com
2025-06-22 00:50:04.520 +02:00 [INF] Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = Admin
2025-06-22 00:50:04.520 +02:00 [INF] Claim: exp = 1750632203
2025-06-22 00:50:04.520 +02:00 [INF] Claim: iss = DineEasy
2025-06-22 00:50:04.520 +02:00 [INF] Claim: aud = DineEasy-Users
2025-06-22 00:50:04.520 +02:00 [INF] User is Admin - returning all reservations
2025-06-22 00:50:04.520 +02:00 [INF] Retrieving all reservations
2025-06-22 00:50:04.521 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Id", "r"."CreatedAt", "r"."Duration", "r"."PartySize", "r"."ReservationDateTime", "r"."SpecialRequests", "r"."Status", "r"."TableId", "r"."UserId"
FROM "Reservations" AS "r"
2025-06-22 00:50:04.522 +02:00 [ERR] Error occurred while retrieving all reservations
System.NullReferenceException: Object reference not set to an instance of an object.
   at DineEasy.Application.Extensions.ReservationExtensions.ToDto(Reservation reservation) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 10
   at DineEasy.Application.Extensions.ReservationExtensions.<>c.<ToDtos>b__2_0(Reservation r) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at System.Linq.Enumerable.SelectListIterator`2.Fill(ReadOnlySpan`1 source, Span`1 destination, Func`2 func)
   at System.Linq.Enumerable.SelectListIterator`2.ToList()
   at DineEasy.Application.Extensions.ReservationExtensions.ToDtos(IEnumerable`1 reservations) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at DineEasy.Application.Services.ReservationService.GetAllAsync() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 165
2025-06-22 00:50:04.522 +02:00 [ERR] Error retrieving reservations
System.NullReferenceException: Object reference not set to an instance of an object.
   at DineEasy.Application.Extensions.ReservationExtensions.ToDto(Reservation reservation) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 10
   at DineEasy.Application.Extensions.ReservationExtensions.<>c.<ToDtos>b__2_0(Reservation r) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at System.Linq.Enumerable.SelectListIterator`2.Fill(ReadOnlySpan`1 source, Span`1 destination, Func`2 func)
   at System.Linq.Enumerable.SelectListIterator`2.ToList()
   at DineEasy.Application.Extensions.ReservationExtensions.ToDtos(IEnumerable`1 reservations) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at DineEasy.Application.Services.ReservationService.GetAllAsync() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 165
   at DineEasy.WebAPI.Controllers.ReservationsController.GetAll() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.WebAPI/Controllers/ReservationsController.cs:line 39
2025-06-22 00:50:04.523 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 2.4363ms.
2025-06-22 00:50:04.523 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-06-22 00:50:04.523 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI) in 3.6194ms
2025-06-22 00:50:04.523 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI)'
2025-06-22 00:50:04.523 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5049/api/reservations - 500 null text/plain; charset=utf-8 5.1744ms
2025-06-22 00:50:05.191 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5049/api/reservations - null null
2025-06-22 00:50:05.191 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI)'
2025-06-22 00:50:05.191 +02:00 [INF] Route matched with {action = "GetAll", controller = "Reservations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[DineEasy.SharedKernel.Models.Reservation.ReservationDto]]] GetAll() on controller DineEasy.WebAPI.Controllers.ReservationsController (DineEasy.WebAPI).
2025-06-22 00:50:05.192 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:50:05.192 +02:00 [INF] Getting reservations for user: admin123123
2025-06-22 00:50:05.192 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 1
2025-06-22 00:50:05.192 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin123123
2025-06-22 00:50:05.192 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = admin@dineeasy.com
2025-06-22 00:50:05.192 +02:00 [INF] Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = Admin
2025-06-22 00:50:05.192 +02:00 [INF] Claim: exp = 1750632203
2025-06-22 00:50:05.192 +02:00 [INF] Claim: iss = DineEasy
2025-06-22 00:50:05.192 +02:00 [INF] Claim: aud = DineEasy-Users
2025-06-22 00:50:05.192 +02:00 [INF] User is Admin - returning all reservations
2025-06-22 00:50:05.192 +02:00 [INF] Retrieving all reservations
2025-06-22 00:50:05.193 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Id", "r"."CreatedAt", "r"."Duration", "r"."PartySize", "r"."ReservationDateTime", "r"."SpecialRequests", "r"."Status", "r"."TableId", "r"."UserId"
FROM "Reservations" AS "r"
2025-06-22 00:50:05.193 +02:00 [ERR] Error occurred while retrieving all reservations
System.NullReferenceException: Object reference not set to an instance of an object.
   at DineEasy.Application.Extensions.ReservationExtensions.ToDto(Reservation reservation) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 10
   at DineEasy.Application.Extensions.ReservationExtensions.<>c.<ToDtos>b__2_0(Reservation r) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at System.Linq.Enumerable.SelectListIterator`2.Fill(ReadOnlySpan`1 source, Span`1 destination, Func`2 func)
   at System.Linq.Enumerable.SelectListIterator`2.ToList()
   at DineEasy.Application.Extensions.ReservationExtensions.ToDtos(IEnumerable`1 reservations) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at DineEasy.Application.Services.ReservationService.GetAllAsync() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 165
2025-06-22 00:50:05.193 +02:00 [ERR] Error retrieving reservations
System.NullReferenceException: Object reference not set to an instance of an object.
   at DineEasy.Application.Extensions.ReservationExtensions.ToDto(Reservation reservation) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 10
   at DineEasy.Application.Extensions.ReservationExtensions.<>c.<ToDtos>b__2_0(Reservation r) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at System.Linq.Enumerable.SelectListIterator`2.Fill(ReadOnlySpan`1 source, Span`1 destination, Func`2 func)
   at System.Linq.Enumerable.SelectListIterator`2.ToList()
   at DineEasy.Application.Extensions.ReservationExtensions.ToDtos(IEnumerable`1 reservations) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at DineEasy.Application.Services.ReservationService.GetAllAsync() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 165
   at DineEasy.WebAPI.Controllers.ReservationsController.GetAll() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.WebAPI/Controllers/ReservationsController.cs:line 39
2025-06-22 00:50:05.193 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 1.6124ms.
2025-06-22 00:50:05.194 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-06-22 00:50:05.194 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI) in 2.2533ms
2025-06-22 00:50:05.194 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI)'
2025-06-22 00:50:05.194 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5049/api/reservations - 500 null text/plain; charset=utf-8 3.1686ms
2025-06-22 00:50:10.827 +02:00 [INF] Request starting HTTP/1.1 POST http://localhost:5049/api/auth/login - application/json; charset=utf-8 null
2025-06-22 00:50:10.828 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI)'
2025-06-22 00:50:10.836 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[DineEasy.SharedKernel.Models.Auth.AuthResponseDto]] Login(DineEasy.SharedKernel.Models.Auth.LoginDto) on controller DineEasy.WebAPI.Controllers.AuthController (DineEasy.WebAPI).
2025-06-22 00:50:10.854 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:50:10.857 +02:00 [INF] Login attempt for email: admin@dineeasy.com
2025-06-22 00:50:10.858 +02:00 [INF] Login attempt for email: admin@dineeasy.com
2025-06-22 00:50:10.864 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__email_0='admin@dineeasy.com' (Size = 18)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."Id", "u"."CreatedAt", "u"."Email", "u"."PasswordHash", "u"."Role", "u"."Username"
FROM "Users" AS "u"
WHERE "u"."Email" = @__email_0
LIMIT 1
2025-06-22 00:50:11.027 +02:00 [INF] Successful login for user: admin123123
2025-06-22 00:50:11.027 +02:00 [INF] Successful login for user: admin123123
2025-06-22 00:50:11.027 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 172.2433ms.
2025-06-22 00:50:11.027 +02:00 [INF] Executing OkObjectResult, writing value of type 'DineEasy.SharedKernel.Models.Auth.AuthResponseDto'.
2025-06-22 00:50:11.028 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI) in 191.7602ms
2025-06-22 00:50:11.028 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.AuthController.Login (DineEasy.WebAPI)'
2025-06-22 00:50:11.028 +02:00 [INF] Request finished HTTP/1.1 POST http://localhost:5049/api/auth/login - 200 null application/json; charset=utf-8 201.0207ms
2025-06-22 00:50:12.662 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5049/api/reservations - null null
2025-06-22 00:50:12.663 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI)'
2025-06-22 00:50:12.663 +02:00 [INF] Route matched with {action = "GetAll", controller = "Reservations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[DineEasy.SharedKernel.Models.Reservation.ReservationDto]]] GetAll() on controller DineEasy.WebAPI.Controllers.ReservationsController (DineEasy.WebAPI).
2025-06-22 00:50:12.664 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:50:12.664 +02:00 [INF] Getting reservations for user: admin123123
2025-06-22 00:50:12.664 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 1
2025-06-22 00:50:12.664 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin123123
2025-06-22 00:50:12.664 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = admin@dineeasy.com
2025-06-22 00:50:12.664 +02:00 [INF] Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = Admin
2025-06-22 00:50:12.664 +02:00 [INF] Claim: exp = 1750632611
2025-06-22 00:50:12.664 +02:00 [INF] Claim: iss = DineEasy
2025-06-22 00:50:12.664 +02:00 [INF] Claim: aud = DineEasy-Users
2025-06-22 00:50:12.664 +02:00 [INF] User is Admin - returning all reservations
2025-06-22 00:50:12.664 +02:00 [INF] Retrieving all reservations
2025-06-22 00:50:12.665 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Id", "r"."CreatedAt", "r"."Duration", "r"."PartySize", "r"."ReservationDateTime", "r"."SpecialRequests", "r"."Status", "r"."TableId", "r"."UserId"
FROM "Reservations" AS "r"
2025-06-22 00:50:12.667 +02:00 [ERR] Error occurred while retrieving all reservations
System.NullReferenceException: Object reference not set to an instance of an object.
   at DineEasy.Application.Extensions.ReservationExtensions.ToDto(Reservation reservation) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 10
   at DineEasy.Application.Extensions.ReservationExtensions.<>c.<ToDtos>b__2_0(Reservation r) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at System.Linq.Enumerable.SelectListIterator`2.Fill(ReadOnlySpan`1 source, Span`1 destination, Func`2 func)
   at System.Linq.Enumerable.SelectListIterator`2.ToList()
   at DineEasy.Application.Extensions.ReservationExtensions.ToDtos(IEnumerable`1 reservations) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at DineEasy.Application.Services.ReservationService.GetAllAsync() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 165
2025-06-22 00:50:12.668 +02:00 [ERR] Error retrieving reservations
System.NullReferenceException: Object reference not set to an instance of an object.
   at DineEasy.Application.Extensions.ReservationExtensions.ToDto(Reservation reservation) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 10
   at DineEasy.Application.Extensions.ReservationExtensions.<>c.<ToDtos>b__2_0(Reservation r) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at System.Linq.Enumerable.SelectListIterator`2.Fill(ReadOnlySpan`1 source, Span`1 destination, Func`2 func)
   at System.Linq.Enumerable.SelectListIterator`2.ToList()
   at DineEasy.Application.Extensions.ReservationExtensions.ToDtos(IEnumerable`1 reservations) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at DineEasy.Application.Services.ReservationService.GetAllAsync() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 165
   at DineEasy.WebAPI.Controllers.ReservationsController.GetAll() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.WebAPI/Controllers/ReservationsController.cs:line 39
2025-06-22 00:50:12.668 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 4.2693ms.
2025-06-22 00:50:12.669 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-06-22 00:50:12.669 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI) in 5.5408ms
2025-06-22 00:50:12.669 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI)'
2025-06-22 00:50:12.669 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5049/api/reservations - 500 null text/plain; charset=utf-8 6.5955ms
2025-06-22 00:50:14.594 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5049/api/reservations - null null
2025-06-22 00:50:14.594 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI)'
2025-06-22 00:50:14.594 +02:00 [INF] Route matched with {action = "GetAll", controller = "Reservations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[DineEasy.SharedKernel.Models.Reservation.ReservationDto]]] GetAll() on controller DineEasy.WebAPI.Controllers.ReservationsController (DineEasy.WebAPI).
2025-06-22 00:50:14.595 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:50:14.595 +02:00 [INF] Getting reservations for user: admin123123
2025-06-22 00:50:14.595 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 1
2025-06-22 00:50:14.595 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin123123
2025-06-22 00:50:14.595 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = admin@dineeasy.com
2025-06-22 00:50:14.595 +02:00 [INF] Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = Admin
2025-06-22 00:50:14.595 +02:00 [INF] Claim: exp = 1750632611
2025-06-22 00:50:14.595 +02:00 [INF] Claim: iss = DineEasy
2025-06-22 00:50:14.595 +02:00 [INF] Claim: aud = DineEasy-Users
2025-06-22 00:50:14.595 +02:00 [INF] User is Admin - returning all reservations
2025-06-22 00:50:14.595 +02:00 [INF] Retrieving all reservations
2025-06-22 00:50:14.595 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Id", "r"."CreatedAt", "r"."Duration", "r"."PartySize", "r"."ReservationDateTime", "r"."SpecialRequests", "r"."Status", "r"."TableId", "r"."UserId"
FROM "Reservations" AS "r"
2025-06-22 00:50:14.596 +02:00 [ERR] Error occurred while retrieving all reservations
System.NullReferenceException: Object reference not set to an instance of an object.
   at DineEasy.Application.Extensions.ReservationExtensions.ToDto(Reservation reservation) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 10
   at DineEasy.Application.Extensions.ReservationExtensions.<>c.<ToDtos>b__2_0(Reservation r) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at System.Linq.Enumerable.SelectListIterator`2.Fill(ReadOnlySpan`1 source, Span`1 destination, Func`2 func)
   at System.Linq.Enumerable.SelectListIterator`2.ToList()
   at DineEasy.Application.Extensions.ReservationExtensions.ToDtos(IEnumerable`1 reservations) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at DineEasy.Application.Services.ReservationService.GetAllAsync() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 165
2025-06-22 00:50:14.597 +02:00 [ERR] Error retrieving reservations
System.NullReferenceException: Object reference not set to an instance of an object.
   at DineEasy.Application.Extensions.ReservationExtensions.ToDto(Reservation reservation) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 10
   at DineEasy.Application.Extensions.ReservationExtensions.<>c.<ToDtos>b__2_0(Reservation r) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at System.Linq.Enumerable.SelectListIterator`2.Fill(ReadOnlySpan`1 source, Span`1 destination, Func`2 func)
   at System.Linq.Enumerable.SelectListIterator`2.ToList()
   at DineEasy.Application.Extensions.ReservationExtensions.ToDtos(IEnumerable`1 reservations) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at DineEasy.Application.Services.ReservationService.GetAllAsync() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 165
   at DineEasy.WebAPI.Controllers.ReservationsController.GetAll() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.WebAPI/Controllers/ReservationsController.cs:line 39
2025-06-22 00:50:14.598 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 2.9375ms.
2025-06-22 00:50:14.598 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-06-22 00:50:14.598 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI) in 3.5479ms
2025-06-22 00:50:14.598 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI)'
2025-06-22 00:50:14.598 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5049/api/reservations - 500 null text/plain; charset=utf-8 4.2834ms
2025-06-22 00:50:15.246 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5049/api/reservations - null null
2025-06-22 00:50:15.247 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI)'
2025-06-22 00:50:15.247 +02:00 [INF] Route matched with {action = "GetAll", controller = "Reservations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[DineEasy.SharedKernel.Models.Reservation.ReservationDto]]] GetAll() on controller DineEasy.WebAPI.Controllers.ReservationsController (DineEasy.WebAPI).
2025-06-22 00:50:15.248 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:50:15.248 +02:00 [INF] Getting reservations for user: admin123123
2025-06-22 00:50:15.248 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 1
2025-06-22 00:50:15.248 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin123123
2025-06-22 00:50:15.248 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = admin@dineeasy.com
2025-06-22 00:50:15.248 +02:00 [INF] Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = Admin
2025-06-22 00:50:15.248 +02:00 [INF] Claim: exp = 1750632611
2025-06-22 00:50:15.248 +02:00 [INF] Claim: iss = DineEasy
2025-06-22 00:50:15.248 +02:00 [INF] Claim: aud = DineEasy-Users
2025-06-22 00:50:15.248 +02:00 [INF] User is Admin - returning all reservations
2025-06-22 00:50:15.248 +02:00 [INF] Retrieving all reservations
2025-06-22 00:50:15.249 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Id", "r"."CreatedAt", "r"."Duration", "r"."PartySize", "r"."ReservationDateTime", "r"."SpecialRequests", "r"."Status", "r"."TableId", "r"."UserId"
FROM "Reservations" AS "r"
2025-06-22 00:50:15.250 +02:00 [ERR] Error occurred while retrieving all reservations
System.NullReferenceException: Object reference not set to an instance of an object.
   at DineEasy.Application.Extensions.ReservationExtensions.ToDto(Reservation reservation) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 10
   at DineEasy.Application.Extensions.ReservationExtensions.<>c.<ToDtos>b__2_0(Reservation r) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at System.Linq.Enumerable.SelectListIterator`2.Fill(ReadOnlySpan`1 source, Span`1 destination, Func`2 func)
   at System.Linq.Enumerable.SelectListIterator`2.ToList()
   at DineEasy.Application.Extensions.ReservationExtensions.ToDtos(IEnumerable`1 reservations) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at DineEasy.Application.Services.ReservationService.GetAllAsync() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 165
2025-06-22 00:50:15.250 +02:00 [ERR] Error retrieving reservations
System.NullReferenceException: Object reference not set to an instance of an object.
   at DineEasy.Application.Extensions.ReservationExtensions.ToDto(Reservation reservation) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 10
   at DineEasy.Application.Extensions.ReservationExtensions.<>c.<ToDtos>b__2_0(Reservation r) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at System.Linq.Enumerable.SelectListIterator`2.Fill(ReadOnlySpan`1 source, Span`1 destination, Func`2 func)
   at System.Linq.Enumerable.SelectListIterator`2.ToList()
   at DineEasy.Application.Extensions.ReservationExtensions.ToDtos(IEnumerable`1 reservations) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at DineEasy.Application.Services.ReservationService.GetAllAsync() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 165
   at DineEasy.WebAPI.Controllers.ReservationsController.GetAll() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.WebAPI/Controllers/ReservationsController.cs:line 39
2025-06-22 00:50:15.251 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 2.687ms.
2025-06-22 00:50:15.251 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-06-22 00:50:15.251 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI) in 3.2431ms
2025-06-22 00:50:15.251 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI)'
2025-06-22 00:50:15.251 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5049/api/reservations - 500 null text/plain; charset=utf-8 4.8001ms
2025-06-22 00:50:15.407 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5049/api/reservations - null null
2025-06-22 00:50:15.407 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI)'
2025-06-22 00:50:15.407 +02:00 [INF] Route matched with {action = "GetAll", controller = "Reservations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[DineEasy.SharedKernel.Models.Reservation.ReservationDto]]] GetAll() on controller DineEasy.WebAPI.Controllers.ReservationsController (DineEasy.WebAPI).
2025-06-22 00:50:15.407 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:50:15.407 +02:00 [INF] Getting reservations for user: admin123123
2025-06-22 00:50:15.407 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 1
2025-06-22 00:50:15.407 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin123123
2025-06-22 00:50:15.407 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = admin@dineeasy.com
2025-06-22 00:50:15.407 +02:00 [INF] Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = Admin
2025-06-22 00:50:15.407 +02:00 [INF] Claim: exp = 1750632611
2025-06-22 00:50:15.407 +02:00 [INF] Claim: iss = DineEasy
2025-06-22 00:50:15.407 +02:00 [INF] Claim: aud = DineEasy-Users
2025-06-22 00:50:15.407 +02:00 [INF] User is Admin - returning all reservations
2025-06-22 00:50:15.407 +02:00 [INF] Retrieving all reservations
2025-06-22 00:50:15.408 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Id", "r"."CreatedAt", "r"."Duration", "r"."PartySize", "r"."ReservationDateTime", "r"."SpecialRequests", "r"."Status", "r"."TableId", "r"."UserId"
FROM "Reservations" AS "r"
2025-06-22 00:50:15.408 +02:00 [ERR] Error occurred while retrieving all reservations
System.NullReferenceException: Object reference not set to an instance of an object.
   at DineEasy.Application.Extensions.ReservationExtensions.ToDto(Reservation reservation) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 10
   at DineEasy.Application.Extensions.ReservationExtensions.<>c.<ToDtos>b__2_0(Reservation r) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at System.Linq.Enumerable.SelectListIterator`2.Fill(ReadOnlySpan`1 source, Span`1 destination, Func`2 func)
   at System.Linq.Enumerable.SelectListIterator`2.ToList()
   at DineEasy.Application.Extensions.ReservationExtensions.ToDtos(IEnumerable`1 reservations) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at DineEasy.Application.Services.ReservationService.GetAllAsync() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 165
2025-06-22 00:50:15.408 +02:00 [ERR] Error retrieving reservations
System.NullReferenceException: Object reference not set to an instance of an object.
   at DineEasy.Application.Extensions.ReservationExtensions.ToDto(Reservation reservation) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 10
   at DineEasy.Application.Extensions.ReservationExtensions.<>c.<ToDtos>b__2_0(Reservation r) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at System.Linq.Enumerable.SelectListIterator`2.Fill(ReadOnlySpan`1 source, Span`1 destination, Func`2 func)
   at System.Linq.Enumerable.SelectListIterator`2.ToList()
   at DineEasy.Application.Extensions.ReservationExtensions.ToDtos(IEnumerable`1 reservations) in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Extensions/ReservationExtensions.cs:line 37
   at DineEasy.Application.Services.ReservationService.GetAllAsync() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.Application/Services/ReservationService.cs:line 165
   at DineEasy.WebAPI.Controllers.ReservationsController.GetAll() in /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.WebAPI/Controllers/ReservationsController.cs:line 39
2025-06-22 00:50:15.409 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 1.3234ms.
2025-06-22 00:50:15.409 +02:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2025-06-22 00:50:15.409 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI) in 1.6064ms
2025-06-22 00:50:15.409 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI)'
2025-06-22 00:50:15.409 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5049/api/reservations - 500 null text/plain; charset=utf-8 2.0069ms
2025-06-22 00:52:36.072 +02:00 [INF] Application is shutting down...
2025-06-22 00:52:38.509 +02:00 [WRN] Sensitive data logging is enabled. Log entries and exception messages may include sensitive application data; this mode should only be enabled during development.
2025-06-22 00:52:38.669 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-06-22 00:52:38.688 +02:00 [INF] User profile is available. Using '/Users/jakubwalkowicz/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-06-22 00:52:38.712 +02:00 [INF] Now listening on: http://localhost:5049
2025-06-22 00:52:38.714 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-06-22 00:52:38.714 +02:00 [INF] Hosting environment: Development
2025-06-22 00:52:38.714 +02:00 [INF] Content root path: /Users/jakubwalkowicz/AGH_II_Semestr/PAB/Projekt_koncowy/DineEasy/DineEasy.WebAPI
2025-06-22 00:52:38.969 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5049/swagger/index.html - null null
2025-06-22 00:52:39.057 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5049/swagger/index.html - 200 null text/html;charset=utf-8 89.214ms
2025-06-22 00:52:39.103 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5049/swagger/v1/swagger.json - null null
2025-06-22 00:52:39.197 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5049/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 95.0958ms
2025-06-22 00:52:41.882 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5049/api/reservations - null null
2025-06-22 00:52:41.884 +02:00 [WRN] Failed to determine the https port for redirect.
2025-06-22 00:52:41.931 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI)'
2025-06-22 00:52:41.940 +02:00 [INF] Route matched with {action = "GetAll", controller = "Reservations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[DineEasy.SharedKernel.Models.Reservation.ReservationDto]]] GetAll() on controller DineEasy.WebAPI.Controllers.ReservationsController (DineEasy.WebAPI).
2025-06-22 00:52:41.943 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:52:41.945 +02:00 [INF] Getting reservations for user: admin123123
2025-06-22 00:52:41.945 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 1
2025-06-22 00:52:41.945 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin123123
2025-06-22 00:52:41.945 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = admin@dineeasy.com
2025-06-22 00:52:41.945 +02:00 [INF] Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = Admin
2025-06-22 00:52:41.945 +02:00 [INF] Claim: exp = 1750632611
2025-06-22 00:52:41.945 +02:00 [INF] Claim: iss = DineEasy
2025-06-22 00:52:41.945 +02:00 [INF] Claim: aud = DineEasy-Users
2025-06-22 00:52:41.945 +02:00 [INF] User is Admin - returning all reservations
2025-06-22 00:52:41.945 +02:00 [INF] Retrieving all reservations
2025-06-22 00:52:42.136 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Id", "r"."CreatedAt", "r"."Duration", "r"."PartySize", "r"."ReservationDateTime", "r"."SpecialRequests", "r"."Status", "r"."TableId", "r"."UserId", "t"."Id", "t"."Capacity", "t"."IsActive", "t"."TableNumber", "u"."Id", "u"."CreatedAt", "u"."Email", "u"."PasswordHash", "u"."Role", "u"."Username"
FROM "Reservations" AS "r"
INNER JOIN "Tables" AS "t" ON "r"."TableId" = "t"."Id"
INNER JOIN "Users" AS "u" ON "r"."UserId" = "u"."Id"
2025-06-22 00:52:42.188 +02:00 [INF] Successfully retrieved 3 reservations
2025-06-22 00:52:42.190 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 244.7125ms.
2025-06-22 00:52:42.193 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DineEasy.SharedKernel.Models.Reservation.ReservationDto, DineEasy.SharedKernel, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-22 00:52:42.214 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI) in 272.3932ms
2025-06-22 00:52:42.214 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI)'
2025-06-22 00:52:42.215 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5049/api/reservations - 200 null application/json; charset=utf-8 333.1458ms
2025-06-22 00:52:46.121 +02:00 [INF] Request starting HTTP/1.1 DELETE http://localhost:5049/api/reservations/1 - null null
2025-06-22 00:52:46.125 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.Delete (DineEasy.WebAPI)'
2025-06-22 00:52:46.133 +02:00 [INF] Route matched with {action = "Delete", controller = "Reservations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Delete(Int32) on controller DineEasy.WebAPI.Controllers.ReservationsController (DineEasy.WebAPI).
2025-06-22 00:52:46.142 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.ReservationsController.Delete (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:52:46.143 +02:00 [INF] Deleting reservation with ID: 1
2025-06-22 00:52:46.144 +02:00 [INF] Attempting to delete reservation with ID: 1
2025-06-22 00:52:46.195 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='1'], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Id", "r"."CreatedAt", "r"."Duration", "r"."PartySize", "r"."ReservationDateTime", "r"."SpecialRequests", "r"."Status", "r"."TableId", "r"."UserId", "u"."Id", "u"."CreatedAt", "u"."Email", "u"."PasswordHash", "u"."Role", "u"."Username", "t"."Id", "t"."Capacity", "t"."IsActive", "t"."TableNumber"
FROM "Reservations" AS "r"
INNER JOIN "Users" AS "u" ON "r"."UserId" = "u"."Id"
INNER JOIN "Tables" AS "t" ON "r"."TableId" = "t"."Id"
WHERE "r"."Id" = @__id_0
LIMIT 1
2025-06-22 00:52:46.263 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='1'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Reservations"
WHERE "Id" = @p0
RETURNING 1;
2025-06-22 00:52:46.269 +02:00 [INF] Reservation deleted successfully - ID: 1, was scheduled for "2025-06-23T15:59:00.0000000"
2025-06-22 00:52:46.270 +02:00 [INF] Successfully deleted reservation with ID: 1
2025-06-22 00:52:46.270 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.ReservationsController.Delete (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.NoContentResult in 127.9799ms.
2025-06-22 00:52:46.272 +02:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-06-22 00:52:46.272 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.ReservationsController.Delete (DineEasy.WebAPI) in 138.8517ms
2025-06-22 00:52:46.272 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.Delete (DineEasy.WebAPI)'
2025-06-22 00:52:46.272 +02:00 [INF] Request finished HTTP/1.1 DELETE http://localhost:5049/api/reservations/1 - 204 null null 151.3392ms
2025-06-22 00:52:46.273 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5049/api/reservations - null null
2025-06-22 00:52:46.274 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI)'
2025-06-22 00:52:46.275 +02:00 [INF] Route matched with {action = "GetAll", controller = "Reservations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[DineEasy.SharedKernel.Models.Reservation.ReservationDto]]] GetAll() on controller DineEasy.WebAPI.Controllers.ReservationsController (DineEasy.WebAPI).
2025-06-22 00:52:46.276 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:52:46.276 +02:00 [INF] Getting reservations for user: admin123123
2025-06-22 00:52:46.276 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 1
2025-06-22 00:52:46.276 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin123123
2025-06-22 00:52:46.276 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = admin@dineeasy.com
2025-06-22 00:52:46.276 +02:00 [INF] Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = Admin
2025-06-22 00:52:46.276 +02:00 [INF] Claim: exp = 1750632611
2025-06-22 00:52:46.276 +02:00 [INF] Claim: iss = DineEasy
2025-06-22 00:52:46.276 +02:00 [INF] Claim: aud = DineEasy-Users
2025-06-22 00:52:46.276 +02:00 [INF] User is Admin - returning all reservations
2025-06-22 00:52:46.276 +02:00 [INF] Retrieving all reservations
2025-06-22 00:52:46.278 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Id", "r"."CreatedAt", "r"."Duration", "r"."PartySize", "r"."ReservationDateTime", "r"."SpecialRequests", "r"."Status", "r"."TableId", "r"."UserId", "t"."Id", "t"."Capacity", "t"."IsActive", "t"."TableNumber", "u"."Id", "u"."CreatedAt", "u"."Email", "u"."PasswordHash", "u"."Role", "u"."Username"
FROM "Reservations" AS "r"
INNER JOIN "Tables" AS "t" ON "r"."TableId" = "t"."Id"
INNER JOIN "Users" AS "u" ON "r"."UserId" = "u"."Id"
2025-06-22 00:52:46.279 +02:00 [INF] Successfully retrieved 2 reservations
2025-06-22 00:52:46.279 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 2.9226ms.
2025-06-22 00:52:46.279 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DineEasy.SharedKernel.Models.Reservation.ReservationDto, DineEasy.SharedKernel, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-22 00:52:46.279 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI) in 4.2565ms
2025-06-22 00:52:46.279 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI)'
2025-06-22 00:52:46.279 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5049/api/reservations - 200 null application/json; charset=utf-8 6.1985ms
2025-06-22 00:52:55.880 +02:00 [INF] Request starting HTTP/1.1 DELETE http://localhost:5049/api/reservations/2 - null null
2025-06-22 00:52:55.881 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.Delete (DineEasy.WebAPI)'
2025-06-22 00:52:55.882 +02:00 [INF] Route matched with {action = "Delete", controller = "Reservations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult] Delete(Int32) on controller DineEasy.WebAPI.Controllers.ReservationsController (DineEasy.WebAPI).
2025-06-22 00:52:55.883 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.ReservationsController.Delete (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:52:55.883 +02:00 [INF] Deleting reservation with ID: 2
2025-06-22 00:52:55.883 +02:00 [INF] Attempting to delete reservation with ID: 2
2025-06-22 00:52:55.887 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__id_0='2'], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Id", "r"."CreatedAt", "r"."Duration", "r"."PartySize", "r"."ReservationDateTime", "r"."SpecialRequests", "r"."Status", "r"."TableId", "r"."UserId", "u"."Id", "u"."CreatedAt", "u"."Email", "u"."PasswordHash", "u"."Role", "u"."Username", "t"."Id", "t"."Capacity", "t"."IsActive", "t"."TableNumber"
FROM "Reservations" AS "r"
INNER JOIN "Users" AS "u" ON "r"."UserId" = "u"."Id"
INNER JOIN "Tables" AS "t" ON "r"."TableId" = "t"."Id"
WHERE "r"."Id" = @__id_0
LIMIT 1
2025-06-22 00:52:55.891 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='2'], CommandType='"Text"', CommandTimeout='30']
DELETE FROM "Reservations"
WHERE "Id" = @p0
RETURNING 1;
2025-06-22 00:52:55.893 +02:00 [INF] Reservation deleted successfully - ID: 2, was scheduled for "2025-06-23T16:50:00.0000000"
2025-06-22 00:52:55.894 +02:00 [INF] Successfully deleted reservation with ID: 2
2025-06-22 00:52:55.894 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.ReservationsController.Delete (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.NoContentResult in 10.7042ms.
2025-06-22 00:52:55.894 +02:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-06-22 00:52:55.894 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.ReservationsController.Delete (DineEasy.WebAPI) in 12.3537ms
2025-06-22 00:52:55.894 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.Delete (DineEasy.WebAPI)'
2025-06-22 00:52:55.894 +02:00 [INF] Request finished HTTP/1.1 DELETE http://localhost:5049/api/reservations/2 - 204 null null 13.8068ms
2025-06-22 00:52:55.895 +02:00 [INF] Request starting HTTP/1.1 GET http://localhost:5049/api/reservations - null null
2025-06-22 00:52:55.896 +02:00 [INF] Executing endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI)'
2025-06-22 00:52:55.896 +02:00 [INF] Route matched with {action = "GetAll", controller = "Reservations"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[DineEasy.SharedKernel.Models.Reservation.ReservationDto]]] GetAll() on controller DineEasy.WebAPI.Controllers.ReservationsController (DineEasy.WebAPI).
2025-06-22 00:52:55.896 +02:00 [INF] Executing action method DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI) - Validation state: "Valid"
2025-06-22 00:52:55.897 +02:00 [INF] Getting reservations for user: admin123123
2025-06-22 00:52:55.897 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier = 1
2025-06-22 00:52:55.897 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name = admin123123
2025-06-22 00:52:55.897 +02:00 [INF] Claim: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress = admin@dineeasy.com
2025-06-22 00:52:55.897 +02:00 [INF] Claim: http://schemas.microsoft.com/ws/2008/06/identity/claims/role = Admin
2025-06-22 00:52:55.897 +02:00 [INF] Claim: exp = 1750632611
2025-06-22 00:52:55.897 +02:00 [INF] Claim: iss = DineEasy
2025-06-22 00:52:55.897 +02:00 [INF] Claim: aud = DineEasy-Users
2025-06-22 00:52:55.897 +02:00 [INF] User is Admin - returning all reservations
2025-06-22 00:52:55.897 +02:00 [INF] Retrieving all reservations
2025-06-22 00:52:55.898 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "r"."Id", "r"."CreatedAt", "r"."Duration", "r"."PartySize", "r"."ReservationDateTime", "r"."SpecialRequests", "r"."Status", "r"."TableId", "r"."UserId", "t"."Id", "t"."Capacity", "t"."IsActive", "t"."TableNumber", "u"."Id", "u"."CreatedAt", "u"."Email", "u"."PasswordHash", "u"."Role", "u"."Username"
FROM "Reservations" AS "r"
INNER JOIN "Tables" AS "t" ON "r"."TableId" = "t"."Id"
INNER JOIN "Users" AS "u" ON "r"."UserId" = "u"."Id"
2025-06-22 00:52:55.899 +02:00 [INF] Successfully retrieved 1 reservations
2025-06-22 00:52:55.899 +02:00 [INF] Executed action method DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 2.2206ms.
2025-06-22 00:52:55.899 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[DineEasy.SharedKernel.Models.Reservation.ReservationDto, DineEasy.SharedKernel, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-06-22 00:52:55.899 +02:00 [INF] Executed action DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI) in 3.0191ms
2025-06-22 00:52:55.899 +02:00 [INF] Executed endpoint 'DineEasy.WebAPI.Controllers.ReservationsController.GetAll (DineEasy.WebAPI)'
2025-06-22 00:52:55.899 +02:00 [INF] Request finished HTTP/1.1 GET http://localhost:5049/api/reservations - 200 null application/json; charset=utf-8 3.9017ms
